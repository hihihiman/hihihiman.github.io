<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®° -</title><meta name=author content="éƒ½å°†ä¼š"><meta name=author-link content><meta name=description content="Java ç»å…¸ä¹¦ç›®"><meta name=keywords content="éƒ½å°†ä¼š,Java"><meta itemprop=name content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta itemprop=description content="Java ç»å…¸ä¹¦ç›®"><meta itemprop=datePublished content="2021-11-08T15:20:42+08:00"><meta itemprop=dateModified content="2021-11-08T15:20:42+08:00"><meta itemprop=wordCount content="8244"><meta itemprop=image content="https://leni.fun/images/avatar.jpg"><meta itemprop=keywords content="Java,"><meta property="og:title" content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta property="og:description" content="Java ç»å…¸ä¹¦ç›®"><meta property="og:type" content="article"><meta property="og:url" content="https://leni.fun/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/"><meta property="og:image" content="https://leni.fun/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-08T15:20:42+08:00"><meta property="article:modified_time" content="2021-11-08T15:20:42+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leni.fun/images/avatar.jpg"><meta name=twitter:title content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta name=twitter:description content="Java ç»å…¸ä¹¦ç›®"><meta name=application-name content="éƒ½å°†ä¼šçš„ APP"><meta name=apple-mobile-web-app-title content="éƒ½å°†ä¼šçš„ APP"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://leni.fun/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/><link rel=prev href=https://leni.fun/spring_draft/><link rel=next href=https://leni.fun/springboot_draft/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/leni.fun\/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0\/"},"genre":"posts","keywords":"Java","wordcount":8244,"url":"https:\/\/leni.fun\/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0\/","datePublished":"2021-11-08T15:20:42+08:00","dateModified":"2021-11-08T15:20:42+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"éƒ½å°†ä¼š"},"description":"Java ç»å…¸ä¹¦ç›®"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>éƒ½å°†ä¼š</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æŠ€æœ¯</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> ç”Ÿæ´»</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> å…³äº</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=å…³é”®è¯æœç´¢ id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>éƒ½å°†ä¼š</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=å…³é”®è¯æœç´¢ id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æŠ€æœ¯</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> ç”Ÿæ´»</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> å…³äº</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/ title>ä¸»é¡µ</a></li><li class=breadcrumb-item><a href=/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>ç›®å½•&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=éƒ½å°†ä¼š data-alt=éƒ½å°†ä¼š class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;éƒ½å°†ä¼š</span></span>
<span class=post-category>æ”¶å½•äº <a href=/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> è¯»ä¹¦ç¬”è®°</a></span></div><div class=post-meta-line><span title="å‘å¸ƒäº 2021-11-08 15:20:42"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2021-11-08>2021-11-08</time></span>&nbsp;<span title="æ›´æ–°äº 2021-11-08 15:20:42"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2021-11-08>2021-11-08</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>çº¦ 8244 å­—</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>é¢„è®¡é˜…è¯» 17 åˆ†é’Ÿ</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°>
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;æ¬¡é˜…è¯»
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#ä¸€åŸºç¡€çŸ¥è¯†>ä¸€ã€åŸºç¡€çŸ¥è¯†</a><ul><li><a href=#1-å‡½æ•°å¼ç¼–ç¨‹>1. å‡½æ•°å¼ç¼–ç¨‹</a></li><li><a href=#2-lambdaè¡¨è¾¾å¼è¡Œä¸ºå‚æ•°åŒ–çµæ´»ç®€æ´>â˜…2. lambdaè¡¨è¾¾å¼ï¼šè¡Œä¸ºå‚æ•°åŒ–ï¼ˆçµæ´»ã€ç®€æ´ï¼‰</a></li></ul></li><li><a href=#äºŒå‡½æ•°å¼æ•°æ®å¤„ç†>äºŒã€å‡½æ•°å¼æ•°æ®å¤„ç†</a><ul><li><a href=#1-æµ>â˜…1. æµ</a><ul><li><a href=#1-1-åŸå§‹ç±»å‹æµç‰¹åŒ–>1-1. åŸå§‹ç±»å‹æµç‰¹åŒ–</a></li><li><a href=#1-2-æ˜ å°„åˆ°æ•°æ®æµ>1-2. æ˜ å°„åˆ°æ•°æ®æµ</a></li><li><a href=#1-3-æ— é™æµæ–æ³¢é‚£å¥‘æ•°åˆ—>1-3. æ— é™æµ(æ–æ³¢é‚£å¥‘æ•°åˆ—)</a></li><li><a href=#1-4-reduce>1-4. reduce</a></li><li><a href=#1-5-æ”¶é›†å™¨>1-5. æ”¶é›†å™¨</a><ul><li><a href=#collectoræ¥å£>Collectoræ¥å£</a></li><li><a href=#è‡ªå·±å®ç°æ”¶é›†å™¨>è‡ªå·±å®ç°æ”¶é›†å™¨</a></li></ul></li></ul></li><li><a href=#2-ç”¨-optional-å–ä»£-null>â˜…2. ç”¨ Optional å–ä»£ null</a><ul><li><a href=#2-1-optional-çš„æ–¹æ³•>2-1. Optional çš„æ–¹æ³•</a></li><li><a href=#2-2-å®æˆ˜æ¡ˆä¾‹>2-2. å®æˆ˜æ¡ˆä¾‹</a></li></ul></li><li><a href=#3-å†…éƒ¨è¿­ä»£>3. å†…éƒ¨è¿­ä»£</a></li></ul></li><li><a href=#ä¸‰é«˜æ•ˆ-java-8-ç¼–ç¨‹>ä¸‰ã€é«˜æ•ˆ Java 8 ç¼–ç¨‹</a><ul><li><a href=#1-å„ç‰ˆæœ¬å˜åŒ–>1. å„ç‰ˆæœ¬å˜åŒ–</a></li><li><a href=#2-è®¾è®¡æ¨¡å¼>ğŸŒŸ2. è®¾è®¡æ¨¡å¼</a><ul><li><a href=#2-1-ç­–ç•¥æ¨¡å¼>2-1. ç­–ç•¥æ¨¡å¼</a></li><li><a href=#2-2-æ¨¡æ¿æ–¹æ³•>2-2. æ¨¡æ¿æ–¹æ³•</a></li><li><a href=#2-3-è§‚å¯Ÿè€…æ¨¡å¼>2-3. è§‚å¯Ÿè€…æ¨¡å¼</a></li><li><a href=#2-4-è´£ä»»é“¾æ¨¡å¼>2-4. è´£ä»»é“¾æ¨¡å¼</a></li><li><a href=#2-5-å·¥å‚æ¨¡å¼>2-5. å·¥å‚æ¨¡å¼</a></li></ul></li><li><a href=#3-peekæŸ¥çœ‹ä¸­é—´å€¼>3. peekæŸ¥çœ‹ä¸­é—´å€¼</a></li><li><a href=#4-æ¥å£çš„é»˜è®¤æ–¹æ³•>â˜…4. æ¥å£çš„é»˜è®¤æ–¹æ³•</a><ul><li><a href=#4-1-ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜>4-1. ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜</a></li><li><a href=#4-2-ä¸‰æ¡è§„åˆ™>4-2. ä¸‰æ¡è§„åˆ™</a></li></ul></li><li><a href=#5-ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹>5. ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</a><ul><li><a href=#5-1-å¹¶å‘ä¸å¹¶è¡Œ>5-1. å¹¶å‘ä¸å¹¶è¡Œ</a></li><li><a href=#5-2-future---completablefuture>â˜…5-2. Future -> Â CompletableFuture</a><ul><li><a href=#å®ä¾‹>å®ä¾‹</a></li></ul></li><li><a href=#5-3-ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨>5-3. ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨</a><ul><li><a href=#å®ˆæŠ¤è¿›ç¨‹>å®ˆæŠ¤è¿›ç¨‹</a></li></ul></li><li><a href=#5-4-completablefuture-ä¸-parallelstream-çš„é€‰æ‹©>5-4. CompletableFuture ä¸ parallelStream çš„é€‰æ‹©</a></li><li><a href=#5-5-join-ä¸-get-æ–¹æ³•æ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ>5-5. join ä¸ get æ–¹æ³•ï¼Œæ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ</a><ul><li><a href=#futurethencompose>future.thenCompose</a></li><li><a href=#futurethencombine>future.thenCombine</a></li></ul></li></ul></li><li><a href=#6-æ–°çš„æ—¥æœŸå’Œæ—¶é—´api>6. æ–°çš„æ—¥æœŸå’Œæ—¶é—´API</a><ul><li><a href=#6-1-localdate--localtime-å’Œ-localdatetime>6-1. LocalDate ã€ LocalTime å’Œ LocalDateTime</a></li><li><a href=#6-2-å®šä¹‰-duration-æˆ–-period>6-2. å®šä¹‰ Duration æˆ– Period</a></li><li><a href=#6-3-æ“çºµæ—¥æœŸ>6-3. æ“çºµæ—¥æœŸ</a></li><li><a href=#6-4-è®¾è®¡ä¸€ä¸ªnextworkingdayç±»>6-4. è®¾è®¡ä¸€ä¸ªNextWorkingDayç±»</a></li><li><a href=#6-5-æ—¥æœŸå’Œ-string-è½¬æ¢>6-5. æ—¥æœŸå’Œ String è½¬æ¢</a></li></ul></li></ul></li><li><a href=#å››è¶…è¶Š-java-8>å››ã€è¶…è¶Š Java 8</a><ul><li><a href=#1-åŸºäºå°¾-é€’çš„é˜¶ä¹˜>1. åŸºäºâ€œå°¾-é€’â€çš„é˜¶ä¹˜</a></li><li><a href=#2-ç§‘é‡ŒåŒ–curry>2. ç§‘é‡ŒåŒ–ï¼ˆcurryï¼‰</a></li><li><a href=#3-scala>3. Scala</a></li><li><a href=#4-é—­åŒ…>4. é—­åŒ…</a></li><li><a href=#5-trait>5. trait</a></li></ul></li></ul></nav></div></div><div class=content id=content><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i>æ³¨æ„<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>æœ¬æ–‡æœ€åæ›´æ–°äº 2021-11-08ï¼Œæ–‡ä¸­å†…å®¹å¯èƒ½å·²è¿‡æ—¶ã€‚</div></div></div><h2 id=ä¸€åŸºç¡€çŸ¥è¯†>ä¸€ã€åŸºç¡€çŸ¥è¯†</h2><h3 id=1-å‡½æ•°å¼ç¼–ç¨‹>1. å‡½æ•°å¼ç¼–ç¨‹</h3><ul><li><strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ä¸­çš„<strong>å‡½æ•°</strong>çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚</li><li>å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€<ul><li>ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°</li><li>ä¸è¿›è¡ŒI/O</li><li>ä¸æŠ›å‡ºå¼‚å¸¸</li><li>é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°</li></ul></li><li>ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</li><li>è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚</li><li>è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹</li><li>Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚</li></ul><h3 id=2-lambdaè¡¨è¾¾å¼è¡Œä¸ºå‚æ•°åŒ–çµæ´»ç®€æ´>â˜…2. lambdaè¡¨è¾¾å¼ï¼šè¡Œä¸ºå‚æ•°åŒ–ï¼ˆçµæ´»ã€ç®€æ´ï¼‰</h3><ul><li>å‡½æ•°å¼æ¥å£ï¼ˆç”¨@FunctionalInterfaceæ ‡è®°ï¼‰ä¸åŒ¿åå†…éƒ¨ç±»ï¼š</li></ul><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li><p>å‡½æ•°å¼æ¥å£ï¼ˆåŠ å‰ç¼€ï¼šIntã€Doubleã€Longï¼‰</p><ul><li>Predicateï¼š T -> boolean ï¼ˆè°“è¯ï¼‰</li><li>Consumerï¼š T -> void</li><li>Functionï¼š T,R -> R</li><li>Supplierï¼š() -> R</li></ul></li><li><p>èŒƒå‹Tåªèƒ½ç»‘å®šåˆ°å¼•ç”¨ç±»å‹</p></li><li><p>é—­åŒ…ï¼šé—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œä¸”å®ƒå¯ä»¥æ— é™åˆ¶åœ°è®¿é—®é‚£ä¸ªå‡½æ•°çš„éæœ¬åœ°å˜é‡ã€‚ç°åœ¨ï¼ŒJava 8çš„Lambdaå’ŒåŒ¿åç±»å¯ä»¥åšç±»ä¼¼äºé—­åŒ…çš„äº‹æƒ…ï¼šå®ƒä»¬å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ã€‚ä½†æœ‰ä¸€ä¸ªé™åˆ¶ï¼šå®ƒä»¬ä¸èƒ½ä¿®æ”¹å®šä¹‰Lambdaçš„æ–¹æ³•çš„å±€éƒ¨å˜é‡çš„å†…å®¹ã€‚è¿™äº›å˜é‡å¿…é¡»æ˜¯éšå¼æœ€ç»ˆçš„ã€‚å¯ä»¥è®¤ä¸ºLambdaæ˜¯å¯¹å€¼å°é—­ï¼Œè€Œä¸æ˜¯å¯¹å˜é‡å°é—­ã€‚</p></li><li><p>æ–¹æ³•å¼•ç”¨ï¼šæ ¹æ®å·²æœ‰çš„æ–¹æ³•å®ç°æ¥åˆ›å»ºLambdaè¡¨è¾¾å¼</p><ul><li>æŒ‡å‘é™æ€æ–¹æ³•</li><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li><li>æŒ‡å‘ä»»æ„ç±»å‹å®ä¾‹æ–¹æ³•</li><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li><li>æŒ‡å‘ç°æœ‰å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</li><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li></ul></li><li><p>æ„é€ å‡½æ•°å¼•ç”¨ï¼šClassName :: new</p></li><li><p>æ¯”è¾ƒå™¨é“¾ï¼š</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p></li></ul><h2 id=äºŒå‡½æ•°å¼æ•°æ®å¤„ç†>äºŒã€å‡½æ•°å¼æ•°æ®å¤„ç†</h2><h3 id=1-æµ>â˜…1. æµ</h3><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li>ä¸­é—´æ“ä½œï¼šè¿”å›streamç±»å‹<ul><li>filterï¼šæ’é™¤å…ƒç´ ï¼ŒPredicateï¼ŒT -> boolean</li><li>mapï¼šæå–ä¿¡æ¯ï¼ŒFunction&lt;T,R>, T -> R</li><li>limitï¼šæˆªæ–­æµï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li><li>skipï¼šä¸limitäº’è¡¥ï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li><li>sortedï¼šæ’åºï¼ŒComparator, (T,T) -> intï¼ˆæœ‰çŠ¶æ€-æ— ç•Œï¼‰</li><li>distinctï¼šå»é‡ï¼ˆæœ‰çŠ¶æ€-æ— ç•Œï¼‰</li><li>flatMapï¼šè®©ä½ æŠŠä¸€ä¸ªæµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰çš„æµè¿æ¥èµ·æ¥æˆä¸ºä¸€ä¸ªæµ</li></ul></li><li>ç»ˆç«¯æ“ä½œï¼šè¿”å›éstreamç±»å‹<ul><li>collectï¼šè½¬æ¢æˆå…¶ä»–æ ¼å¼ï¼ˆè¿”å›é›†åˆï¼‰</li><li>countï¼šè®¡æ•°ï¼ˆè¿”å›longï¼‰</li><li>forEachï¼šéå†ï¼ˆè¿”å›voidï¼‰</li><li>ï¼ˆä»¥ä¸‹éƒ½æ˜¯çŸ­è·¯æ±‚å€¼ï¼‰</li><li>anyMatchï¼šè‡³å°‘åŒ¹é…ä¸€ä¸ªï¼ˆè¿”å›booleanï¼‰</li><li>allMatchï¼šéƒ½åŒ¹é…ï¼ˆè¿”å›booleanï¼‰</li><li>noneMatchï¼šéƒ½ä¸åŒ¹é…ï¼ˆè¿”å›booleanï¼‰</li><li>findAnyï¼šæ‰¾åˆ°ä»»æ„ï¼ˆè¿”å›Optionalç±»ï¼‰</li><li>findFirstï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªï¼Œåœ¨å¹¶è¡Œä¸Šé™åˆ¶æ›´å¤šï¼Œå¦‚æœä¸å…³å¿ƒè¿”å›çš„å…ƒç´ æ˜¯å“ªä¸ªï¼Œè¯·ä½¿ç”¨findAnyã€‚ï¼ˆè¿”å›Optionalç±»ï¼‰</li><li>reduceï¼š BinaryOperator ï¼Œ(T, T) -> T ï¼ˆè¿”å›Optionalç±»ï¼‰ï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li></ul></li><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li><li>æµåªèƒ½æ¶ˆè´¹ä¸€æ¬¡ã€‚</li></ul><h4 id=1-1-åŸå§‹ç±»å‹æµç‰¹åŒ–>1-1. åŸå§‹ç±»å‹æµç‰¹åŒ–</h4><p>Java 8å¼•å…¥äº†ä¸‰ä¸ªåŸå§‹ç±»å‹ç‰¹åŒ–æµæ¥å£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šIntStreamã€DoubleStreamå’ŒLongStreamï¼Œåˆ†åˆ«å°†æµä¸­çš„å…ƒç´ ç‰¹åŒ–ä¸ºintã€longå’Œdoubleï¼Œä»è€Œé¿å…äº†æš—å«çš„è£…ç®±æˆæœ¬ã€‚è¦è®°ä½çš„æ˜¯ï¼Œè¿™äº›ç‰¹åŒ–çš„åŸå› å¹¶ä¸åœ¨äºæµçš„å¤æ‚æ€§ï¼Œè€Œæ˜¯è£…ç®±é€ æˆçš„å¤æ‚æ€§â€”â€”å³ç±»ä¼¼intå’ŒIntegerä¹‹é—´çš„æ•ˆç‡å·®å¼‚ã€‚</p><h4 id=1-2-æ˜ å°„åˆ°æ•°æ®æµ>1-2. æ˜ å°„åˆ°æ•°æ®æµ</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li>è½¬æ¢å›å¯¹è±¡æµ</li></ul><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//å°†Streamè½¬æ¢ä¸ºæ•°å€¼æµ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>IntStream</span> <span class=n>intStream</span> <span class=o>=</span> <span class=n>menu</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>mapToInt</span><span class=o>(</span><span class=n>Dish</span><span class=o>::</span><span class=n>getCalories</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=c1>//å°†æ•°å€¼æµè½¬æ¢ä¸ºStream
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>intStream</span><span class=o>.</span><span class=na>boxed</span><span class=o>();</span></span></span></code></pre></td></tr></table></div></div><ul><li>æ•°å€¼èŒƒå›´</li></ul><p>rangeæ˜¯ä¸åŒ…å«ç»“æŸå€¼çš„ï¼Œè€ŒrangeClosedåˆ™åŒ…å«ç»“æŸå€¼ã€‚</p><ul><li>ç”Ÿæˆå‹¾è‚¡æ•°</li></ul><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>[]&gt;</span> <span class=n>pythagoreanTriples</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>	 <span class=n>IntStream</span><span class=o>.</span><span class=na>rangeClosed</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>100</span><span class=o>).</span><span class=na>boxed</span><span class=o>()</span> 
</span></span><span class=line><span class=cl>		 <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>a</span> <span class=o>-&gt;</span> 
</span></span><span class=line><span class=cl>			 <span class=n>IntStream</span><span class=o>.</span><span class=na>rangeClosed</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>100</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> 				<span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>b</span> <span class=o>-&gt;</span> <span class=n>Math</span><span class=o>.</span><span class=na>sqrt</span><span class=o>(</span><span class=n>a</span><span class=o>*</span><span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=o>*</span><span class=n>b</span><span class=o>)</span> <span class=o>%</span> <span class=n>1</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> 				<span class=o>.</span><span class=na>mapToObj</span><span class=o>(</span><span class=n>b</span> <span class=o>-&gt;</span> 
</span></span><span class=line><span class=cl>					 <span class=k>new</span> <span class=kt>int</span><span class=o>[]{</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>,</span> <span class=o>(</span><span class=kt>int</span><span class=o>)</span><span class=n>Math</span><span class=o>.</span><span class=na>sqrt</span><span class=o>(</span><span class=n>a</span> <span class=o>*</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>*</span> <span class=n>b</span><span class=o>)})</span> 
</span></span><span class=line><span class=cl>			 <span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=kt>double</span><span class=o>[]&gt;</span> <span class=n>pythagoreanTriples2</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> 	<span class=n>IntStream</span><span class=o>.</span><span class=na>rangeClosed</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>100</span><span class=o>).</span><span class=na>boxed</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> 		<span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>a</span> <span class=o>-&gt;</span> 
</span></span><span class=line><span class=cl>			 <span class=n>IntStream</span><span class=o>.</span><span class=na>rangeClosed</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=n>100</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> 				<span class=o>.</span><span class=na>mapToObj</span><span class=o>(</span> 
</span></span><span class=line><span class=cl> 					<span class=n>b</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=kt>double</span><span class=o>[]{</span><span class=n>a</span><span class=o>,</span> <span class=n>b</span><span class=o>,</span> <span class=n>Math</span><span class=o>.</span><span class=na>sqrt</span><span class=o>(</span><span class=n>a</span><span class=o>*</span><span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=o>*</span><span class=n>b</span><span class=o>)})</span> 
</span></span><span class=line><span class=cl>				 <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>t</span> <span class=o>-&gt;</span> <span class=n>t</span><span class=o>[</span><span class=n>2</span><span class=o>]</span> <span class=o>%</span> <span class=n>1</span> <span class=o>==</span> <span class=n>0</span><span class=o>));</span></span></span></code></pre></td></tr></table></div></div><h4 id=1-3-æ— é™æµæ–æ³¢é‚£å¥‘æ•°åˆ—>1-3. æ— é™æµ(æ–æ³¢é‚£å¥‘æ•°åˆ—)</h4><ul><li>iterateï¼šä½¿ç”¨iterateçš„æ–¹æ³•åˆ™æ˜¯çº¯ç²¹ä¸å˜çš„ï¼šå®ƒæ²¡æœ‰ä¿®æ”¹ç°æœ‰çŠ¶æ€ï¼Œä½†åœ¨æ¯æ¬¡è¿­ä»£æ—¶ä¼šåˆ›å»ºæ–°çš„å…ƒç»„</li></ul><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Stream</span><span class=o>.</span><span class=na>iterate</span><span class=o>(</span><span class=k>new</span> <span class=kt>int</span><span class=o>[]{</span><span class=n>0</span><span class=o>,</span> <span class=n>1</span><span class=o>},</span> 
</span></span><span class=line><span class=cl> 	<span class=n>t</span> <span class=o>-&gt;</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[]{</span><span class=n>t</span><span class=o>[</span><span class=n>1</span><span class=o>],</span><span class=n>t</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>+</span> <span class=n>t</span><span class=o>[</span><span class=n>1</span><span class=o>]})</span> 
</span></span><span class=line><span class=cl>		 <span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=n>10</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> 		<span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>t</span> <span class=o>-&gt;</span> <span class=n>t</span><span class=o>[</span><span class=n>0</span><span class=o>])</span> 
</span></span><span class=line><span class=cl> 		<span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=c1>//è¿™æ®µä»£ç å°†ç”Ÿæˆæ–æ³¢çº³å¥‘æ•°åˆ—ï¼š0, 1, 1, 2, 3, 5, 8, 13, 21, 34â€¦
</span></span></span></code></pre></td></tr></table></div></div><ul><li>generateï¼šgetAsInt()åœ¨è°ƒç”¨æ—¶ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œç”±æ­¤åœ¨æ¯æ¬¡è°ƒç”¨æ—¶äº§ç”Ÿæ–°çš„å€¼</li></ul><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>IntSupplier</span> <span class=n>fib</span> <span class=o>=</span> <span class=k>new</span> <span class=n>IntSupplier</span><span class=o>(){</span> 
</span></span><span class=line><span class=cl> 	<span class=kd>private</span> <span class=kt>int</span> <span class=n>previous</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> 	<span class=kd>private</span> <span class=kt>int</span> <span class=n>current</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> 	<span class=kd>public</span> <span class=kt>int</span> <span class=nf>getAsInt</span><span class=o>(){</span> 
</span></span><span class=line><span class=cl>		 <span class=kt>int</span> <span class=n>oldPrevious</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>previous</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>		 <span class=kt>int</span> <span class=n>nextValue</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>previous</span> <span class=o>+</span> <span class=k>this</span><span class=o>.</span><span class=na>current</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> 		<span class=k>this</span><span class=o>.</span><span class=na>previous</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>current</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>		 <span class=k>this</span><span class=o>.</span><span class=na>current</span> <span class=o>=</span> <span class=n>nextValue</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> 		<span class=k>return</span> <span class=n>oldPrevious</span><span class=o>;</span> 
</span></span><span class=line><span class=cl>	 <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>};</span> 
</span></span><span class=line><span class=cl><span class=n>IntStream</span><span class=o>.</span><span class=na>generate</span><span class=o>(</span><span class=n>fib</span><span class=o>).</span><span class=na>limit</span><span class=o>(</span><span class=n>10</span><span class=o>).</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=1-4-reduce>1-4. reduce</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=1-5-æ”¶é›†å™¨>1-5. æ”¶é›†å™¨</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h5 id=collectoræ¥å£>Collectoræ¥å£</h5><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//Tæ˜¯æµä¸­è¦æ”¶é›†çš„é¡¹ç›®çš„æ³›å‹ã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//Aæ˜¯ç´¯åŠ å™¨çš„ç±»å‹ï¼Œç´¯åŠ å™¨æ˜¯åœ¨æ”¶é›†è¿‡ç¨‹ä¸­ç”¨äºç´¯ç§¯éƒ¨åˆ†ç»“æœçš„å¯¹è±¡ã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//Ræ˜¯æ”¶é›†æ“ä½œå¾—åˆ°çš„å¯¹è±¡ï¼ˆé€šå¸¸ä½†å¹¶ä¸ä¸€å®šæ˜¯é›†åˆï¼‰çš„ç±»å‹ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Collector</span><span class=o>&lt;</span><span class=n>T</span><span class=o>,</span> <span class=n>A</span><span class=o>,</span> <span class=n>R</span><span class=o>&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>A</span><span class=o>&gt;</span> <span class=nf>supplier</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=n>BiConsumer</span><span class=o>&lt;</span><span class=n>A</span><span class=o>,</span> <span class=n>T</span><span class=o>&gt;</span> <span class=nf>accumulator</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=n>Function</span><span class=o>&lt;</span><span class=n>A</span><span class=o>,</span> <span class=n>R</span><span class=o>&gt;</span> <span class=nf>finisher</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=n>BinaryOperator</span><span class=o>&lt;</span><span class=n>A</span><span class=o>&gt;</span> <span class=nf>combiner</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=n>Set</span><span class=o>&lt;</span><span class=n>Characteristics</span><span class=o>&gt;</span> <span class=nf>characteristics</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h5 id=è‡ªå·±å®ç°æ”¶é›†å™¨>è‡ªå·±å®ç°æ”¶é›†å™¨</h5><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><code>List&lt;Dish> dishes = menuStream.collect(new ToListCollector&lt;Dish>());</code></p><h3 id=2-ç”¨-optional-å–ä»£-null>â˜…2. ç”¨ Optional å–ä»£ null</h3><p><strong>nullçš„æ£€æŸ¥åªä¼šæ©ç›–é—®é¢˜ï¼Œå¹¶æœªçœŸæ­£åœ°ä¿®å¤é—®é¢˜</strong></p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//1. å£°æ˜ä¸€ä¸ªç©ºçš„Optional
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;</span> <span class=n>optCar</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>empty</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>//2. ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional
</span></span></span><span class=line><span class=cl><span class=c1>//å¦‚æœcaræ˜¯ä¸€ä¸ªnullï¼Œè¿™æ®µä»£ç ä¼šç«‹å³æŠ›å‡ºä¸€ä¸ªNullPointerException
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;</span> <span class=n>optCar</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>car</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>//3. å¯æ¥å—nullçš„Optional
</span></span></span><span class=line><span class=cl><span class=c1>//å¦‚æœcaræ˜¯nullï¼Œé‚£ä¹ˆå¾—åˆ°çš„Optionalå¯¹è±¡å°±æ˜¯ä¸ªç©ºå¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Car</span><span class=o>&gt;</span> <span class=n>optCar</span> <span class=o>=</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>car</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>getCarInsuranceName</span><span class=o>(</span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>Person</span><span class=o>&gt;</span> <span class=n>person</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>person</span><span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>Person</span><span class=o>::</span><span class=n>getCar</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>Car</span><span class=o>::</span><span class=n>getInsurance</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>Insurance</span><span class=o>::</span><span class=n>getName</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>orElse</span><span class=o>(</span><span class=s>&#34;Unknown&#34;</span><span class=o>);</span> <span class=c1>//å¦‚æœOptionalçš„ç»“æœå€¼ä¸ºç©ºï¼Œè®¾ç½®é»˜è®¤å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><p>Optional é€šè¿‡ç±»å‹ç³»ç»Ÿè®©ä½ çš„åŸŸæ¨¡å‹ä¸­éšè—çš„çŸ¥è¯†æ˜¾å¼åœ°ä½“ç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œä½ æ°¸è¿œéƒ½ä¸åº”è¯¥å¿˜è®°è¯­è¨€çš„é¦–è¦åŠŸèƒ½å°±æ˜¯æ²Ÿé€šï¼Œå³ä½¿å¯¹ç¨‹åºè®¾è®¡è¯­è¨€è€Œè¨€ä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚å£°æ˜æ–¹æ³•æ¥å—ä¸€ä¸ªOptionalå‚æ•°ï¼Œæˆ–è€…å°†ç»“æœä½œä¸ºOptionalç±»å‹è¿”å›ï¼Œè®©ä½ çš„åŒäº‹æˆ–è€…æœªæ¥ä½ æ–¹æ³•çš„ä½¿ç”¨è€…ï¼Œå¾ˆæ¸…æ¥šåœ°çŸ¥é“å®ƒå¯ä»¥æ¥å—ç©ºå€¼ï¼Œæˆ–è€…å®ƒå¯èƒ½è¿”å›ä¸€ä¸ªç©ºå€¼ã€‚</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=2-1-optional-çš„æ–¹æ³•>2-1. Optional çš„æ–¹æ³•</h4><ul><li>get()ï¼šå¦‚æœå˜é‡å­˜åœ¨ï¼Œå®ƒç›´æ¥è¿”å›å°è£…çš„å˜é‡å€¼ï¼Œå¦åˆ™å°±æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸</li><li>orElse(T other)ï¼šå…è®¸ä½ åœ¨Optionalå¯¹è±¡ä¸åŒ…å«å€¼æ—¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼</li><li>orElseGet(Supplier&lt;? extends T> other)ï¼šæ˜¯orElseæ–¹æ³•çš„å»¶è¿Ÿè°ƒç”¨ç‰ˆï¼ŒSupplier æ–¹æ³•åªæœ‰åœ¨Optionalå¯¹è±¡ä¸å«å€¼æ—¶æ‰æ‰§è¡Œè°ƒç”¨ã€‚å¦‚æœåˆ›å»ºé»˜è®¤å€¼æ˜¯ä»¶è€—æ—¶è´¹åŠ›çš„å·¥ä½œï¼Œä½ åº”è¯¥è€ƒè™‘é‡‡ç”¨è¿™ç§æ–¹å¼ï¼ˆå€Ÿæ­¤æå‡ç¨‹åºçš„æ€§èƒ½ï¼‰ï¼Œæˆ–è€…ä½ éœ€è¦éå¸¸ç¡®å®šæŸä¸ªæ–¹æ³•ä»…åœ¨Optionalä¸ºç©ºæ—¶æ‰è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘è¯¥æ–¹å¼ï¼ˆè¿™ç§æƒ…å†µæœ‰ä¸¥æ ¼çš„é™åˆ¶æ¡ä»¶ï¼‰ã€‚</li><li>orElseThrow(Supplier&lt;? extends X> exceptionSupplier)ï¼šè‡ªå®šä¹‰æŠ›å‡ºå¼‚å¸¸</li><li>ifPresent(Consumer&lt;? super T>)ï¼šèƒ½åœ¨å˜é‡å€¼å­˜åœ¨æ—¶æ‰§è¡Œä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ å…¥çš„æ–¹æ³•ï¼Œå¦åˆ™å°±ä¸è¿›è¡Œä»»ä½•æ“ä½œã€‚</li></ul><p>ä¸æ¨èä½¿ç”¨åŸºç¡€ç±»å‹çš„Optionalï¼Œå› ä¸ºåŸºç¡€ç±»å‹çš„Optionalä¸æ”¯æŒmapã€flatMapä»¥åŠfilteræ–¹æ³•ï¼Œè€Œè¿™äº›å´æ˜¯Optionalç±»æœ€æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><h4 id=2-2-å®æˆ˜æ¡ˆä¾‹>2-2. å®æˆ˜æ¡ˆä¾‹</h4><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ Optional å‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>int</span> <span class=nf>readDuration</span><span class=o>(</span><span class=n>Properties</span> <span class=n>props</span><span class=o>,</span> <span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>String</span> <span class=n>value</span> <span class=o>=</span> <span class=n>props</span><span class=o>.</span><span class=na>getProperty</span><span class=o>(</span><span class=n>name</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=o>(</span><span class=n>value</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>try</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>parseInt</span><span class=o>(</span><span class=n>value</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>i</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>NumberFormatException</span> <span class=n>nfe</span><span class=o>)</span> <span class=o>{</span> <span class=o>}</span>
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>0</span><span class=o>;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ Optional å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>int</span> <span class=nf>readDuration</span><span class=o>(</span><span class=n>Properties</span> <span class=n>props</span><span class=o>,</span> <span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>Optional</span><span class=o>.</span><span class=na>ofNullable</span><span class=o>(</span><span class=n>props</span><span class=o>.</span><span class=na>getProperty</span><span class=o>(</span><span class=n>name</span><span class=o>))</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>flatMap</span><span class=o>(</span><span class=n>OptionalUtility</span><span class=o>::</span><span class=n>stringToInt</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>i</span> <span class=o>-&gt;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>orElse</span><span class=o>(</span><span class=n>0</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=3-å†…éƒ¨è¿­ä»£>3. å†…éƒ¨è¿­ä»£</h3><ul><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li><li><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></li></ul><h2 id=ä¸‰é«˜æ•ˆ-java-8-ç¼–ç¨‹>ä¸‰ã€é«˜æ•ˆ Java 8 ç¼–ç¨‹</h2><h3 id=1-å„ç‰ˆæœ¬å˜åŒ–>1. å„ç‰ˆæœ¬å˜åŒ–</h3><ul><li>Java 5ï¼šå¼•å…¥ for-each å¾ªç¯ï¼Œæ›¿ä»£è¿­ä»£å™¨</li><li>Java 7ï¼šå¼•å…¥è±å½¢æ“ä½œç¬¦&lt;>ï¼Œä½¿ç”¨èŒƒå‹</li><li>Java 8ï¼šlambdaè¡¨è¾¾å¼ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œè®©è®¾è®¡æ¨¡å¼æ›´çµæ´»</li></ul><h3 id=2-è®¾è®¡æ¨¡å¼>ğŸŒŸ2. è®¾è®¡æ¨¡å¼</h3><h4 id=2-1-ç­–ç•¥æ¨¡å¼>2-1. ç­–ç•¥æ¨¡å¼</h4><p>åœºæ™¯ï¼šæ ¹æ®ä¸åŒæ¡ä»¶è¿›è¡Œç­›é€‰ã€‚</p><ul><li>æŸç®—æ³•çš„æ¥å£</li><li>æ¥å£çš„å¤šç§å®ç°</li><li>ç­–ç•¥å¯¹è±¡çš„å®¢æˆ·</li></ul><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>ValidationStrategy</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>boolean</span> <span class=nf>execute</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>IsAllLowerCase</span> <span class=kd>implements</span> <span class=n>ValidationStrategy</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>execute</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>s</span><span class=o>.</span><span class=na>matches</span><span class=o>(</span><span class=s>&#34;[a-z]+&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>IsNumeric</span> <span class=kd>implements</span> <span class=n>ValidationStrategy</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>execute</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>s</span><span class=o>.</span><span class=na>matches</span><span class=o>(</span><span class=s>&#34;\\d+&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Validator</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>private</span> <span class=kd>final</span> <span class=n>ValidationStrategy</span> <span class=n>strategy</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=nf>Validator</span><span class=o>(</span><span class=n>ValidationStrategy</span> <span class=n>v</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>this</span><span class=o>.</span><span class=na>strategy</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>validate</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>strategy</span><span class=o>.</span><span class=na>execute</span><span class=o>(</span><span class=n>s</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=n>Validator</span> <span class=n>numericValidator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Validator</span><span class=o>(</span><span class=k>new</span> <span class=n>IsNumeric</span><span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b1</span> <span class=o>=</span> <span class=n>numericValidator</span><span class=o>.</span><span class=na>validate</span><span class=o>(</span><span class=s>&#34;aaaa&#34;</span><span class=o>);</span> <span class=c1>//FALSE
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Validator</span> <span class=n>lowerCaseValidator</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Validator</span><span class=o>(</span><span class=k>new</span> <span class=n>IsAllLowerCase</span> <span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b2</span> <span class=o>=</span> <span class=n>lowerCaseValidator</span><span class=o>.</span><span class=na>validate</span><span class=o>(</span><span class=s>&#34;bbbb&#34;</span><span class=o>);</span> <span class=c1>//TRUE
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Validator</span> <span class=n>numericValidator</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>Validator</span><span class=o>((</span><span class=n>String</span> <span class=n>s</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>s</span><span class=o>.</span><span class=na>matches</span><span class=o>(</span><span class=s>&#34;[a-z]+&#34;</span><span class=o>));</span> 
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b1</span> <span class=o>=</span> <span class=n>numericValidator</span><span class=o>.</span><span class=na>validate</span><span class=o>(</span><span class=s>&#34;aaaa&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>Validator</span> <span class=n>lowerCaseValidator</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>Validator</span><span class=o>((</span><span class=n>String</span> <span class=n>s</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>s</span><span class=o>.</span><span class=na>matches</span><span class=o>(</span><span class=s>&#34;\\d+&#34;</span><span class=o>));</span> 
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=n>b2</span> <span class=o>=</span> <span class=n>lowerCaseValidator</span><span class=o>.</span><span class=na>validate</span><span class=o>(</span><span class=s>&#34;bbbb&#34;</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=2-2-æ¨¡æ¿æ–¹æ³•>2-2. æ¨¡æ¿æ–¹æ³•</h4><p>åœºæ™¯ï¼šéœ€è¦é‡‡ç”¨æŸä¸ªç®—æ³•çš„æ¡†æ¶ï¼ŒåŒæ—¶åˆå¸Œæœ›æœ‰ä¸€å®šçš„çµæ´»åº¦ï¼Œèƒ½å¯¹å®ƒçš„æŸäº›éƒ¨åˆ†è¿›è¡Œæ”¹è¿›ã€‚</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>OnlineBanking</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>processCustomer</span><span class=o>(</span><span class=kt>int</span> <span class=n>id</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=n>Customer</span> <span class=n>c</span> <span class=o>=</span> <span class=n>Database</span><span class=o>.</span><span class=na>getCustomerWithId</span><span class=o>(</span><span class=n>id</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=n>makeCustomerHappy</span><span class=o>(</span><span class=n>c</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>makeCustomerHappy</span><span class=o>(</span><span class=n>Customer</span> <span class=n>c</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>processCustomer</span><span class=o>(</span><span class=kt>int</span> <span class=n>id</span><span class=o>,</span> <span class=n>Consumer</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=n>makeCustomerHappy</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=n>Customer</span> <span class=n>c</span> <span class=o>=</span> <span class=n>Database</span><span class=o>.</span><span class=na>getCustomerWithId</span><span class=o>(</span><span class=n>id</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=n>makeCustomerHappy</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>c</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kt>void</span> <span class=nf>processCustomer</span><span class=o>(</span><span class=kt>int</span> <span class=n>id</span><span class=o>,</span> <span class=n>Consumer</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=n>makeCustomerHappy</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=n>Customer</span> <span class=n>c</span> <span class=o>=</span> <span class=n>Database</span><span class=o>.</span><span class=na>getCustomerWithId</span><span class=o>(</span><span class=n>id</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=n>makeCustomerHappy</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>c</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=n>OnlineBankingLambda</span><span class=o>().</span><span class=na>processCustomer</span><span class=o>(</span><span class=n>1337</span><span class=o>,</span> <span class=o>(</span><span class=n>Customer</span> <span class=n>c</span><span class=o>)</span> <span class=o>-&gt;</span> 
</span></span><span class=line><span class=cl> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Hello &#34;</span> <span class=o>+</span> <span class=n>c</span><span class=o>.</span><span class=na>getName</span><span class=o>());</span></span></span></code></pre></td></tr></table></div></div><h4 id=2-3-è§‚å¯Ÿè€…æ¨¡å¼>2-3. è§‚å¯Ÿè€…æ¨¡å¼</h4><p>åœºæ™¯ï¼šæŸäº›äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚çŠ¶æ€è½¬å˜ï¼‰ï¼Œsubjectéœ€è¦è‡ªåŠ¨åœ°é€šçŸ¥å…¶ä»–observerã€‚</p><ul><li>subjectï¼šä¸»é¢˜</li><li>observerï¼šè§‚å¯Ÿè€…</li></ul><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>Observer</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>NYTimes</span> <span class=kd>implements</span> <span class=n>Observer</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>tweet</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tweet</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;money&#34;</span><span class=o>)){</span> 
</span></span><span class=line><span class=cl> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Breaking news in NY! &#34;</span> <span class=o>+</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Guardian</span> <span class=kd>implements</span> <span class=n>Observer</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>tweet</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tweet</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;queen&#34;</span><span class=o>)){</span> 
</span></span><span class=line><span class=cl> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Yet another news in London... &#34;</span> <span class=o>+</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Subject</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>o</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Feed</span> <span class=kd>implements</span> <span class=n>Subject</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>private</span> <span class=kd>final</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Observer</span><span class=o>&gt;</span> <span class=n>observers</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>this</span><span class=o>.</span><span class=na>observers</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>o</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>observers</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>o</span> <span class=o>-&gt;</span> <span class=n>o</span><span class=o>.</span><span class=na>notify</span><span class=o>(</span><span class=n>tweet</span><span class=o>));</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>Feed</span> <span class=n>f</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Feed</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>(</span><span class=k>new</span> <span class=n>NYTimes</span><span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>(</span><span class=k>new</span> <span class=n>Guardian</span><span class=o>());</span> <span class=c1>//observe â†“â†“â†“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>f</span><span class=o>.</span><span class=na>notifyObservers</span><span class=o>(</span><span class=s>&#34;The queen said her favourite book is Java 8 in Action!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>//è¾“å‡ºï¼š
</span></span></span><span class=line><span class=cl><span class=c1>//Yet another news in London...  
</span></span></span><span class=line><span class=cl><span class=c1>//The queen said her favourite book is Java 8 in Action!
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1>// ç®€åŒ–äº†è§‚å¯Ÿè€…çš„ä»£ç 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>interface</span> <span class=nc>Subject</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>o</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Feed</span> <span class=kd>implements</span> <span class=n>Subject</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>private</span> <span class=kd>final</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Observer</span><span class=o>&gt;</span> <span class=n>observers</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>registerObserver</span><span class=o>(</span><span class=n>Observer</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>this</span><span class=o>.</span><span class=na>observers</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>o</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notifyObservers</span><span class=o>(</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>observers</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>o</span> <span class=o>-&gt;</span> <span class=n>o</span><span class=o>.</span><span class=na>notify</span><span class=o>(</span><span class=n>tweet</span><span class=o>));</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>Feed</span> <span class=n>f</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Feed</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>((</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>tweet</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tweet</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;money&#34;</span><span class=o>)){</span> 
</span></span><span class=line><span class=cl> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Breaking news in NY! &#34;</span> <span class=o>+</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>});</span> 
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=na>registerObserver</span><span class=o>((</span><span class=n>String</span> <span class=n>tweet</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>tweet</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>tweet</span><span class=o>.</span><span class=na>contains</span><span class=o>(</span><span class=s>&#34;queen&#34;</span><span class=o>)){</span> 
</span></span><span class=line><span class=cl> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Yet another news in London... &#34;</span> <span class=o>+</span> <span class=n>tweet</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=o>.</span><span class=na>notifyObservers</span><span class=o>(</span><span class=s>&#34;The queen said her favourite book is Java 8 in Action!&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>//è¾“å‡ºï¼š
</span></span></span><span class=line><span class=cl><span class=c1>//Yet another news in London...  
</span></span></span><span class=line><span class=cl><span class=c1>//The queen said her favourite book is Java 8 in Action!
</span></span></span></code></pre></td></tr></table></div></div><h4 id=2-4-è´£ä»»é“¾æ¨¡å¼>2-4. è´£ä»»é“¾æ¨¡å¼</h4><p>åœºæ™¯ï¼šåˆ›å»ºå¤„ç†å¯¹è±¡åºåˆ—ï¼ˆæ¯”å¦‚æ“ä½œåºåˆ—ï¼‰</p><ul><li>å®šä¹‰ä¸€ä¸ªä»£è¡¨å¤„ç†å¯¹è±¡çš„æŠ½è±¡ç±»</li></ul><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>ProcessingObject</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>protected</span> <span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>successor</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setSuccessor</span><span class=o>(</span><span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>successor</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>this</span><span class=o>.</span><span class=na>successor</span> <span class=o>=</span> <span class=n>successor</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=n>T</span> <span class=nf>handle</span><span class=o>(</span><span class=n>T</span> <span class=n>input</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=n>T</span> <span class=n>r</span> <span class=o>=</span> <span class=n>handleWork</span><span class=o>(</span><span class=n>input</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>successor</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>successor</span><span class=o>.</span><span class=na>handle</span><span class=o>(</span><span class=n>r</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>r</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=kd>abstract</span> <span class=kd>protected</span> <span class=n>T</span> <span class=nf>handleWork</span><span class=o>(</span><span class=n>T</span> <span class=n>input</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>HeaderTextProcessing</span> <span class=kd>extends</span> <span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=n>String</span> <span class=nf>handleWork</span><span class=o>(</span><span class=n>String</span> <span class=n>text</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=s>&#34;From Raoul, Mario and Alan: &#34;</span> <span class=o>+</span> <span class=n>text</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>SpellCheckerProcessing</span> <span class=kd>extends</span> <span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=n>String</span> <span class=nf>handleWork</span><span class=o>(</span><span class=n>String</span> <span class=n>text</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>text</span><span class=o>.</span><span class=na>replaceAll</span><span class=o>(</span><span class=s>&#34;labda&#34;</span><span class=o>,</span> <span class=s>&#34;lambda&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>p1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HeaderTextProcessing</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>ProcessingObject</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>p2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SpellCheckerProcessing</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>p1</span><span class=o>.</span><span class=na>setSuccessor</span><span class=o>(</span><span class=n>p2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>result</span> <span class=o>=</span> <span class=n>p1</span><span class=o>.</span><span class=na>handle</span><span class=o>(</span><span class=s>&#34;Aren&#39;t labdas really sexy?!!&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>result</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>UnaryOperator</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>headerProcessing</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=o>(</span><span class=n>String</span> <span class=n>text</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=s>&#34;From Raoul, Mario and Alan: &#34;</span> <span class=o>+</span> <span class=n>text</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>UnaryOperator</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>spellCheckerProcessing</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=o>(</span><span class=n>String</span> <span class=n>text</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>text</span><span class=o>.</span><span class=na>replaceAll</span><span class=o>(</span><span class=s>&#34;labda&#34;</span><span class=o>,</span> <span class=s>&#34;lambda&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>pipeline</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=n>headerProcessing</span><span class=o>.</span><span class=na>andThen</span><span class=o>(</span><span class=n>spellCheckerProcessing</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>result</span> <span class=o>=</span> <span class=n>pipeline</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=s>&#34;Aren&#39;t labdas really sexy?!!&#34;</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=2-5-å·¥å‚æ¨¡å¼>2-5. å·¥å‚æ¨¡å¼</h4><p>åœºæ™¯ï¼šæ— éœ€å‘å®¢æˆ·æš´éœ²å®ä¾‹åŒ–çš„é€»è¾‘å°±èƒ½å®Œæˆå¯¹è±¡çš„åˆ›å»º</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ProductFactory</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kd>static</span> <span class=n>Product</span> <span class=nf>createProduct</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>switch</span><span class=o>(</span><span class=n>name</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>case</span> <span class=s>&#34;loan&#34;</span><span class=o>:</span> <span class=k>return</span> <span class=k>new</span> <span class=n>Loan</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=k>case</span> <span class=s>&#34;stock&#34;</span><span class=o>:</span> <span class=k>return</span> <span class=k>new</span> <span class=n>Stock</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=k>case</span> <span class=s>&#34;bond&#34;</span><span class=o>:</span> <span class=k>return</span> <span class=k>new</span> <span class=n>Bond</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=k>default</span><span class=o>:</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>RuntimeException</span><span class=o>(</span><span class=s>&#34;No such product &#34;</span> <span class=o>+</span> <span class=n>name</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>Product</span> <span class=n>p</span> <span class=o>=</span> <span class=n>ProductFactory</span><span class=o>.</span><span class=na>createProduct</span><span class=o>(</span><span class=s>&#34;loan&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>loanSupplier</span> <span class=o>=</span> <span class=n>Loan</span><span class=o>::</span><span class=k>new</span><span class=o>;</span> 
</span></span><span class=line><span class=cl><span class=n>Loan</span> <span class=n>loan</span> <span class=o>=</span> <span class=n>loanSupplier</span><span class=o>.</span><span class=na>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=kd>final</span> <span class=kd>static</span> <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span> 
</span></span><span class=line><span class=cl><span class=kd>static</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;loan&#34;</span><span class=o>,</span> <span class=n>Loan</span><span class=o>::</span><span class=k>new</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;stock&#34;</span><span class=o>,</span> <span class=n>Stock</span><span class=o>::</span><span class=k>new</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=s>&#34;bond&#34;</span><span class=o>,</span> <span class=n>Bond</span><span class=o>::</span><span class=k>new</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>Product</span> <span class=nf>createProduct</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>Product</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span> <span class=n>map</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>name</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span><span class=o>(</span><span class=n>p</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=k>return</span> <span class=n>p</span><span class=o>.</span><span class=na>get</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalArgumentException</span><span class=o>(</span><span class=s>&#34;No such product &#34;</span> <span class=o>+</span> <span class=n>name</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=3-peekæŸ¥çœ‹ä¸­é—´å€¼>3. peekæŸ¥çœ‹ä¸­é—´å€¼</h3><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>numbers</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>4</span><span class=o>,</span> <span class=n>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>result</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=n>numbers</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;from stream: &#34;</span> <span class=o>+</span> <span class=n>x</span><span class=o>))</span>
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=o>+</span> <span class=n>17</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;after map: &#34;</span> <span class=o>+</span> <span class=n>x</span><span class=o>))</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>filter</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=o>%</span> <span class=n>2</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;after filter: &#34;</span> <span class=o>+</span> <span class=n>x</span><span class=o>))</span>
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=n>3</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>peek</span><span class=o>(</span><span class=n>x</span> <span class=o>-&gt;</span> <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;after limit: &#34;</span> <span class=o>+</span> <span class=n>x</span><span class=o>))</span>
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>è¾“å‡ºï¼š
</span></span></span><span class=line><span class=cl><span class=cm>from stream: 2 
</span></span></span><span class=line><span class=cl><span class=cm>after map: 19 
</span></span></span><span class=line><span class=cl><span class=cm>from stream: 3 
</span></span></span><span class=line><span class=cl><span class=cm>after map: 20 
</span></span></span><span class=line><span class=cl><span class=cm>after filter: 20 
</span></span></span><span class=line><span class=cl><span class=cm>after limit: 20 
</span></span></span><span class=line><span class=cl><span class=cm>from stream: 4 
</span></span></span><span class=line><span class=cl><span class=cm>after map: 21 
</span></span></span><span class=line><span class=cl><span class=cm>from stream: 5 
</span></span></span><span class=line><span class=cl><span class=cm>after map: 22 
</span></span></span><span class=line><span class=cl><span class=cm>after filter: 22 
</span></span></span><span class=line><span class=cl><span class=cm>after limit: 22
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></td></tr></table></div></div><h3 id=4-æ¥å£çš„é»˜è®¤æ–¹æ³•>â˜…4. æ¥å£çš„é»˜è®¤æ–¹æ³•</h3><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Sized</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=kt>int</span> <span class=nf>size</span><span class=o>();</span> 
</span></span><span class=line><span class=cl> <span class=k>default</span> <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>()</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>size</span><span class=o>()</span> <span class=o>==</span> <span class=n>0</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h4 id=4-1-ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜>4-1. ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=4-2-ä¸‰æ¡è§„åˆ™>4-2. ä¸‰æ¡è§„åˆ™</h4><ol><li>é¦–å…ˆï¼Œç±»æˆ–çˆ¶ç±»ä¸­æ˜¾å¼å£°æ˜çš„æ–¹æ³•ï¼Œå…¶ä¼˜å…ˆçº§é«˜äºæ‰€æœ‰çš„é»˜è®¤æ–¹æ³•ã€‚</li><li>å¦‚æœç”¨ç¬¬ä¸€æ¡æ— æ³•åˆ¤æ–­ï¼Œæ–¹æ³•ç­¾ååˆæ²¡æœ‰åŒºåˆ«ï¼Œé‚£ä¹ˆé€‰æ‹©æä¾›æœ€å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•çš„æ¥å£ã€‚å‡½æ•°ç­¾åç›¸åŒæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©æ‹¥æœ‰æœ€å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•çš„æ¥å£ï¼Œå³å¦‚æœBç»§æ‰¿äº†Aï¼Œé‚£ä¹ˆBå°±æ¯”Aæ›´åŠ å…·ä½“ã€‚</li><li>æœ€åï¼Œå¦‚æœå†²çªä¾æ—§æ— æ³•è§£å†³ï¼Œç»§æ‰¿äº†å¤šä¸ªæ¥å£çš„ç±»å¿…é¡»é€šè¿‡æ˜¾å¼è¦†ç›–å’Œè°ƒç”¨æœŸæœ›çš„æ–¹æ³•ï¼Œæ˜¾å¼åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªé»˜è®¤æ–¹æ³•çš„å®ç°ã€‚</li></ol><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h3 id=5-ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹>5. ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</h3><h4 id=5-1-å¹¶å‘ä¸å¹¶è¡Œ>5-1. å¹¶å‘ä¸å¹¶è¡Œ</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=5-2-future---completablefuture>â˜…5-2. Future -> Â CompletableFuture</h4><p>Streamå’ŒCompletableFutureçš„è®¾è®¡éƒ½éµå¾ªäº†ç±»ä¼¼çš„æ¨¡å¼ï¼šå®ƒä»¬éƒ½ä½¿ç”¨äº†Lambdaè¡¨è¾¾å¼ä»¥åŠæµæ°´çº¿çš„æ€æƒ³ã€‚ä»è¿™ä¸ªè§’åº¦ï¼Œä½ å¯ä»¥è¯´ CompletableFutureå’ŒFutureçš„å…³ç³»å°±è·ŸStreamå’ŒCollectionçš„å…³ç³»ä¸€æ ·ã€‚</p><ul><li>Collectionä¸»è¦æ˜¯ä¸ºäº†å­˜å‚¨å’Œè®¿é—®æ•°æ®ï¼Œè€ŒStreamåˆ™ä¸»è¦ç”¨äºæè¿°å¯¹æ•°æ®çš„è®¡ç®—</li><li>é€šè¿‡Streamä½ å¯ä»¥å¯¹ä¸€ç³»åˆ—çš„æ“ä½œè¿›è¡Œæµæ°´çº¿ï¼Œé€šè¿‡mapã€filteræˆ–è€…å…¶ä»–ç±»ä¼¼çš„æ–¹æ³•æä¾›è¡Œä¸ºå‚æ•°åŒ–ï¼Œå®ƒå¯æœ‰æ•ˆé¿å…ä½¿ç”¨è¿­ä»£å™¨æ—¶æ€»æ˜¯å‡ºç°æ¨¡æ¿ä»£ç ã€‚</li><li>ç±»ä¼¼åœ°ï¼ŒCompletableFutureæä¾›äº†åƒthenComposeã€thenCombineã€allOfè¿™æ ·çš„æ“ä½œï¼Œå¯¹Futureæ¶‰åŠçš„é€šç”¨è®¾è®¡æ¨¡å¼æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œæœ‰åŠ©äºé¿å…ä½¿ç”¨å‘½ä»¤å¼ç¼–ç¨‹çš„æ¨¡æ¿ä»£ç ã€‚</li></ul><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h5 id=å®ä¾‹>å®ä¾‹</h5><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>List</span><span class=o>&lt;</span><span class=n>Shop</span><span class=o>&gt;</span> <span class=n>shops</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=k>new</span> <span class=n>Shop</span><span class=o>(</span><span class=s>&#34;BestPrice&#34;</span><span class=o>),</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>Shop</span><span class=o>(</span><span class=s>&#34;LetsSaveBig&#34;</span><span class=o>),</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>Shop</span><span class=o>(</span><span class=s>&#34;MyFavoriteShop&#34;</span><span class=o>),</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>Shop</span><span class=o>(</span><span class=s>&#34;BuyItAll&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=c1>// 1. é¡ºåºæŸ¥è¯¢ è€—æ—¶ 4032ms
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=nf>findPrices</span><span class=o>(</span><span class=n>String</span> <span class=n>product</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>shops</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>shop</span> <span class=o>-&gt;</span> <span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;%s price is %.2f&#34;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl> <span class=n>shop</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>)))</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 2. å¹¶è¡Œæµ è€—æ—¶ 1180ms
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=nf>findPrices</span><span class=o>(</span><span class=n>String</span> <span class=n>product</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>shops</span><span class=o>.</span><span class=na>parallelStream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>shop</span> <span class=o>-&gt;</span> <span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;%s price is %.2f&#34;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl> <span class=n>shop</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>)))</span>
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=c1>// 3. ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡ è€—æ—¶ 2005ms
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>List</span><span class=o>&lt;</span><span class=n>CompletableFuture</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;</span> <span class=n>priceFutures</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=n>shops</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>shop</span> <span class=o>-&gt;</span> <span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(</span> 
</span></span><span class=line><span class=cl> 	<span class=o>()</span> <span class=o>-&gt;</span> <span class=n>String</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=s>&#34;%s price is %.2f&#34;</span><span class=o>,</span> 
</span></span><span class=line><span class=cl> 	<span class=n>shop</span><span class=o>.</span><span class=na>getName</span><span class=o>(),</span> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>))))</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>priceFutures</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>CompletableFuture</span><span class=o>::</span><span class=n>join</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//å¤„ç†5ä¸ªå•†åº—ï¼Œé¡ºåºæ‰§è¡Œç‰ˆæœ¬è€—æ—¶5025msï¼Œå¹¶è¡Œæµç‰ˆæœ¬è€—æ—¶2177msï¼Œè€ŒCompletableFutureç‰ˆæœ¬è€—æ—¶2006ms
</span></span></span><span class=line><span class=cl><span class=c1>//å¤„ç†9ä¸ªå•†åº—ï¼Œå¹¶è¡Œæµç‰ˆæœ¬è€—æ—¶3143msï¼Œè€ŒCompletableFutureç‰ˆæœ¬è€—æ—¶3009ms
</span></span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„Streamæµæ°´çº¿ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†æµçš„æµæ°´çº¿ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ä¸¤ä¸ªmapæ“ä½œâ€”â€”è¿™å…¶å®æ˜¯æœ‰ç¼˜ç”±çš„ã€‚è€ƒè™‘æµæ“ä½œä¹‹é—´çš„å»¶è¿Ÿç‰¹æ€§ï¼Œå¦‚æœä½ åœ¨å•ä¸€æµæ°´çº¿ä¸­å¤„ç†æµï¼Œå‘å‘ä¸åŒå•†å®¶çš„è¯·æ±‚åªèƒ½ä»¥åŒæ­¥ã€é¡ºåºæ‰§è¡Œçš„æ–¹å¼æ‰ä¼šæˆåŠŸã€‚å› æ­¤ï¼Œæ¯ä¸ªåˆ›å»ºCompletableFutureå¯¹è±¡åªèƒ½åœ¨å‰ä¸€ä¸ªæ“ä½œç»“æŸä¹‹åæ‰§è¡ŒæŸ¥è¯¢æŒ‡å®šå•†å®¶çš„åŠ¨ä½œã€é€šçŸ¥joinæ–¹æ³•è¿”å›è®¡ç®—ç»“æœã€‚</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=5-3-ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨>5-3. ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨</h4><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>final</span> <span class=n>Executor</span> <span class=n>executor</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=n>Executors</span><span class=o>.</span><span class=na>newFixedThreadPool</span><span class=o>(</span><span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>shops</span><span class=o>.</span><span class=na>size</span><span class=o>(),</span> <span class=n>100</span><span class=o>),</span> 
</span></span><span class=line><span class=cl> <span class=k>new</span> <span class=n>ThreadFactory</span><span class=o>()</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> 	<span class=kd>public</span> <span class=n>Thread</span> <span class=nf>newThread</span><span class=o>(</span><span class=n>Runnable</span> <span class=n>r</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> 	<span class=n>Thread</span> <span class=n>t</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Thread</span><span class=o>(</span><span class=n>r</span><span class=o>);</span> 
</span></span><span class=line><span class=cl>     <span class=c1>//ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹â€”â€”è¿™ç§æ–¹å¼ä¸ä¼šé˜»æ­¢ç¨‹åºçš„å…³åœ
</span></span></span><span class=line><span class=cl><span class=c1></span>	 <span class=n>t</span><span class=o>.</span><span class=na>setDaemon</span><span class=o>(</span><span class=kc>true</span><span class=o>);</span> 
</span></span><span class=line><span class=cl>	 <span class=k>return</span> <span class=n>t</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span><span class=line><span class=cl><span class=c1>//æ”¹è¿›ä¹‹åï¼Œä½¿ç”¨CompletableFutureæ–¹æ¡ˆçš„ç¨‹åºå¤„ç†5ä¸ªå•†åº—ä»…è€—æ—¶1021msï¼Œå¤„ç†9ä¸ªå•†åº—æ—¶è€—æ—¶1022msã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=n>shop</span><span class=o>.</span><span class=na>getName</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34; price is &#34;</span> <span class=o>+</span> 
</span></span><span class=line><span class=cl> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>),</span> <span class=n>executor</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h5 id=å®ˆæŠ¤è¿›ç¨‹>å®ˆæŠ¤è¿›ç¨‹</h5><p>Javaç¨‹åºæ— æ³•ç»ˆæ­¢æˆ–è€…é€€å‡ºä¸€ä¸ªæ­£åœ¨è¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œæ‰€ä»¥æœ€åå‰©ä¸‹çš„é‚£ä¸ªçº¿ç¨‹ä¼šç”±äºä¸€ç›´ç­‰å¾…æ— æ³•å‘ç”Ÿçš„äº‹ä»¶è€Œå¼•å‘é—®é¢˜ã€‚ä¸æ­¤ç›¸åï¼Œå¦‚æœå°†çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ„å‘³ç€ç¨‹åºé€€å‡ºæ—¶å®ƒä¹Ÿä¼šè¢«å›æ”¶</p><h4 id=5-4-completablefuture-ä¸-parallelstream-çš„é€‰æ‹©>5-4. CompletableFuture ä¸ parallelStream çš„é€‰æ‹©</h4><ul><li>å¦‚æœä½ è¿›è¡Œçš„æ˜¯è®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰I/Oï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨Streamæ¥å£ï¼Œå› ä¸ºå®ç°ç®€å•ï¼ŒåŒæ—¶æ•ˆç‡ä¹Ÿå¯èƒ½æ˜¯æœ€é«˜çš„ï¼ˆå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦åˆ›å»ºæ¯”å¤„ç†å™¨æ ¸æ•°æ›´å¤šçš„çº¿ç¨‹ï¼‰ã€‚</li><li>åä¹‹ï¼Œå¦‚æœä½ å¹¶è¡Œçš„å·¥ä½œå•å…ƒè¿˜æ¶‰åŠç­‰å¾…I/Oçš„æ“ä½œï¼ˆåŒ…æ‹¬ç½‘ç»œè¿æ¥ç­‰å¾…ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨CompletableFutureçµæ´»æ€§æ›´å¥½ï¼Œä½ å¯ä»¥åƒå‰æ–‡è®¨è®ºçš„é‚£æ ·ï¼Œä¾æ®ç­‰å¾…/è®¡ç®—ï¼Œæˆ–è€…W/Cçš„æ¯”ç‡è®¾å®šéœ€è¦ä½¿ç”¨çš„çº¿ç¨‹æ•°ã€‚è¿™ç§æƒ…å†µä¸ä½¿ç”¨å¹¶è¡Œæµçš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå¤„ç†æµçš„æµæ°´çº¿ä¸­å¦‚æœå‘ç”ŸI/Oç­‰å¾…ï¼Œæµçš„å»¶è¿Ÿç‰¹æ€§ä¼šè®©æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­åˆ°åº•ä»€ä¹ˆæ—¶å€™è§¦å‘äº†ç­‰å¾…ã€‚</li></ul><h4 id=5-5-join-ä¸-get-æ–¹æ³•æ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ>5-5. join ä¸ get æ–¹æ³•ï¼Œæ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ</h4><p>CompletableFutureç±»ä¸­çš„joinæ–¹æ³•å’ŒFutureæ¥å£ä¸­çš„getæœ‰ç›¸åŒçš„å«ä¹‰ï¼Œå¹¶ä¸”ä¹Ÿå£°æ˜åœ¨Futureæ¥å£ä¸­ï¼Œå®ƒä»¬å”¯ä¸€çš„ä¸åŒæ˜¯joinä¸ä¼šæŠ›å‡ºä»»ä½•æ£€æµ‹åˆ°çš„å¼‚å¸¸ã€‚</p><h5 id=futurethencompose>future.thenCompose</h5><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=nf>findPrices</span><span class=o>(</span><span class=n>String</span> <span class=n>product</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>List</span><span class=o>&lt;</span><span class=n>CompletableFuture</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;&gt;</span> <span class=n>priceFutures</span> <span class=o>=</span>
</span></span><span class=line><span class=cl> <span class=n>shops</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span> 
</span></span><span class=line><span class=cl>     <span class=c1>//1. è·å–ä»·æ ¼
</span></span></span><span class=line><span class=cl><span class=c1></span>	 <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>shop</span> <span class=o>-&gt;</span> <span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(</span> 
</span></span><span class=line><span class=cl>		 <span class=o>()</span> <span class=o>-&gt;</span> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>),</span> <span class=n>executor</span><span class=o>))</span> 
</span></span><span class=line><span class=cl>     <span class=c1>//2. è§£ææŠ¥ä»·
</span></span></span><span class=line><span class=cl><span class=c1></span>	 <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>future</span> <span class=o>-&gt;</span> <span class=n>future</span><span class=o>.</span><span class=na>thenApply</span><span class=o>(</span><span class=n>Quote</span><span class=o>::</span><span class=n>parse</span><span class=o>))</span> 
</span></span><span class=line><span class=cl>     <span class=c1>//3. ä¸ºè®¡ç®—æŠ˜æ‰£ä»·æ ¼æ„é€ Future
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=c1>//å¦‚æœä¸å¸Œæœ›ç­‰åˆ°ç¬¬ä¸€ä¸ªä»»åŠ¡å®Œå…¨ç»“æŸæ‰å¼€å§‹ç¬¬äºŒé¡¹ä»»åŠ¡ï¼Œä½¿ç”¨thenCombineæ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>	 <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>future</span> <span class=o>-&gt;</span> <span class=n>future</span><span class=o>.</span><span class=na>thenCompose</span><span class=o>(</span><span class=n>quote</span> <span class=o>-&gt;</span> 
</span></span><span class=line><span class=cl>		 <span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(</span> 
</span></span><span class=line><span class=cl> 			<span class=o>()</span> <span class=o>-&gt;</span> <span class=n>Discount</span><span class=o>.</span><span class=na>applyDiscount</span><span class=o>(</span><span class=n>quote</span><span class=o>),</span> <span class=n>executor</span><span class=o>)))</span> 
</span></span><span class=line><span class=cl>	 <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>priceFutures</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>     <span class=o>.</span><span class=na>map</span><span class=o>(</span><span class=n>CompletableFuture</span><span class=o>::</span><span class=n>join</span><span class=o>)</span>
</span></span><span class=line><span class=cl>     <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>toList</span><span class=o>());</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//thenComposeæ–¹æ³•åƒCompletableFutureç±»ä¸­çš„å…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªä»¥Asyncåç¼€ç»“å°¾çš„ç‰ˆæœ¬thenComposeAsyncã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//é€šå¸¸è€Œè¨€ï¼Œåç§°ä¸­ä¸å¸¦Asyncçš„æ–¹æ³•å’Œå®ƒçš„å‰ä¸€ä¸ªä»»åŠ¡ä¸€æ ·ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼›è€Œåç§°ä»¥Asyncç»“å°¾çš„æ–¹æ³•ä¼šå°†åç»­çš„ä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ¯ä¸ªä»»åŠ¡æ˜¯ç”±ä¸åŒçš„çº¿ç¨‹å¤„ç†çš„ã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//å°±è¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œç¬¬äºŒä¸ªCompletableFutureå¯¹è±¡çš„ç»“æœå–å†³äºç¬¬ä¸€ä¸ªCompletableFutureï¼Œæ‰€ä»¥æ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„æ–¹æ³•æ¥å¤„ç†CompletableFutureå¯¹è±¡ï¼Œå¯¹äºæœ€ç»ˆçš„ç»“æœï¼Œæˆ–è€…å¤§è‡´çš„æ—¶é—´è€Œè¨€éƒ½æ²¡æœ‰å¤šå°‘å·®åˆ«ã€‚
</span></span></span><span class=line><span class=cl><span class=c1>//æˆ‘ä»¬é€‰æ‹©thenComposeæ–¹æ³•çš„åŸå› æ˜¯å› ä¸ºå®ƒæ›´é«˜æ•ˆä¸€äº›ï¼Œå› ä¸ºå°‘äº†å¾ˆå¤šçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚
</span></span></span></code></pre></td></tr></table></div></div><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h5 id=futurethencombine>future.thenCombine</h5><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Future</span><span class=o>&lt;</span><span class=n>Double</span><span class=o>&gt;</span> <span class=n>futurePriceInUSD</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> 	<span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(()</span> <span class=o>-&gt;</span> <span class=n>shop</span><span class=o>.</span><span class=na>getPrice</span><span class=o>(</span><span class=n>product</span><span class=o>))</span> 
</span></span><span class=line><span class=cl> 	<span class=o>.</span><span class=na>thenCombine</span><span class=o>(</span> 
</span></span><span class=line><span class=cl>		 <span class=n>CompletableFuture</span><span class=o>.</span><span class=na>supplyAsync</span><span class=o>(</span> 
</span></span><span class=line><span class=cl>			 <span class=o>()</span> <span class=o>-&gt;</span> <span class=n>exchangeService</span><span class=o>.</span><span class=na>getRate</span><span class=o>(</span><span class=n>Money</span><span class=o>.</span><span class=na>EUR</span><span class=o>,</span> <span class=n>Money</span><span class=o>.</span><span class=na>USD</span><span class=o>)),</span> 
</span></span><span class=line><span class=cl> 		<span class=o>(</span><span class=n>price</span><span class=o>,</span> <span class=n>rate</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>price</span> <span class=o>*</span> <span class=n>rate</span> 
</span></span><span class=line><span class=cl> <span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h3 id=6-æ–°çš„æ—¥æœŸå’Œæ—¶é—´api>6. æ–°çš„æ—¥æœŸå’Œæ—¶é—´API</h3><h4 id=6-1-localdate--localtime-å’Œ-localdatetime>6-1. LocalDate ã€ LocalTime å’Œ LocalDateTime</h4><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>18</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=s>&#34;2014-03-18&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalTime</span> <span class=n>time1</span> <span class=o>=</span> <span class=n>LocalTime</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=s>&#34;13:45:20&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>LocalDateTime</span> <span class=n>dt</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>Month</span><span class=o>.</span><span class=na>MARCH</span><span class=o>,</span> <span class=n>18</span><span class=o>,</span> <span class=n>13</span><span class=o>,</span> <span class=n>45</span><span class=o>,</span> <span class=n>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>dt</span><span class=o>.</span><span class=na>toLocalDate</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>LocalTime</span> <span class=n>time2</span> <span class=o>=</span> <span class=n>dt</span><span class=o>.</span><span class=na>toLocalTime</span><span class=o>();</span></span></span></code></pre></td></tr></table></div></div><p>Temporalæ¥å£å®šä¹‰äº†å¦‚ä½•è¯»å–å’Œæ“çºµä¸ºæ—¶é—´å»ºæ¨¡çš„å¯¹è±¡çš„å€¼ã€‚</p><h4 id=6-2-å®šä¹‰-duration-æˆ–-period>6-2. å®šä¹‰ Duration æˆ– Period</h4><p>å¾ˆè‡ªç„¶åœ°ä½ ä¼šæƒ³åˆ°ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªTemporalå¯¹è±¡ä¹‹é—´çš„durationã€‚Durationç±»çš„é™æ€å·¥å‚æ–¹æ³•betweenå°±æ˜¯ä¸ºè¿™ä¸ªç›®çš„è€Œè®¾è®¡çš„ã€‚</p><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Duration å¯¹åº” time
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Duration</span> <span class=n>d1</span> <span class=o>=</span> <span class=n>Duration</span><span class=o>.</span><span class=na>between</span><span class=o>(</span><span class=n>time1</span><span class=o>,</span> <span class=n>time2</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>Duration</span> <span class=n>d2</span> <span class=o>=</span> <span class=n>Duration</span><span class=o>.</span><span class=na>between</span><span class=o>(</span><span class=n>dateTime1</span><span class=o>,</span> <span class=n>dateTime2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>// Period å¯¹åº” date
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Period</span> <span class=n>tenDays</span> <span class=o>=</span> <span class=n>Period</span><span class=o>.</span><span class=na>ofDays</span><span class=o>(</span><span class=n>10</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>Period</span> <span class=n>threeWeeks</span> <span class=o>=</span> <span class=n>Period</span><span class=o>.</span><span class=na>ofWeeks</span><span class=o>(</span><span class=n>3</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>Period</span> <span class=n>twoYearsSixMonthsOneDay</span> <span class=o>=</span> <span class=n>Period</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2</span><span class=o>,</span> <span class=n>6</span><span class=o>,</span> <span class=n>1</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬ä»‹ç»çš„è¿™äº›æ—¥æœŸï€­æ—¶é—´å¯¹è±¡éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œè¿™æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¿æŒé¢†åŸŸæ¨¡å¼ä¸€è‡´æ€§è€Œåšå‡ºçš„é‡å¤§è®¾è®¡å†³å®šã€‚</p><h4 id=6-3-æ“çºµæ—¥æœŸ>6-3. æ“çºµæ—¥æœŸ</h4><div class=highlight id=id-22><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 1. ç»å¯¹ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>18</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>withYear</span><span class=o>(</span><span class=n>2011</span><span class=o>);</span> <span class=c1>//2011-03-18
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date3</span> <span class=o>=</span> <span class=n>date2</span><span class=o>.</span><span class=na>withDayOfMonth</span><span class=o>(</span><span class=n>25</span><span class=o>);</span> <span class=c1>//2011-03-25
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date4</span> <span class=o>=</span> <span class=n>date3</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>ChronoField</span><span class=o>.</span><span class=na>MONTH_OF_YEAR</span><span class=o>,</span> <span class=n>9</span><span class=o>);</span><span class=c1>//2011-09-25
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// 2. ç›¸å¯¹ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>18</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>plusWeeks</span><span class=o>(</span><span class=n>1</span><span class=o>);</span> <span class=c1>//2014-03-25
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date3</span> <span class=o>=</span> <span class=n>date2</span><span class=o>.</span><span class=na>minusYears</span><span class=o>(</span><span class=n>3</span><span class=o>);</span> <span class=c1>//2011-03-25
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date4</span> <span class=o>=</span> <span class=n>date3</span><span class=o>.</span><span class=na>plus</span><span class=o>(</span><span class=n>6</span><span class=o>,</span> <span class=n>ChronoUnit</span><span class=o>.</span><span class=na>MONTHS</span><span class=o>);</span> <span class=c1>//2011-09-25
</span></span></span><span class=line><span class=cl><span class=c1>//ä¸Šé¢çš„plusæ–¹æ³•ä¹Ÿæ˜¯é€šç”¨æ–¹æ³•ï¼Œå®ƒå’Œminusæ–¹æ³•éƒ½å£°æ˜äºTemporalæ¥å£ä¸­
</span></span></span></code></pre></td></tr></table></div></div><h4 id=6-4-è®¾è®¡ä¸€ä¸ªnextworkingdayç±»>6-4. è®¾è®¡ä¸€ä¸ªNextWorkingDayç±»</h4><div class=highlight id=id-23><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>TemporalAdjuster</span> <span class=n>nextWorkingDay</span> <span class=o>=</span> <span class=n>TemporalAdjusters</span><span class=o>.</span><span class=na>ofDateAdjuster</span><span class=o>(</span> 
</span></span><span class=line><span class=cl> <span class=n>temporal</span> <span class=o>-&gt;</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=n>DayOfWeek</span> <span class=n>dow</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl> <span class=n>DayOfWeek</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>temporal</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>ChronoField</span><span class=o>.</span><span class=na>DAY_OF_WEEK</span><span class=o>));</span> 
</span></span><span class=line><span class=cl> <span class=kt>int</span> <span class=n>dayToAdd</span> <span class=o>=</span> <span class=n>1</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=o>(</span><span class=n>dow</span> <span class=o>==</span> <span class=n>DayOfWeek</span><span class=o>.</span><span class=na>FRIDAY</span><span class=o>)</span> <span class=n>dayToAdd</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=o>(</span><span class=n>dow</span> <span class=o>==</span> <span class=n>DayOfWeek</span><span class=o>.</span><span class=na>SATURDAY</span><span class=o>)</span> <span class=n>dayToAdd</span> <span class=o>=</span> <span class=n>2</span><span class=o>;</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>temporal</span><span class=o>.</span><span class=na>plus</span><span class=o>(</span><span class=n>dayToAdd</span><span class=o>,</span> <span class=n>ChronoUnit</span><span class=o>.</span><span class=na>DAYS</span><span class=o>);</span> 
</span></span><span class=line><span class=cl> <span class=o>});</span> 
</span></span><span class=line><span class=cl><span class=n>date</span> <span class=o>=</span> <span class=n>date</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>nextWorkingDay</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h4 id=6-5-æ—¥æœŸå’Œ-string-è½¬æ¢>6-5. æ—¥æœŸå’Œ String è½¬æ¢</h4><div class=highlight id=id-24><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ LocalDate çš„ format å’Œ parse æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>18</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>s1</span> <span class=o>=</span> <span class=n>date</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>BASIC_ISO_DATE</span><span class=o>);</span> <span class=c1>//20140318
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>String</span> <span class=n>s2</span> <span class=o>=</span> <span class=n>date</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ISO_LOCAL_DATE</span><span class=o>);</span> <span class=c1>//2014-03-18
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=s>&#34;20140318&#34;</span><span class=o>,</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>BASIC_ISO_DATE</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=s>&#34;2014-03-18&#34;</span><span class=o>,</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ISO_LOCAL_DATE</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è‡ªå®šä¹‰æ¨¡å¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>DateTimeFormatter</span> <span class=n>formatter</span> <span class=o>=</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;dd/MM/yyyy&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>2014</span><span class=o>,</span> <span class=n>3</span><span class=o>,</span> <span class=n>18</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>String</span> <span class=n>formattedDate</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>formatter</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>formattedDate</span><span class=o>,</span> <span class=n>formatter</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h2 id=å››è¶…è¶Š-java-8>å››ã€è¶…è¶Š Java 8</h2><h3 id=1-åŸºäºå°¾-é€’çš„é˜¶ä¹˜>1. åŸºäºâ€œå°¾-é€’â€çš„é˜¶ä¹˜</h3><div class=highlight id=id-25><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>static</span> <span class=kt>long</span> <span class=nf>factorialTailRecursive</span><span class=o>(</span><span class=kt>long</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>factorialHelper</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>n</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>static</span> <span class=kt>long</span> <span class=nf>factorialHelper</span><span class=o>(</span><span class=kt>long</span> <span class=n>acc</span><span class=o>,</span> <span class=kt>long</span> <span class=n>n</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>n</span> <span class=o>==</span> <span class=n>1</span> <span class=o>?</span> <span class=n>acc</span> <span class=o>:</span> <span class=n>factorialHelper</span><span class=o>(</span><span class=n>acc</span> <span class=o>*</span> <span class=n>n</span><span class=o>,</span> <span class=n>n</span><span class=o>-</span><span class=n>1</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><p>è¿™ç§å½¢å¼çš„é€’å½’æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œç°åœ¨æˆ‘ä»¬ä¸éœ€è¦åœ¨ä¸åŒçš„æ ˆå¸§ä¸Šä¿å­˜æ¯æ¬¡é€’å½’è®¡ç®—çš„ä¸­é—´å€¼ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªè¡Œå†³å®šå¤ç”¨æŸä¸ªæ ˆå¸§è¿›è¡Œè®¡ç®—ã€‚å®é™…ä¸Šï¼Œåœ¨factorialHelperçš„å®šä¹‰ä¸­ï¼Œç«‹å³æ•°ï¼ˆé˜¶ä¹˜è®¡ç®—çš„ä¸­é—´ç»“æœï¼‰ç›´æ¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº†è¯¥æ–¹æ³•ã€‚å†ä¹Ÿä¸ç”¨ä¸ºæ¯ä¸ªé€’å½’è°ƒç”¨åˆ†é…å•ç‹¬çš„æ ˆå¸§ç”¨äºè·Ÿè¸ªæ¯æ¬¡é€’å½’è°ƒç”¨çš„ä¸­é—´å€¼â€”â€”é€šè¿‡æ–¹æ³•çš„å‚æ•°èƒ½å¤Ÿç›´æ¥è®¿é—®è¿™äº›å€¼ã€‚</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png data-sub-html="<h2>https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h3 id=2-ç§‘é‡ŒåŒ–curry>2. ç§‘é‡ŒåŒ–ï¼ˆcurryï¼‰</h3><div class=highlight id=id-26><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>static</span> <span class=n>DoubleUnaryOperator</span> <span class=nf>curriedConverter</span><span class=o>(</span><span class=kt>double</span> <span class=n>f</span><span class=o>,</span> <span class=kt>double</span> <span class=n>b</span><span class=o>){</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=o>(</span><span class=kt>double</span> <span class=n>x</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=o>*</span> <span class=n>f</span> <span class=o>+</span> <span class=n>b</span><span class=o>;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>DoubleUnaryOperator</span> <span class=n>convertCtoF</span> <span class=o>=</span> <span class=n>curriedConverter</span><span class=o>(</span><span class=n>9</span><span class=o>.</span><span class=na>0</span><span class=o>/</span><span class=n>5</span><span class=o>,</span> <span class=n>32</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>DoubleUnaryOperator</span> <span class=n>convertUSDtoGBP</span> <span class=o>=</span> <span class=n>curriedConverter</span><span class=o>(</span><span class=n>0</span><span class=o>.</span><span class=na>6</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=n>DoubleUnaryOperator</span> <span class=n>convertKmtoMi</span> <span class=o>=</span> <span class=n>curriedConverter</span><span class=o>(</span><span class=n>0</span><span class=o>.</span><span class=na>6214</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span></span></span></code></pre></td></tr></table></div></div><h3 id=3-scala>3. Scala</h3><ul><li>å£°æ˜å˜é‡ <code>s : String</code></li><li>åˆ›å»ºé›†åˆ<code>val authorsToAge = Map("Raoul" -> 23, "Mario" -> 40, "Alan" -> 53)</code></li><li>val è¡¨ç¤ºä¸å¯å˜ï¼Œvarè¡¨ç¤ºå¯å˜</li><li>æ”¯æŒä»»æ„å¤§å°çš„å…ƒç»„</li></ul><div class=highlight id=id-27><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scala data-lang=scala><span class=line><span class=cl><span class=k>val</span> <span class=n>book</span> <span class=k>=</span> <span class=o>(</span><span class=mi>2014</span><span class=o>,</span> <span class=s>&#34;Java 8 in Action&#34;</span><span class=o>,</span> <span class=s>&#34;Manning&#34;</span><span class=o>)</span> <span class=c1>//å…ƒç»„ç±»å‹ä¸º(Int, String, String)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>val</span> <span class=n>numbers</span> <span class=k>=</span> <span class=o>(</span><span class=mi>42</span><span class=o>,</span> <span class=mi>1337</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>14</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>println</span><span class=o>(</span><span class=n>book</span><span class=o>.</span><span class=n>_1</span><span class=o>)</span> <span class=c1>//2014
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>println</span><span class=o>(</span><span class=n>numbers</span><span class=o>.</span><span class=n>_4</span><span class=o>)</span> <span class=o>//</span><span class=mi>3</span></span></span></code></pre></td></tr></table></div></div><ul><li>Scalaä¸­çš„Streamå¯ä»¥è®°å½•å®ƒæ›¾ç»è®¡ç®—å‡ºçš„å€¼ï¼Œæ‰€ä»¥ä¹‹å‰çš„å…ƒç´ å¯ä»¥éšæ—¶è¿›è¡Œè®¿é—®ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒStreamè¿˜è¿›è¡Œäº†ç´¢å¼•ï¼Œæ‰€ä»¥Streamä¸­çš„å…ƒç´ å¯ä»¥åƒListé‚£æ ·é€šè¿‡ç´¢å¼•è®¿é—®ã€‚æ³¨æ„ï¼Œè¿™ç§æŠ‰æ‹©ä¹Ÿé™„å¸¦ç€å¼€é”€ï¼Œç”±äºéœ€è¦å­˜å‚¨è¿™äº›é¢å¤–çš„å±æ€§ï¼Œå’ŒJava 8ä¸­çš„Streamæ¯”èµ·æ¥ï¼ŒScalaç‰ˆæœ¬çš„Streamå†…å­˜çš„ä½¿ç”¨æ•ˆç‡å˜ä½äº†ï¼Œå› ä¸ºScalaä¸­çš„Streaméœ€è¦èƒ½å¤Ÿå›æº¯ä¹‹å‰çš„å…ƒç´ ï¼Œè¿™æ„å‘³ç€ä¹‹å‰è®¿é—®è¿‡çš„å…ƒç´ éƒ½éœ€è¦åœ¨å†…å­˜â€œè®°å½•ä¸‹æ¥â€ï¼ˆå³è¿›è¡Œç¼“å­˜ï¼‰ã€‚</li><li>Option:</li></ul><div class=highlight id=id-28><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scala data-lang=scala><span class=line><span class=cl><span class=c1>//Java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>public</span> <span class=nc>String</span> <span class=n>getCarInsuranceName</span><span class=o>(</span><span class=nc>Optional</span><span class=o>&lt;</span><span class=nc>Person</span><span class=o>&gt;</span> <span class=n>person</span><span class=o>,</span> <span class=n>int</span> <span class=n>minAge</span><span class=o>)</span> <span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>return</span> <span class=n>person</span><span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=n>p</span> <span class=o>-&gt;</span> <span class=n>p</span><span class=o>.</span><span class=n>getAge</span><span class=o>()</span> <span class=o>&gt;=</span> <span class=n>minAge</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>flatMap</span><span class=o>(</span><span class=nc>Person</span><span class=k>:</span><span class=kt>:getCar</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>flatMap</span><span class=o>(</span><span class=nc>Car</span><span class=k>:</span><span class=kt>:getInsurance</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>map</span><span class=o>(</span><span class=nc>Insurance</span><span class=k>:</span><span class=kt>:getName</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>orElse</span><span class=o>(</span><span class=s>&#34;Unknown&#34;</span><span class=o>);</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//Scala
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>def</span> <span class=n>getCarInsuranceName</span><span class=o>(</span><span class=n>person</span><span class=k>:</span> <span class=kt>Option</span><span class=o>[</span><span class=kt>Person</span><span class=o>],</span> <span class=n>minAge</span><span class=k>:</span> <span class=kt>Int</span><span class=o>)</span> <span class=k>=</span> 
</span></span><span class=line><span class=cl> <span class=n>person</span><span class=o>.</span><span class=n>filter</span><span class=o>(</span><span class=k>_</span><span class=o>.</span><span class=n>getAge</span><span class=o>()</span> <span class=o>&gt;=</span> <span class=n>minAge</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>flatMap</span><span class=o>(</span><span class=k>_</span><span class=o>.</span><span class=n>getCar</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>flatMap</span><span class=o>(</span><span class=k>_</span><span class=o>.</span><span class=n>getInsurance</span><span class=o>)</span> 
</span></span><span class=line><span class=cl> <span class=o>.</span><span class=n>map</span><span class=o>(</span><span class=k>_</span><span class=o>.</span><span class=n>getName</span><span class=o>).</span><span class=n>getOrElse</span><span class=o>(</span><span class=s>&#34;Unknown&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=n>åœ¨å‰é¢çš„ä»£ç ä¸­</span><span class=err>ï¼Œ</span><span class=n>ä½ ä½¿ç”¨çš„æ˜¯_</span><span class=o>.</span><span class=n>getCar</span><span class=err>ï¼ˆ</span><span class=n>å¹¶æœªä½¿ç”¨åœ†æ‹¬å·</span><span class=err>ï¼‰ï¼Œ</span><span class=n>è€Œä¸æ˜¯_</span><span class=o>.</span><span class=n>getCar</span><span class=o>()</span> <span class=err>ï¼ˆ</span><span class=n>å¸¦åœ†æ‹¬å·</span><span class=err>ï¼‰ã€‚</span><span class=nc>Scalaè¯­è¨€ä¸­</span><span class=err>ï¼Œ</span><span class=n>æ‰§è¡Œæ–¹æ³•è°ƒç”¨æ—¶</span><span class=err>ï¼Œ</span><span class=n>å¦‚æœä¸éœ€è¦ä¼ é€’å‚æ•°</span><span class=err>ï¼Œ</span><span class=n>é‚£ä¹ˆå‡½æ•°çš„åœ†æ‹¬å·æ˜¯å¯ä»¥çœç•¥çš„</span><span class=err>ã€‚</span></span></span></code></pre></td></tr></table></div></div><h3 id=4-é—­åŒ…>4. é—­åŒ…</h3><p>é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œå®ƒå¯ä»¥ä¸å—é™åˆ¶åœ°è®¿é—®è¯¥å‡½æ•°çš„éæœ¬åœ°å˜é‡ã€‚</p><p>ä¸è¿‡Java 8ä¸­çš„Lambdaè¡¨è¾¾å¼è‡ªèº«å¸¦æœ‰ä¸€å®šçš„é™åˆ¶ï¼šå®ƒä»¬ä¸èƒ½ä¿®æ”¹å®šä¹‰Lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä¸­çš„æœ¬åœ°å˜é‡å€¼ã€‚è¿™äº›å˜é‡å¿…é¡»éšå¼åœ°å£°æ˜ä¸ºfinalã€‚</p><p>è¿™äº›èƒŒæ™¯çŸ¥è¯†æœ‰åŠ©äºæˆ‘ä»¬ç†è§£â€œLambdaé¿å…äº†å¯¹å˜é‡å€¼çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯å¯¹å˜é‡çš„è®¿é—®â€ã€‚</p><h3 id=5-trait>5. trait</h3><p>Scalaè¿˜æä¾›äº†å¦ä¸€ä¸ªéå¸¸æœ‰åŠ©äºæŠ½è±¡å¯¹è±¡çš„ç‰¹æ€§ï¼Œåç§°å«traitã€‚å®ƒæ˜¯Scalaä¸ºå®ç°Javaä¸­çš„æ¥å£è€Œè®¾è®¡çš„æ›¿ä»£å“ã€‚traitä¸­æ—¢å¯ä»¥å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ã€‚traitåŒæ—¶è¿˜æ”¯æŒJavaä¸­æ¥å£é‚£æ ·çš„å¤šç»§æ‰¿ï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†å®ƒä»¬çœ‹æˆä¸Java 8ä¸­æ¥å£ç±»ä¼¼çš„ç‰¹æ€§ï¼Œå®ƒä»¬éƒ½æ”¯æŒé»˜è®¤æ–¹æ³•ã€‚traitä¸­è¿˜å¯ä»¥åŒ…å«åƒæŠ½è±¡ç±»è¿™æ ·çš„å­—æ®µï¼Œè€ŒJava 8çš„æ¥å£ä¸æ”¯æŒè¿™æ ·çš„ç‰¹æ€§ã€‚é‚£ä¹ˆï¼Œtraitå°±ç±»ä¼¼äºæŠ½è±¡ç±»å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œå› ä¸ºtraitæ”¯æŒå¤šç»§æ‰¿ï¼Œè€ŒæŠ½è±¡ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ã€‚Javaæ”¯æŒç±»å‹çš„å¤šç»§æ‰¿ï¼Œå› ä¸ºä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚ç°åœ¨ï¼ŒJava 8é€šè¿‡é»˜è®¤æ–¹æ³•åˆå¼•å…¥äº†å¯¹è¡Œä¸ºçš„å¤šç»§æ‰¿ï¼Œä¸è¿‡å®ƒä¾æ—§ä¸æ”¯æŒå¯¹çŠ¶æ€çš„å¤šç»§æ‰¿ï¼Œè€Œè¿™æ°æ°æ˜¯traitæ”¯æŒçš„ã€‚</p><div class=highlight id=id-29><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-scala data-lang=scala><span class=line><span class=cl><span class=k>trait</span> <span class=nc>Sized</span><span class=o>{</span> 
</span></span><span class=line><span class=cl> <span class=k>var</span> <span class=n>size</span> <span class=k>:</span> <span class=kt>Int</span> <span class=o>=</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl> <span class=k>def</span> <span class=n>isEmpty</span><span class=o>()</span> <span class=k>=</span> <span class=n>size</span> <span class=o>==</span> <span class=mi>0</span> <span class=c1>//å¸¦é»˜è®¤å®ç°çš„isEmptyæ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Empty</span> <span class=k>extends</span> <span class=nc>Sized</span> 
</span></span><span class=line><span class=cl><span class=n>println</span><span class=o>(</span><span class=k>new</span> <span class=nc>Empty</span><span class=o>().</span><span class=n>isEmpty</span><span class=o>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Box</span> 
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=n>b1</span> <span class=k>=</span> <span class=k>new</span> <span class=nc>Box</span><span class=o>()</span> <span class=k>with</span> <span class=nc>Sized</span> <span class=c1>//åœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶æ„å»ºtrait
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>println</span><span class=o>(</span><span class=n>b1</span><span class=o>.</span><span class=n>isEmpty</span><span class=o>())</span> 
</span></span><span class=line><span class=cl><span class=k>val</span> <span class=n>b2</span> <span class=k>=</span> <span class=k>new</span> <span class=nc>Box</span><span class=o>()</span> 
</span></span><span class=line><span class=cl><span class=n>b2</span><span class=o>.</span><span class=n>isEmpty</span><span class=o>()</span> <span class=o>//</span><span class=n>ç¼–è¯‘é”™è¯¯</span><span class=err>ï¼š</span><span class=n>å› ä¸ºBoxç±»çš„å£°æ˜å¹¶æœªç»§æ‰¿Sized</span></span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="æ›´æ–°äº 2021-11-08 15:20:42">æ›´æ–°äº 2021-11-08&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=https://leni.fun/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/ data-title=ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/java/ class=post-tag>Java</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/spring_draft/ class=post-nav-item rel=prev title="Spring æ‚è®°"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Spring æ‚è®°</a>
<a href=/springboot_draft/ class=post-nav-item rel=next title="SpringBoot æ‚è®°">SpringBoot æ‚è®°<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=hihihiman/hihihiman.github.io data-repo-id=R_kgDOKD90KA data-category=Announcements data-category-id=DIC_kwDOKD90KM4CYcdO data-mapping=pathname data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright order-5" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>éƒ½å°†ä¼š</a></span><span class="license footer-divider">åç«¯å¼€å‘å·¥ç¨‹å¸ˆ</span></div><div class="footer-line statistics"><span class=site-time title=ç½‘ç«™è¿è¡Œä¸­â€¦â€¦><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">ç½‘ç«™è¿è¡Œä¸­â€¦â€¦</span></span></div><div class="footer-line visitor order-4"><span id=busuanzi_container_site_uv title=æ€»è®¿å®¢æ•°><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=æ€»è®¿é—®é‡><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=å›åˆ°é¡¶éƒ¨><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=æŸ¥çœ‹è¯„è®º><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/hihihiman/hihihiman.github.io title=åšå®¢æºç  target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;bottom:0></div><noscript><div class=noscript-warning>FixIt ä¸»é¢˜åœ¨å¯ç”¨ JavaScript çš„æƒ…å†µä¸‹æ•ˆæœæœ€ä½³ã€‚</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/pink/pace-theme-center-atom.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",editLockTitle:"é”å®šå¯ç¼–è¾‘ä»£ç å—",editUnLockTitle:"è§£é”å¯ç¼–è¾‘ä»£ç å—",editable:!0,maxShownLines:1024},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark",lightTheme:"light"}},cookieconsent:{content:{dismiss:"åŒæ„",link:"äº†è§£æ›´å¤š",message:"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒã€‚"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":"çš„åšå®¢","typeit-header-subtitle-mobile":"çš„åšå®¢"},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!0,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,threshold:.3,useExtendedSearch:!0},siteTime:"2021-08-26T23:31:00+08:00",typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,loop:!0,speed:100}}</script><script src=/js/theme.min.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>