<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®° -</title><meta name=author content="éƒ½å°†ä¼š"><meta name=author-link content><meta name=description content="ä¸€ã€åŸºç¡€çŸ¥è¯†
1. å‡½æ•°å¼ç¼–ç¨‹

å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚
å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€

ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°
ä¸è¿›è¡ŒI/O
ä¸æŠ›å‡ºå¼‚å¸¸
é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°


ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚
è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹
Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚
"><meta name=keywords content="Java,ç¬”è®°"><meta itemprop=name content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta itemprop=description content="ä¸€ã€åŸºç¡€çŸ¥è¯†
1. å‡½æ•°å¼ç¼–ç¨‹

å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚
å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€

ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°
ä¸è¿›è¡ŒI/O
ä¸æŠ›å‡ºå¼‚å¸¸
é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°


ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚
è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹
Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚
"><meta itemprop=datePublished content="2023-08-08T15:20:42+08:00"><meta itemprop=dateModified content="2023-08-08T15:20:42+08:00"><meta itemprop=wordCount content="1835"><meta itemprop=image content="https://leni.fun/images/avatar.jpg"><meta itemprop=keywords content="Java,"><meta property="og:title" content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta property="og:description" content="ä¸€ã€åŸºç¡€çŸ¥è¯†
1. å‡½æ•°å¼ç¼–ç¨‹

å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚
å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€

ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°
ä¸è¿›è¡ŒI/O
ä¸æŠ›å‡ºå¼‚å¸¸
é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°


ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚
è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹
Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚
"><meta property="og:type" content="article"><meta property="og:url" content="https://leni.fun/posts/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html"><meta property="og:image" content="https://leni.fun/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-08T15:20:42+08:00"><meta property="article:modified_time" content="2023-08-08T15:20:42+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leni.fun/images/avatar.jpg"><meta name=twitter:title content="ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°"><meta name=twitter:description content="ä¸€ã€åŸºç¡€çŸ¥è¯†
1. å‡½æ•°å¼ç¼–ç¨‹

å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚
å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€

ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°
ä¸è¿›è¡ŒI/O
ä¸æŠ›å‡ºå¼‚å¸¸
é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°


ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚
è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚
è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹
Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚
"><meta name=application-name content="éƒ½å°†ä¼šçš„ APP"><meta name=apple-mobile-web-app-title content="éƒ½å°†ä¼šçš„ APP"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://leni.fun/posts/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html><link rel=prev href=https://leni.fun/posts/java_base.html><link rel=next href=https://leni.fun/posts/java_draft.html><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/leni.fun\/posts\/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html"},"genre":"posts","keywords":"Java","wordcount":1835,"url":"https:\/\/leni.fun\/posts\/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html","datePublished":"2023-08-08T15:20:42+08:00","dateModified":"2023-08-08T15:20:42+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"éƒ½å°†ä¼š"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=/images/avatar.jpg data-alt=/images/avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>éƒ½å°†ä¼š</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=è¾“å…¥å…³é”®è¯æœç´¢ id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=/images/avatar.jpg data-alt=/images/avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>éƒ½å°†ä¼š</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=è¾“å…¥å…³é”®è¯æœç´¢ id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/ title>ä¸»é¡µ</a></li><li class=breadcrumb-item><a href=/posts.html title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>ç›®å½•&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span title=è½¬è½½ class=icon-repost><i class="fa-solid fa-share fa-fw" aria-hidden=true></i></span><span>ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=éƒ½å°†ä¼š data-alt=éƒ½å°†ä¼š class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;éƒ½å°†ä¼š</span></span>
<span class=post-category>æ”¶å½•äº <a href=/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> è¯»ä¹¦ç¬”è®°</a></span></div><div class=post-meta-line><span title="å‘å¸ƒäº 2023-08-08 15:20:42"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-08-08>2023-08-08</time></span>&nbsp;<span title="æ›´æ–°äº 2023-08-08 15:20:42"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2023-08-08>2023-08-08</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>çº¦ 1835 å­—</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>é¢„è®¡é˜…è¯» 9 åˆ†é’Ÿ</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#ä¸€åŸºç¡€çŸ¥è¯†>ä¸€ã€åŸºç¡€çŸ¥è¯†</a><ul><li><a href=#1-å‡½æ•°å¼ç¼–ç¨‹>1. å‡½æ•°å¼ç¼–ç¨‹</a></li><li><a href=#2-lambdaè¡¨è¾¾å¼è¡Œä¸ºå‚æ•°åŒ–çµæ´»ç®€æ´>â˜…2. lambdaè¡¨è¾¾å¼ï¼šè¡Œä¸ºå‚æ•°åŒ–ï¼ˆçµæ´»ã€ç®€æ´ï¼‰</a></li></ul></li><li><a href=#äºŒå‡½æ•°å¼æ•°æ®å¤„ç†>äºŒã€å‡½æ•°å¼æ•°æ®å¤„ç†</a><ul><li><a href=#1-æµ>â˜…1. æµ</a></li><li><a href=#2-ç”¨-optional-å–ä»£-null>â˜…2. ç”¨ Optional å–ä»£ null</a></li><li><a href=#3-å†…éƒ¨è¿­ä»£>3. å†…éƒ¨è¿­ä»£</a></li></ul></li><li><a href=#ä¸‰é«˜æ•ˆ-java-8-ç¼–ç¨‹>ä¸‰ã€é«˜æ•ˆ Java 8 ç¼–ç¨‹</a><ul><li><a href=#1-å„ç‰ˆæœ¬å˜åŒ–>1. å„ç‰ˆæœ¬å˜åŒ–</a></li><li><a href=#2-è®¾è®¡æ¨¡å¼>ğŸŒŸ2. è®¾è®¡æ¨¡å¼</a></li><li><a href=#3-peekæŸ¥çœ‹ä¸­é—´å€¼>3. peekæŸ¥çœ‹ä¸­é—´å€¼</a></li><li><a href=#4-æ¥å£çš„é»˜è®¤æ–¹æ³•>â˜…4. æ¥å£çš„é»˜è®¤æ–¹æ³•</a></li><li><a href=#5-ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹>5. ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</a></li><li><a href=#6-æ–°çš„æ—¥æœŸå’Œæ—¶é—´api>6. æ–°çš„æ—¥æœŸå’Œæ—¶é—´API</a></li></ul></li><li><a href=#å››è¶…è¶Š-java-8>å››ã€è¶…è¶Š Java 8</a><ul><li><a href=#1-åŸºäºå°¾-é€’çš„é˜¶ä¹˜>1. åŸºäºâ€œå°¾-é€’â€çš„é˜¶ä¹˜</a></li><li><a href=#2-ç§‘é‡ŒåŒ–curry>2. ç§‘é‡ŒåŒ–ï¼ˆcurryï¼‰</a></li><li><a href=#3-scala>3. Scala</a></li><li><a href=#4-é—­åŒ…>4. é—­åŒ…</a></li><li><a href=#5-trait>5. trait</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=ä¸€åŸºç¡€çŸ¥è¯†>ä¸€ã€åŸºç¡€çŸ¥è¯†</h2><h3 id=1-å‡½æ•°å¼ç¼–ç¨‹>1. å‡½æ•°å¼ç¼–ç¨‹</h3><ul><li><strong>å‡½æ•°å¼ç¼–ç¨‹</strong>ä¸­çš„<strong>å‡½æ•°</strong>çš„ä¸»è¦æ„æ€æ˜¯â€œæŠŠå‡½æ•°ä½œä¸ºä¸€ç­‰å€¼â€ï¼Œä¸è¿‡å®ƒä¹Ÿå¸¸å¸¸éšå«ç€ç¬¬äºŒå±‚æ„æ€ï¼Œå³â€œæ‰§è¡Œæ—¶åœ¨å…ƒç´ ä¹‹é—´æ— äº’åŠ¨â€ã€‚</li><li>å¼•ç”¨é€æ˜æ€§â€”â€”â€œæ²¡æœ‰å¯æ„ŸçŸ¥çš„å‰¯ä½œç”¨â€<ul><li>ä¸æ”¹å˜å¯¹è°ƒç”¨è€…å¯è§çš„å˜é‡ã€‚è¿”å›çš„ç»“æœåŸºäºå‚æ•°å´æ²¡æœ‰ä¿®æ”¹ä»»ä½•ä¸€ä¸ªä¼ å…¥çš„å‚æ•°</li><li>ä¸è¿›è¡ŒI/O</li><li>ä¸æŠ›å‡ºå¼‚å¸¸</li><li>é€‰æ‹©ä½¿ç”¨å¼•ç”¨é€æ˜çš„å‡½æ•°</li></ul></li><li>ä¹Ÿå…è®¸å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€äº›éå‡½æ•°å¼çš„æ“ä½œï¼Œåªè¦è¿™äº›æ“ä½œçš„ç»“æœä¸ä¼šæš´éœ²ç»™ç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ã€‚ä½œä¸ºå‡½æ•°å¼çš„ç¨‹åºï¼Œä½ çš„å‡½æ•°æˆ–æ–¹æ³•è°ƒç”¨çš„åº“å‡½æ•°å¦‚æœæœ‰å‰¯ä½œç”¨ï¼Œä½ å¿…é¡»è®¾æ³•éšè—å®ƒä»¬çš„éå‡½æ•°å¼è¡Œä¸ºï¼Œå¦åˆ™å°±ä¸èƒ½è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</li><li>è¢«ç§°ä¸ºâ€œå‡½æ•°å¼â€çš„å‡½æ•°æˆ–æ–¹æ³•éƒ½åªèƒ½ä¿®æ”¹æœ¬åœ°å˜é‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå¼•ç”¨çš„å¯¹è±¡éƒ½åº”è¯¥æ˜¯ä¸å¯ä¿®æ”¹çš„å¯¹è±¡ã€‚</li><li>è¦è¢«ç§°ä¸ºå‡½æ•°å¼ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•ä¸åº”è¯¥æŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚æ—¦æŠ›å‡ºå¼‚å¸¸ï¼Œå°±æ„å‘³ç€ç»“æœè¢«ç»ˆæ­¢äº†ï¼›ä¸å†åƒæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é»‘ç›’æ¨¡å¼é‚£æ ·ï¼Œç”±returnè¿”å›ä¸€ä¸ªæ°å½“çš„ç»“æœå€¼ã€‚ â€”â€” è¯·ä½¿ç”¨Optionalç±»å‹</li><li>Optionalç±»ï¼šå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä¸€ä¸ªå€¼ã€‚Optionalä¸­æœ‰æ–¹æ³•æ¥æ˜ç¡®å¤„ç†å€¼ä¸å­˜åœ¨çš„æƒ…å†µï¼Œè¿™æ ·å°±å¯ä»¥é¿å…NullPointerå¼‚å¸¸äº†ã€‚</li></ul><h3 id=2-lambdaè¡¨è¾¾å¼è¡Œä¸ºå‚æ•°åŒ–çµæ´»ç®€æ´>â˜…2. lambdaè¡¨è¾¾å¼ï¼šè¡Œä¸ºå‚æ•°åŒ–ï¼ˆçµæ´»ã€ç®€æ´ï¼‰</h3><ul><li>å‡½æ•°å¼æ¥å£ï¼ˆç”¨@FunctionalInterfaceæ ‡è®°ï¼‰ä¸åŒ¿åå†…éƒ¨ç±»ï¼š</li></ul><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-45-13:44:34-image-20210521134432682.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><ul><li><p>å‡½æ•°å¼æ¥å£ï¼ˆåŠ å‰ç¼€ï¼šIntã€Doubleã€Longï¼‰</p><ul><li>Predicateï¼š T -> boolean ï¼ˆè°“è¯ï¼‰</li><li>Consumerï¼š T -> void</li><li>Functionï¼š T,R -> R</li><li>Supplierï¼š() -> R</li></ul></li><li><p>èŒƒå‹Tåªèƒ½ç»‘å®šåˆ°å¼•ç”¨ç±»å‹</p></li><li><p>é—­åŒ…ï¼šé—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œä¸”å®ƒå¯ä»¥æ— é™åˆ¶åœ°è®¿é—®é‚£ä¸ªå‡½æ•°çš„éæœ¬åœ°å˜é‡ã€‚ç°åœ¨ï¼ŒJava 8çš„Lambdaå’ŒåŒ¿åç±»å¯ä»¥åšç±»ä¼¼äºé—­åŒ…çš„äº‹æƒ…ï¼šå®ƒä»¬å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡ã€‚ä½†æœ‰ä¸€ä¸ªé™åˆ¶ï¼šå®ƒä»¬ä¸èƒ½ä¿®æ”¹å®šä¹‰Lambdaçš„æ–¹æ³•çš„å±€éƒ¨å˜é‡çš„å†…å®¹ã€‚è¿™äº›å˜é‡å¿…é¡»æ˜¯éšå¼æœ€ç»ˆçš„ã€‚å¯ä»¥è®¤ä¸ºLambdaæ˜¯å¯¹å€¼å°é—­ï¼Œè€Œä¸æ˜¯å¯¹å˜é‡å°é—­ã€‚</p></li><li><p>æ–¹æ³•å¼•ç”¨ï¼šæ ¹æ®å·²æœ‰çš„æ–¹æ³•å®ç°æ¥åˆ›å»ºLambdaè¡¨è¾¾å¼</p><ul><li>æŒ‡å‘é™æ€æ–¹æ³•</li><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-51-09:37:35-image-20210524093733916.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li><li>æŒ‡å‘ä»»æ„ç±»å‹å®ä¾‹æ–¹æ³•</li><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/13-58-56-09:37:51-image-20210524093749969.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li><li>æŒ‡å‘ç°æœ‰å¯¹è±¡çš„å®ä¾‹æ–¹æ³•</li><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09:38:45-image-20210524093843966.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li></ul></li><li><p>æ„é€ å‡½æ•°å¼•ç”¨ï¼šClassName :: new</p></li><li><p>æ¯”è¾ƒå™¨é“¾ï¼š</p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10:49:24-image-20210524104923719.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p></li></ul><h2 id=äºŒå‡½æ•°å¼æ•°æ®å¤„ç†>äºŒã€å‡½æ•°å¼æ•°æ®å¤„ç†</h2><h3 id=1-æµ>â˜…1. æµ</h3><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:01:48-image-20210524110147149.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><ul><li>ä¸­é—´æ“ä½œï¼šè¿”å›streamç±»å‹<ul><li>filterï¼šæ’é™¤å…ƒç´ ï¼ŒPredicateï¼ŒT -> boolean</li><li>mapï¼šæå–ä¿¡æ¯ï¼ŒFunction&lt;T,R>, T -> R</li><li>limitï¼šæˆªæ–­æµï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li><li>skipï¼šä¸limitäº’è¡¥ï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li><li>sortedï¼šæ’åºï¼ŒComparator, (T,T) -> intï¼ˆæœ‰çŠ¶æ€-æ— ç•Œï¼‰</li><li>distinctï¼šå»é‡ï¼ˆæœ‰çŠ¶æ€-æ— ç•Œï¼‰</li><li>flatMapï¼šè®©ä½ æŠŠä¸€ä¸ªæµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰çš„æµè¿æ¥èµ·æ¥æˆä¸ºä¸€ä¸ªæµ</li></ul></li><li>ç»ˆç«¯æ“ä½œï¼šè¿”å›éstreamç±»å‹<ul><li>collectï¼šè½¬æ¢æˆå…¶ä»–æ ¼å¼ï¼ˆè¿”å›é›†åˆï¼‰</li><li>countï¼šè®¡æ•°ï¼ˆè¿”å›longï¼‰</li><li>forEachï¼šéå†ï¼ˆè¿”å›voidï¼‰</li><li>ï¼ˆä»¥ä¸‹éƒ½æ˜¯çŸ­è·¯æ±‚å€¼ï¼‰</li><li>anyMatchï¼šè‡³å°‘åŒ¹é…ä¸€ä¸ªï¼ˆè¿”å›booleanï¼‰</li><li>allMatchï¼šéƒ½åŒ¹é…ï¼ˆè¿”å›booleanï¼‰</li><li>noneMatchï¼šéƒ½ä¸åŒ¹é…ï¼ˆè¿”å›booleanï¼‰</li><li>findAnyï¼šæ‰¾åˆ°ä»»æ„ï¼ˆè¿”å›Optionalç±»ï¼‰</li><li>findFirstï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªï¼Œåœ¨å¹¶è¡Œä¸Šé™åˆ¶æ›´å¤šï¼Œå¦‚æœä¸å…³å¿ƒè¿”å›çš„å…ƒç´ æ˜¯å“ªä¸ªï¼Œè¯·ä½¿ç”¨findAnyã€‚ï¼ˆè¿”å›Optionalç±»ï¼‰</li><li>reduceï¼š BinaryOperator ï¼Œ(T, T) -> T ï¼ˆè¿”å›Optionalç±»ï¼‰ï¼ˆæœ‰çŠ¶æ€-æœ‰ç•Œï¼‰</li></ul></li><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:47:32-image-20210525164731012.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li><li>æµåªèƒ½æ¶ˆè´¹ä¸€æ¬¡ã€‚</li></ul><h4 id=1-1-åŸå§‹ç±»å‹æµç‰¹åŒ–>1-1. åŸå§‹ç±»å‹æµç‰¹åŒ–</h4><p>Java 8å¼•å…¥äº†ä¸‰ä¸ªåŸå§‹ç±»å‹ç‰¹åŒ–æµæ¥å£æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šIntStreamã€DoubleStreamå’ŒLongStreamï¼Œåˆ†åˆ«å°†æµä¸­çš„å…ƒç´ ç‰¹åŒ–ä¸ºintã€longå’Œdoubleï¼Œä»è€Œé¿å…äº†æš—å«çš„è£…ç®±æˆæœ¬ã€‚è¦è®°ä½çš„æ˜¯ï¼Œè¿™äº›ç‰¹åŒ–çš„åŸå› å¹¶ä¸åœ¨äºæµçš„å¤æ‚æ€§ï¼Œè€Œæ˜¯è£…ç®±é€ æˆçš„å¤æ‚æ€§â€”â€”å³ç±»ä¼¼intå’ŒIntegerä¹‹é—´çš„æ•ˆç‡å·®å¼‚ã€‚</p><h4 id=1-2-æ˜ å°„åˆ°æ•°æ®æµ>1-2. æ˜ å°„åˆ°æ•°æ®æµ</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:21:44-image-20210525172143612.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><ul><li>è½¬æ¢å›å¯¹è±¡æµ</li></ul><div class=highlight id=id-1><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//å°†Streamè½¬æ¢ä¸ºæ•°å€¼æµ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>IntStream intStream <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//å°†æ•°å€¼æµè½¬æ¢ä¸ºStream
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Stream<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> stream <span style=color:#f92672>=</span> intStream<span style=color:#f92672>.</span><span style=color:#a6e22e>boxed</span><span style=color:#f92672>();</span></span></span></code></pre></div><ul><li>æ•°å€¼èŒƒå›´</li></ul><p>rangeæ˜¯ä¸åŒ…å«ç»“æŸå€¼çš„ï¼Œè€ŒrangeClosedåˆ™åŒ…å«ç»“æŸå€¼ã€‚</p><ul><li>ç”Ÿæˆå‹¾è‚¡æ•°</li></ul><div class=highlight id=id-2><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Stream<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[]&gt;</span> pythagoreanTriples <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span>	 IntStream<span style=color:#f92672>.</span><span style=color:#a6e22e>rangeClosed</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 100<span style=color:#f92672>).</span><span style=color:#a6e22e>boxed</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span>		 <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>a <span style=color:#f92672>-&gt;</span> 
</span></span><span style=display:flex><span>			 IntStream<span style=color:#f92672>.</span><span style=color:#a6e22e>rangeClosed</span><span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> 100<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> 				<span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>b <span style=color:#f92672>-&gt;</span> Math<span style=color:#f92672>.</span><span style=color:#a6e22e>sqrt</span><span style=color:#f92672>(</span>a<span style=color:#f92672>*</span>a <span style=color:#f92672>+</span> b<span style=color:#f92672>*</span>b<span style=color:#f92672>)</span> <span style=color:#f92672>%</span> 1 <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> 				<span style=color:#f92672>.</span><span style=color:#a6e22e>mapToObj</span><span style=color:#f92672>(</span>b <span style=color:#f92672>-&gt;</span> 
</span></span><span style=display:flex><span>					 <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>,</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>sqrt</span><span style=color:#f92672>(</span>a <span style=color:#f92672>*</span> a <span style=color:#f92672>+</span> b <span style=color:#f92672>*</span> b<span style=color:#f92672>)})</span> 
</span></span><span style=display:flex><span>			 <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Stream<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>double</span><span style=color:#f92672>[]&gt;</span> pythagoreanTriples2 <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> 	IntStream<span style=color:#f92672>.</span><span style=color:#a6e22e>rangeClosed</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 100<span style=color:#f92672>).</span><span style=color:#a6e22e>boxed</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> 		<span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>a <span style=color:#f92672>-&gt;</span> 
</span></span><span style=display:flex><span>			 IntStream<span style=color:#f92672>.</span><span style=color:#a6e22e>rangeClosed</span><span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> 100<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> 				<span style=color:#f92672>.</span><span style=color:#a6e22e>mapToObj</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span> 					b <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>double</span><span style=color:#f92672>[]{</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>,</span> Math<span style=color:#f92672>.</span><span style=color:#a6e22e>sqrt</span><span style=color:#f92672>(</span>a<span style=color:#f92672>*</span>a <span style=color:#f92672>+</span> b<span style=color:#f92672>*</span>b<span style=color:#f92672>)})</span> 
</span></span><span style=display:flex><span>				 <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>t <span style=color:#f92672>-&gt;</span> t<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span> <span style=color:#f92672>%</span> 1 <span style=color:#f92672>==</span> 0<span style=color:#f92672>));</span></span></span></code></pre></div><h4 id=1-3-æ— é™æµæ–æ³¢é‚£å¥‘æ•°åˆ—>1-3. æ— é™æµ(æ–æ³¢é‚£å¥‘æ•°åˆ—)</h4><ul><li>iterateï¼šä½¿ç”¨iterateçš„æ–¹æ³•åˆ™æ˜¯çº¯ç²¹ä¸å˜çš„ï¼šå®ƒæ²¡æœ‰ä¿®æ”¹ç°æœ‰çŠ¶æ€ï¼Œä½†åœ¨æ¯æ¬¡è¿­ä»£æ—¶ä¼šåˆ›å»ºæ–°çš„å…ƒç»„</li></ul><div class=highlight id=id-3><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>iterate</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{</span>0<span style=color:#f92672>,</span> 1<span style=color:#f92672>},</span> 
</span></span><span style=display:flex><span> 	t <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{</span>t<span style=color:#f92672>[</span>1<span style=color:#f92672>],</span>t<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> t<span style=color:#f92672>[</span>1<span style=color:#f92672>]})</span> 
</span></span><span style=display:flex><span>		 <span style=color:#f92672>.</span><span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span>10<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> 		<span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>t <span style=color:#f92672>-&gt;</span> t<span style=color:#f92672>[</span>0<span style=color:#f92672>])</span> 
</span></span><span style=display:flex><span> 		<span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//è¿™æ®µä»£ç å°†ç”Ÿæˆæ–æ³¢çº³å¥‘æ•°åˆ—ï¼š0, 1, 1, 2, 3, 5, 8, 13, 21, 34â€¦
</span></span></span></code></pre></div><ul><li>generateï¼šgetAsInt()åœ¨è°ƒç”¨æ—¶ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œç”±æ­¤åœ¨æ¯æ¬¡è°ƒç”¨æ—¶äº§ç”Ÿæ–°çš„å€¼</li></ul><div class=highlight id=id-4><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>IntSupplier fib <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> IntSupplier<span style=color:#f92672>(){</span> 
</span></span><span style=display:flex><span> 	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> previous <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> 	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> current <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> 	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAsInt</span><span style=color:#f92672>(){</span> 
</span></span><span style=display:flex><span>		 <span style=color:#66d9ef>int</span> oldPrevious <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>previous</span><span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>		 <span style=color:#66d9ef>int</span> nextValue <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>previous</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>current</span><span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> 		<span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>previous</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>current</span><span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>		 <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>current</span> <span style=color:#f92672>=</span> nextValue<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> 		<span style=color:#66d9ef>return</span> oldPrevious<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>	 <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>};</span> 
</span></span><span style=display:flex><span>IntStream<span style=color:#f92672>.</span><span style=color:#a6e22e>generate</span><span style=color:#f92672>(</span>fib<span style=color:#f92672>).</span><span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span>10<span style=color:#f92672>).</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span></span></span></code></pre></div><h4 id=1-4-reduce>1-4. reduce</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16:39:44-image-20210525163942956.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:12:11-image-20210525171210707.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=1-5-æ”¶é›†å™¨>1-5. æ”¶é›†å™¨</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17:43:17-image-20210526174316198.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:11:55-image-20210526181128897.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h5 id=collectoræ¥å£>Collectoræ¥å£</h5><div class=highlight id=id-5><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//Tæ˜¯æµä¸­è¦æ”¶é›†çš„é¡¹ç›®çš„æ³›å‹ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Aæ˜¯ç´¯åŠ å™¨çš„ç±»å‹ï¼Œç´¯åŠ å™¨æ˜¯åœ¨æ”¶é›†è¿‡ç¨‹ä¸­ç”¨äºç´¯ç§¯éƒ¨åˆ†ç»“æœçš„å¯¹è±¡ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Ræ˜¯æ”¶é›†æ“ä½œå¾—åˆ°çš„å¯¹è±¡ï¼ˆé€šå¸¸ä½†å¹¶ä¸ä¸€å®šæ˜¯é›†åˆï¼‰çš„ç±»å‹ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Collector</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> A<span style=color:#f92672>,</span> R<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> Supplier<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>supplier</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> BiConsumer<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>,</span> T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>accumulator</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> Function<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>,</span> R<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>finisher</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> BinaryOperator<span style=color:#f92672>&lt;</span>A<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>combiner</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> Set<span style=color:#f92672>&lt;</span>Characteristics<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>characteristics</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><h5 id=è‡ªå·±å®ç°æ”¶é›†å™¨>è‡ªå·±å®ç°æ”¶é›†å™¨</h5><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/18:04:26-image-20210528180424599.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><code>List&lt;Dish> dishes = menuStream.collect(new ToListCollector&lt;Dish>());</code></p><h3 id=2-ç”¨-optional-å–ä»£-null>â˜…2. ç”¨ Optional å–ä»£ null</h3><p><strong>nullçš„æ£€æŸ¥åªä¼šæ©ç›–é—®é¢˜ï¼Œå¹¶æœªçœŸæ­£åœ°ä¿®å¤é—®é¢˜</strong></p><div class=highlight id=id-6><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//1. å£°æ˜ä¸€ä¸ªç©ºçš„Optional
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Car<span style=color:#f92672>&gt;</span> optCar <span style=color:#f92672>=</span> Optional<span style=color:#f92672>.</span><span style=color:#a6e22e>empty</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//2. ä¾æ®ä¸€ä¸ªéç©ºå€¼åˆ›å»ºOptional
</span></span></span><span style=display:flex><span><span style=color:#75715e>//å¦‚æœcaræ˜¯ä¸€ä¸ªnullï¼Œè¿™æ®µä»£ç ä¼šç«‹å³æŠ›å‡ºä¸€ä¸ªNullPointerException
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Car<span style=color:#f92672>&gt;</span> optCar <span style=color:#f92672>=</span> Optional<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>car<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//3. å¯æ¥å—nullçš„Optional
</span></span></span><span style=display:flex><span><span style=color:#75715e>//å¦‚æœcaræ˜¯nullï¼Œé‚£ä¹ˆå¾—åˆ°çš„Optionalå¯¹è±¡å°±æ˜¯ä¸ªç©ºå¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Car<span style=color:#f92672>&gt;</span> optCar <span style=color:#f92672>=</span> Optional<span style=color:#f92672>.</span><span style=color:#a6e22e>ofNullable</span><span style=color:#f92672>(</span>car<span style=color:#f92672>);</span></span></span></code></pre></div><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-12-52-image-20210604111250644.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-13-40-image-20210604111339606.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><div class=highlight id=id-7><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getCarInsuranceName</span><span style=color:#f92672>(</span>Optional<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> person<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> person<span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>Person<span style=color:#f92672>::</span>getCar<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>Car<span style=color:#f92672>::</span>getInsurance<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Insurance<span style=color:#f92672>::</span>getName<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Unknown&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>//å¦‚æœOptionalçš„ç»“æœå€¼ä¸ºç©ºï¼Œè®¾ç½®é»˜è®¤å€¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span></span></span></code></pre></div><p>Optional é€šè¿‡ç±»å‹ç³»ç»Ÿè®©ä½ çš„åŸŸæ¨¡å‹ä¸­éšè—çš„çŸ¥è¯†æ˜¾å¼åœ°ä½“ç°åœ¨ä½ çš„ä»£ç ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œä½ æ°¸è¿œéƒ½ä¸åº”è¯¥å¿˜è®°è¯­è¨€çš„é¦–è¦åŠŸèƒ½å°±æ˜¯æ²Ÿé€šï¼Œå³ä½¿å¯¹ç¨‹åºè®¾è®¡è¯­è¨€è€Œè¨€ä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚å£°æ˜æ–¹æ³•æ¥å—ä¸€ä¸ªOptionalå‚æ•°ï¼Œæˆ–è€…å°†ç»“æœä½œä¸ºOptionalç±»å‹è¿”å›ï¼Œè®©ä½ çš„åŒäº‹æˆ–è€…æœªæ¥ä½ æ–¹æ³•çš„ä½¿ç”¨è€…ï¼Œå¾ˆæ¸…æ¥šåœ°çŸ¥é“å®ƒå¯ä»¥æ¥å—ç©ºå€¼ï¼Œæˆ–è€…å®ƒå¯èƒ½è¿”å›ä¸€ä¸ªç©ºå€¼ã€‚</p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-19-02-image-20210604111901795.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=2-1-optional-çš„æ–¹æ³•>2-1. Optional çš„æ–¹æ³•</h4><ul><li>get()ï¼šå¦‚æœå˜é‡å­˜åœ¨ï¼Œå®ƒç›´æ¥è¿”å›å°è£…çš„å˜é‡å€¼ï¼Œå¦åˆ™å°±æŠ›å‡ºä¸€ä¸ªNoSuchElementExceptionå¼‚å¸¸</li><li>orElse(T other)ï¼šå…è®¸ä½ åœ¨Optionalå¯¹è±¡ä¸åŒ…å«å€¼æ—¶æä¾›ä¸€ä¸ªé»˜è®¤å€¼</li><li>orElseGet(Supplier&lt;? extends T> other)ï¼šæ˜¯orElseæ–¹æ³•çš„å»¶è¿Ÿè°ƒç”¨ç‰ˆï¼ŒSupplier æ–¹æ³•åªæœ‰åœ¨Optionalå¯¹è±¡ä¸å«å€¼æ—¶æ‰æ‰§è¡Œè°ƒç”¨ã€‚å¦‚æœåˆ›å»ºé»˜è®¤å€¼æ˜¯ä»¶è€—æ—¶è´¹åŠ›çš„å·¥ä½œï¼Œä½ åº”è¯¥è€ƒè™‘é‡‡ç”¨è¿™ç§æ–¹å¼ï¼ˆå€Ÿæ­¤æå‡ç¨‹åºçš„æ€§èƒ½ï¼‰ï¼Œæˆ–è€…ä½ éœ€è¦éå¸¸ç¡®å®šæŸä¸ªæ–¹æ³•ä»…åœ¨Optionalä¸ºç©ºæ—¶æ‰è¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘è¯¥æ–¹å¼ï¼ˆè¿™ç§æƒ…å†µæœ‰ä¸¥æ ¼çš„é™åˆ¶æ¡ä»¶ï¼‰ã€‚</li><li>orElseThrow(Supplier&lt;? extends X> exceptionSupplier)ï¼šè‡ªå®šä¹‰æŠ›å‡ºå¼‚å¸¸</li><li>ifPresent(Consumer&lt;? super T>)ï¼šèƒ½åœ¨å˜é‡å€¼å­˜åœ¨æ—¶æ‰§è¡Œä¸€ä¸ªä½œä¸ºå‚æ•°ä¼ å…¥çš„æ–¹æ³•ï¼Œå¦åˆ™å°±ä¸è¿›è¡Œä»»ä½•æ“ä½œã€‚</li></ul><p>ä¸æ¨èä½¿ç”¨åŸºç¡€ç±»å‹çš„Optionalï¼Œå› ä¸ºåŸºç¡€ç±»å‹çš„Optionalä¸æ”¯æŒmapã€flatMapä»¥åŠfilteræ–¹æ³•ï¼Œè€Œè¿™äº›å´æ˜¯Optionalç±»æœ€æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><h4 id=2-2-å®æˆ˜æ¡ˆä¾‹>2-2. å®æˆ˜æ¡ˆä¾‹</h4><div class=highlight id=id-8><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ Optional å‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>readDuration</span><span style=color:#f92672>(</span>Properties props<span style=color:#f92672>,</span> String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> String value <span style=color:#f92672>=</span> props<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>value <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>value<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>i <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> i<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>NumberFormatException nfe<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> 0<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ Optional å
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>readDuration</span><span style=color:#f92672>(</span>Properties props<span style=color:#f92672>,</span> String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> Optional<span style=color:#f92672>.</span><span style=color:#a6e22e>ofNullable</span><span style=color:#f92672>(</span>props<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>name<span style=color:#f92672>))</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>OptionalUtility<span style=color:#f92672>::</span>stringToInt<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>i <span style=color:#f92672>-&gt;</span> i <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><h3 id=3-å†…éƒ¨è¿­ä»£>3. å†…éƒ¨è¿­ä»£</h3><ul><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:54-image-20210524111153440.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li><li><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11:11:33-image-20210524111132647.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></li></ul><h2 id=ä¸‰é«˜æ•ˆ-java-8-ç¼–ç¨‹>ä¸‰ã€é«˜æ•ˆ Java 8 ç¼–ç¨‹</h2><h3 id=1-å„ç‰ˆæœ¬å˜åŒ–>1. å„ç‰ˆæœ¬å˜åŒ–</h3><ul><li>Java 5ï¼šå¼•å…¥ for-each å¾ªç¯ï¼Œæ›¿ä»£è¿­ä»£å™¨</li><li>Java 7ï¼šå¼•å…¥è±å½¢æ“ä½œç¬¦&lt;>ï¼Œä½¿ç”¨èŒƒå‹</li><li>Java 8ï¼šlambdaè¡¨è¾¾å¼ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œè®©è®¾è®¡æ¨¡å¼æ›´çµæ´»</li></ul><h3 id=2-è®¾è®¡æ¨¡å¼>ğŸŒŸ2. è®¾è®¡æ¨¡å¼</h3><h4 id=2-1-ç­–ç•¥æ¨¡å¼>2-1. ç­–ç•¥æ¨¡å¼</h4><p>åœºæ™¯ï¼šæ ¹æ®ä¸åŒæ¡ä»¶è¿›è¡Œç­›é€‰ã€‚</p><ul><li>æŸç®—æ³•çš„æ¥å£</li><li>æ¥å£çš„å¤šç§å®ç°</li><li>ç­–ç•¥å¯¹è±¡çš„å®¢æˆ·</li></ul><div class=highlight id=id-9><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ValidationStrategy</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IsAllLowerCase</span> <span style=color:#66d9ef>implements</span> ValidationStrategy <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>matches</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[a-z]+&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IsNumeric</span> <span style=color:#66d9ef>implements</span> ValidationStrategy <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>matches</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\d+&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Validator</span><span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> ValidationStrategy strategy<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Validator</span><span style=color:#f92672>(</span>ValidationStrategy v<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>strategy</span> <span style=color:#f92672>=</span> v<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>validate</span><span style=color:#f92672>(</span>String s<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> strategy<span style=color:#f92672>.</span><span style=color:#a6e22e>execute</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span>Validator numericValidator <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Validator<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> IsNumeric<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> b1 <span style=color:#f92672>=</span> numericValidator<span style=color:#f92672>.</span><span style=color:#a6e22e>validate</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;aaaa&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>//FALSE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Validator lowerCaseValidator <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Validator<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> IsAllLowerCase <span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> b2 <span style=color:#f92672>=</span> lowerCaseValidator<span style=color:#f92672>.</span><span style=color:#a6e22e>validate</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bbbb&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>//TRUE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Validator numericValidator <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> Validator<span style=color:#f92672>((</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>matches</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;[a-z]+&#34;</span><span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> b1 <span style=color:#f92672>=</span> numericValidator<span style=color:#f92672>.</span><span style=color:#a6e22e>validate</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;aaaa&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>Validator lowerCaseValidator <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> Validator<span style=color:#f92672>((</span>String s<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>matches</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\d+&#34;</span><span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> b2 <span style=color:#f92672>=</span> lowerCaseValidator<span style=color:#f92672>.</span><span style=color:#a6e22e>validate</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bbbb&#34;</span><span style=color:#f92672>);</span></span></span></code></pre></div><h4 id=2-2-æ¨¡æ¿æ–¹æ³•>2-2. æ¨¡æ¿æ–¹æ³•</h4><p>åœºæ™¯ï¼šéœ€è¦é‡‡ç”¨æŸä¸ªç®—æ³•çš„æ¡†æ¶ï¼ŒåŒæ—¶åˆå¸Œæœ›æœ‰ä¸€å®šçš„çµæ´»åº¦ï¼Œèƒ½å¯¹å®ƒçš„æŸäº›éƒ¨åˆ†è¿›è¡Œæ”¹è¿›ã€‚</p><div class=highlight id=id-10><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OnlineBanking</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>processCustomer</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> id<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> Customer c <span style=color:#f92672>=</span> Database<span style=color:#f92672>.</span><span style=color:#a6e22e>getCustomerWithId</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> makeCustomerHappy<span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>makeCustomerHappy</span><span style=color:#f92672>(</span>Customer c<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>processCustomer</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> id<span style=color:#f92672>,</span> Consumer<span style=color:#f92672>&lt;</span>Customer<span style=color:#f92672>&gt;</span> makeCustomerHappy<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> Customer c <span style=color:#f92672>=</span> Database<span style=color:#f92672>.</span><span style=color:#a6e22e>getCustomerWithId</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> makeCustomerHappy<span style=color:#f92672>.</span><span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>processCustomer</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> id<span style=color:#f92672>,</span> Consumer<span style=color:#f92672>&lt;</span>Customer<span style=color:#f92672>&gt;</span> makeCustomerHappy<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> Customer c <span style=color:#f92672>=</span> Database<span style=color:#f92672>.</span><span style=color:#a6e22e>getCustomerWithId</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> makeCustomerHappy<span style=color:#f92672>.</span><span style=color:#a6e22e>accept</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>new</span> OnlineBankingLambda<span style=color:#f92672>().</span><span style=color:#a6e22e>processCustomer</span><span style=color:#f92672>(</span>1337<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>Customer c<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> 
</span></span><span style=display:flex><span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello &#34;</span> <span style=color:#f92672>+</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span></span></span></code></pre></div><h4 id=2-3-è§‚å¯Ÿè€…æ¨¡å¼>2-3. è§‚å¯Ÿè€…æ¨¡å¼</h4><p>åœºæ™¯ï¼šæŸäº›äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚çŠ¶æ€è½¬å˜ï¼‰ï¼Œsubjectéœ€è¦è‡ªåŠ¨åœ°é€šçŸ¥å…¶ä»–observerã€‚</p><ul><li>subjectï¼šä¸»é¢˜</li><li>observerï¼šè§‚å¯Ÿè€…</li></ul><div class=highlight id=id-11><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Observer</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NYTimes</span> <span style=color:#66d9ef>implements</span> Observer<span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>tweet <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> tweet<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;money&#34;</span><span style=color:#f92672>)){</span> 
</span></span><span style=display:flex><span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Breaking news in NY! &#34;</span> <span style=color:#f92672>+</span> tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Guardian</span> <span style=color:#66d9ef>implements</span> Observer<span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>tweet <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> tweet<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;queen&#34;</span><span style=color:#f92672>)){</span> 
</span></span><span style=display:flex><span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Yet another news in London... &#34;</span> <span style=color:#f92672>+</span> tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Subject</span><span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span>Observer o<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Feed</span> <span style=color:#66d9ef>implements</span> Subject<span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> List<span style=color:#f92672>&lt;</span>Observer<span style=color:#f92672>&gt;</span> observers <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span>Observer o<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>observers</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>o<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> observers<span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> o<span style=color:#f92672>.</span><span style=color:#a6e22e>notify</span><span style=color:#f92672>(</span>tweet<span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Feed f <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Feed<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> NYTimes<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Guardian<span style=color:#f92672>());</span> <span style=color:#75715e>//observe â†“â†“â†“
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;The queen said her favourite book is Java 8 in Action!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//è¾“å‡ºï¼š
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Yet another news in London...  
</span></span></span><span style=display:flex><span><span style=color:#75715e>//The queen said her favourite book is Java 8 in Action!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>// ç®€åŒ–äº†è§‚å¯Ÿè€…çš„ä»£ç 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Subject</span><span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span>Observer o<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Feed</span> <span style=color:#66d9ef>implements</span> Subject<span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> List<span style=color:#f92672>&lt;</span>Observer<span style=color:#f92672>&gt;</span> observers <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>(</span>Observer o<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>observers</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>o<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> observers<span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>o <span style=color:#f92672>-&gt;</span> o<span style=color:#f92672>.</span><span style=color:#a6e22e>notify</span><span style=color:#f92672>(</span>tweet<span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Feed f <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Feed<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>((</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>tweet <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> tweet<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;money&#34;</span><span style=color:#f92672>)){</span> 
</span></span><span style=display:flex><span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Breaking news in NY! &#34;</span> <span style=color:#f92672>+</span> tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>});</span> 
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>registerObserver</span><span style=color:#f92672>((</span>String tweet<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>tweet <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> tweet<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;queen&#34;</span><span style=color:#f92672>)){</span> 
</span></span><span style=display:flex><span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Yet another news in London... &#34;</span> <span style=color:#f92672>+</span> tweet<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>.</span><span style=color:#a6e22e>notifyObservers</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;The queen said her favourite book is Java 8 in Action!&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//è¾“å‡ºï¼š
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Yet another news in London...  
</span></span></span><span style=display:flex><span><span style=color:#75715e>//The queen said her favourite book is Java 8 in Action!
</span></span></span></code></pre></div><h4 id=2-4-è´£ä»»é“¾æ¨¡å¼>2-4. è´£ä»»é“¾æ¨¡å¼</h4><p>åœºæ™¯ï¼šåˆ›å»ºå¤„ç†å¯¹è±¡åºåˆ—ï¼ˆæ¯”å¦‚æ“ä½œåºåˆ—ï¼‰</p><ul><li>å®šä¹‰ä¸€ä¸ªä»£è¡¨å¤„ç†å¯¹è±¡çš„æŠ½è±¡ç±»</li></ul><div class=highlight id=id-12><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProcessingObject</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>protected</span> ProcessingObject<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> successor<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setSuccessor</span><span style=color:#f92672>(</span>ProcessingObject<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> successor<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>successor</span> <span style=color:#f92672>=</span> successor<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> T <span style=color:#a6e22e>handle</span><span style=color:#f92672>(</span>T input<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> T r <span style=color:#f92672>=</span> handleWork<span style=color:#f92672>(</span>input<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>successor <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> successor<span style=color:#f92672>.</span><span style=color:#a6e22e>handle</span><span style=color:#f92672>(</span>r<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> r<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>protected</span> T <span style=color:#a6e22e>handleWork</span><span style=color:#f92672>(</span>T input<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HeaderTextProcessing</span> <span style=color:#66d9ef>extends</span> ProcessingObject<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleWork</span><span style=color:#f92672>(</span>String text<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;From Raoul, Mario and Alan: &#34;</span> <span style=color:#f92672>+</span> text<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpellCheckerProcessing</span> <span style=color:#66d9ef>extends</span> ProcessingObject<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleWork</span><span style=color:#f92672>(</span>String text<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> text<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceAll</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;labda&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;lambda&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>ProcessingObject<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> p1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HeaderTextProcessing<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>ProcessingObject<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> p2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SpellCheckerProcessing<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>p1<span style=color:#f92672>.</span><span style=color:#a6e22e>setSuccessor</span><span style=color:#f92672>(</span>p2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>String result <span style=color:#f92672>=</span> p1<span style=color:#f92672>.</span><span style=color:#a6e22e>handle</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Aren&#39;t labdas really sexy?!!&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>result<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>UnaryOperator<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> headerProcessing <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>(</span>String text<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;From Raoul, Mario and Alan: &#34;</span> <span style=color:#f92672>+</span> text<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>UnaryOperator<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> spellCheckerProcessing <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>(</span>String text<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> text<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceAll</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;labda&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;lambda&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>Function<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> String<span style=color:#f92672>&gt;</span> pipeline <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> headerProcessing<span style=color:#f92672>.</span><span style=color:#a6e22e>andThen</span><span style=color:#f92672>(</span>spellCheckerProcessing<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>String result <span style=color:#f92672>=</span> pipeline<span style=color:#f92672>.</span><span style=color:#a6e22e>apply</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Aren&#39;t labdas really sexy?!!&#34;</span><span style=color:#f92672>);</span></span></span></code></pre></div><h4 id=2-5-å·¥å‚æ¨¡å¼>2-5. å·¥å‚æ¨¡å¼</h4><p>åœºæ™¯ï¼šæ— éœ€å‘å®¢æˆ·æš´éœ²å®ä¾‹åŒ–çš„é€»è¾‘å°±èƒ½å®Œæˆå¯¹è±¡çš„åˆ›å»º</p><div class=highlight id=id-13><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ä¸ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductFactory</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Product <span style=color:#a6e22e>createProduct</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>switch</span><span style=color:#f92672>(</span>name<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;loan&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Loan<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;stock&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Stock<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;bond&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Bond<span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;No such product &#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Product p <span style=color:#f92672>=</span> ProductFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>createProduct</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;loan&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ä½¿ç”¨ Lambda è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Supplier<span style=color:#f92672>&lt;</span>Product<span style=color:#f92672>&gt;</span> loanSupplier <span style=color:#f92672>=</span> Loan<span style=color:#f92672>::</span><span style=color:#66d9ef>new</span><span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>Loan loan <span style=color:#f92672>=</span> loanSupplier<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>final</span> <span style=color:#66d9ef>static</span> Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Supplier<span style=color:#f92672>&lt;</span>Product<span style=color:#f92672>&gt;&gt;</span> map <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;();</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> map<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;loan&#34;</span><span style=color:#f92672>,</span> Loan<span style=color:#f92672>::</span><span style=color:#66d9ef>new</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> map<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;stock&#34;</span><span style=color:#f92672>,</span> Stock<span style=color:#f92672>::</span><span style=color:#66d9ef>new</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> map<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;bond&#34;</span><span style=color:#f92672>,</span> Bond<span style=color:#f92672>::</span><span style=color:#66d9ef>new</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Product <span style=color:#a6e22e>createProduct</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> Supplier<span style=color:#f92672>&lt;</span>Product<span style=color:#f92672>&gt;</span> p <span style=color:#f92672>=</span> map<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>name<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>p <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>return</span> p<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;No such product &#34;</span> <span style=color:#f92672>+</span> name<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><h3 id=3-peekæŸ¥çœ‹ä¸­é—´å€¼>3. peekæŸ¥çœ‹ä¸­é—´å€¼</h3><div class=highlight id=id-14><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> numbers <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>peek</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;from stream: &#34;</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> x <span style=color:#f92672>+</span> 17<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>peek</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;after map: &#34;</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>))</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> x <span style=color:#f92672>%</span> 2 <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>peek</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;after filter: &#34;</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>peek</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;after limit: &#34;</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>è¾“å‡ºï¼š
</span></span></span><span style=display:flex><span><span style=color:#75715e>from stream: 2 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after map: 19 
</span></span></span><span style=display:flex><span><span style=color:#75715e>from stream: 3 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after map: 20 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after filter: 20 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after limit: 20 
</span></span></span><span style=display:flex><span><span style=color:#75715e>from stream: 4 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after map: 21 
</span></span></span><span style=display:flex><span><span style=color:#75715e>from stream: 5 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after map: 22 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after filter: 22 
</span></span></span><span style=display:flex><span><span style=color:#75715e>after limit: 22
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span></span></span></code></pre></div><h3 id=4-æ¥å£çš„é»˜è®¤æ–¹æ³•>â˜…4. æ¥å£çš„é»˜è®¤æ–¹æ³•</h3><div class=highlight id=id-15><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Sized</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isEmpty</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> size<span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><h4 id=4-1-ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜>4-1. ç»§æ‰¿å’Œå®ç°å†²çªçš„é—®é¢˜</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/09-57-00-image-20210603095658607.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=4-2-ä¸‰æ¡è§„åˆ™>4-2. ä¸‰æ¡è§„åˆ™</h4><ol><li>é¦–å…ˆï¼Œç±»æˆ–çˆ¶ç±»ä¸­æ˜¾å¼å£°æ˜çš„æ–¹æ³•ï¼Œå…¶ä¼˜å…ˆçº§é«˜äºæ‰€æœ‰çš„é»˜è®¤æ–¹æ³•ã€‚</li><li>å¦‚æœç”¨ç¬¬ä¸€æ¡æ— æ³•åˆ¤æ–­ï¼Œæ–¹æ³•ç­¾ååˆæ²¡æœ‰åŒºåˆ«ï¼Œé‚£ä¹ˆé€‰æ‹©æä¾›æœ€å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•çš„æ¥å£ã€‚å‡½æ•°ç­¾åç›¸åŒæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©æ‹¥æœ‰æœ€å…·ä½“å®ç°çš„é»˜è®¤æ–¹æ³•çš„æ¥å£ï¼Œå³å¦‚æœBç»§æ‰¿äº†Aï¼Œé‚£ä¹ˆBå°±æ¯”Aæ›´åŠ å…·ä½“ã€‚</li><li>æœ€åï¼Œå¦‚æœå†²çªä¾æ—§æ— æ³•è§£å†³ï¼Œç»§æ‰¿äº†å¤šä¸ªæ¥å£çš„ç±»å¿…é¡»é€šè¿‡æ˜¾å¼è¦†ç›–å’Œè°ƒç”¨æœŸæœ›çš„æ–¹æ³•ï¼Œæ˜¾å¼åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªé»˜è®¤æ–¹æ³•çš„å®ç°ã€‚</li></ol><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/10-00-55-image-20210603100054651.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=5-ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹>5. ç»„åˆå¼å¼‚æ­¥ç¼–ç¨‹</h3><h4 id=5-1-å¹¶å‘ä¸å¹¶è¡Œ>5-1. å¹¶å‘ä¸å¹¶è¡Œ</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/15-56-55-image-20210604155653142.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=5-2-future---completablefuture>â˜…5-2. Future -> Â CompletableFuture</h4><p>Streamå’ŒCompletableFutureçš„è®¾è®¡éƒ½éµå¾ªäº†ç±»ä¼¼çš„æ¨¡å¼ï¼šå®ƒä»¬éƒ½ä½¿ç”¨äº†Lambdaè¡¨è¾¾å¼ä»¥åŠæµæ°´çº¿çš„æ€æƒ³ã€‚ä»è¿™ä¸ªè§’åº¦ï¼Œä½ å¯ä»¥è¯´ CompletableFutureå’ŒFutureçš„å…³ç³»å°±è·ŸStreamå’ŒCollectionçš„å…³ç³»ä¸€æ ·ã€‚</p><ul><li>Collectionä¸»è¦æ˜¯ä¸ºäº†å­˜å‚¨å’Œè®¿é—®æ•°æ®ï¼Œè€ŒStreamåˆ™ä¸»è¦ç”¨äºæè¿°å¯¹æ•°æ®çš„è®¡ç®—</li><li>é€šè¿‡Streamä½ å¯ä»¥å¯¹ä¸€ç³»åˆ—çš„æ“ä½œè¿›è¡Œæµæ°´çº¿ï¼Œé€šè¿‡mapã€filteræˆ–è€…å…¶ä»–ç±»ä¼¼çš„æ–¹æ³•æä¾›è¡Œä¸ºå‚æ•°åŒ–ï¼Œå®ƒå¯æœ‰æ•ˆé¿å…ä½¿ç”¨è¿­ä»£å™¨æ—¶æ€»æ˜¯å‡ºç°æ¨¡æ¿ä»£ç ã€‚</li><li>ç±»ä¼¼åœ°ï¼ŒCompletableFutureæä¾›äº†åƒthenComposeã€thenCombineã€allOfè¿™æ ·çš„æ“ä½œï¼Œå¯¹Futureæ¶‰åŠçš„é€šç”¨è®¾è®¡æ¨¡å¼æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œæœ‰åŠ©äºé¿å…ä½¿ç”¨å‘½ä»¤å¼ç¼–ç¨‹çš„æ¨¡æ¿ä»£ç ã€‚</li></ul><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-25-55-image-20210607112553439.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h5 id=å®ä¾‹>å®ä¾‹</h5><div class=highlight id=id-16><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>Shop<span style=color:#f92672>&gt;</span> shops <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Shop<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;BestPrice&#34;</span><span style=color:#f92672>),</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> Shop<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;LetsSaveBig&#34;</span><span style=color:#f92672>),</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> Shop<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;MyFavoriteShop&#34;</span><span style=color:#f92672>),</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> Shop<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;BuyItAll&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 1. é¡ºåºæŸ¥è¯¢ è€—æ—¶ 4032ms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findPrices</span><span style=color:#f92672>(</span>String product<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> shops<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>shop <span style=color:#f92672>-&gt;</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s price is %.2f&#34;</span><span style=color:#f92672>,</span> 
</span></span><span style=display:flex><span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>)))</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. å¹¶è¡Œæµ è€—æ—¶ 1180ms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findPrices</span><span style=color:#f92672>(</span>String product<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> shops<span style=color:#f92672>.</span><span style=color:#a6e22e>parallelStream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>shop <span style=color:#f92672>-&gt;</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s price is %.2f&#34;</span><span style=color:#f92672>,</span> 
</span></span><span style=display:flex><span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>)))</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>// 3. ä½¿ç”¨å·¥å‚æ–¹æ³•supplyAsyncåˆ›å»ºCompletableFutureå¯¹è±¡ è€—æ—¶ 2005ms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>List<span style=color:#f92672>&lt;</span>CompletableFuture<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;&gt;</span> priceFutures <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> shops<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>shop <span style=color:#f92672>-&gt;</span> CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span> 	<span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%s price is %.2f&#34;</span><span style=color:#f92672>,</span> 
</span></span><span style=display:flex><span> 	shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>))))</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> priceFutures<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>CompletableFuture<span style=color:#f92672>::</span>join<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//å¤„ç†5ä¸ªå•†åº—ï¼Œé¡ºåºæ‰§è¡Œç‰ˆæœ¬è€—æ—¶5025msï¼Œå¹¶è¡Œæµç‰ˆæœ¬è€—æ—¶2177msï¼Œè€ŒCompletableFutureç‰ˆæœ¬è€—æ—¶2006ms
</span></span></span><span style=display:flex><span><span style=color:#75715e>//å¤„ç†9ä¸ªå•†åº—ï¼Œå¹¶è¡Œæµç‰ˆæœ¬è€—æ—¶3143msï¼Œè€ŒCompletableFutureç‰ˆæœ¬è€—æ—¶3009ms
</span></span></span></code></pre></div><p>è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„Streamæµæ°´çº¿ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€ä¸ªå¤„ç†æµçš„æµæ°´çº¿ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ä¸¤ä¸ªmapæ“ä½œâ€”â€”è¿™å…¶å®æ˜¯æœ‰ç¼˜ç”±çš„ã€‚è€ƒè™‘æµæ“ä½œä¹‹é—´çš„å»¶è¿Ÿç‰¹æ€§ï¼Œå¦‚æœä½ åœ¨å•ä¸€æµæ°´çº¿ä¸­å¤„ç†æµï¼Œå‘å‘ä¸åŒå•†å®¶çš„è¯·æ±‚åªèƒ½ä»¥åŒæ­¥ã€é¡ºåºæ‰§è¡Œçš„æ–¹å¼æ‰ä¼šæˆåŠŸã€‚å› æ­¤ï¼Œæ¯ä¸ªåˆ›å»ºCompletableFutureå¯¹è±¡åªèƒ½åœ¨å‰ä¸€ä¸ªæ“ä½œç»“æŸä¹‹åæ‰§è¡ŒæŸ¥è¯¢æŒ‡å®šå•†å®¶çš„åŠ¨ä½œã€é€šçŸ¥joinæ–¹æ³•è¿”å›è®¡ç®—ç»“æœã€‚</p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-47-37-image-20210607114736726.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=5-3-ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨>5-3. ä½¿ç”¨å®šåˆ¶çš„æ‰§è¡Œå™¨</h4><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/11-54-12-image-20210607115411413.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><div class=highlight id=id-17><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Executor executor <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> Executors<span style=color:#f92672>.</span><span style=color:#a6e22e>newFixedThreadPool</span><span style=color:#f92672>(</span>Math<span style=color:#f92672>.</span><span style=color:#a6e22e>min</span><span style=color:#f92672>(</span>shops<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>(),</span> 100<span style=color:#f92672>),</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>new</span> ThreadFactory<span style=color:#f92672>()</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> 	<span style=color:#66d9ef>public</span> Thread <span style=color:#a6e22e>newThread</span><span style=color:#f92672>(</span>Runnable r<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> 	Thread t <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread<span style=color:#f92672>(</span>r<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>     <span style=color:#75715e>//ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹â€”â€”è¿™ç§æ–¹å¼ä¸ä¼šé˜»æ­¢ç¨‹åºçš„å…³åœ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 t<span style=color:#f92672>.</span><span style=color:#a6e22e>setDaemon</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>	 <span style=color:#66d9ef>return</span> t<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>});</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//æ”¹è¿›ä¹‹åï¼Œä½¿ç”¨CompletableFutureæ–¹æ¡ˆçš„ç¨‹åºå¤„ç†5ä¸ªå•†åº—ä»…è€—æ—¶1021msï¼Œå¤„ç†9ä¸ªå•†åº—æ—¶è€—æ—¶1022msã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; price is &#34;</span> <span style=color:#f92672>+</span> 
</span></span><span style=display:flex><span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>),</span> executor<span style=color:#f92672>);</span></span></span></code></pre></div><h5 id=å®ˆæŠ¤è¿›ç¨‹>å®ˆæŠ¤è¿›ç¨‹</h5><p>Javaç¨‹åºæ— æ³•ç»ˆæ­¢æˆ–è€…é€€å‡ºä¸€ä¸ªæ­£åœ¨è¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œæ‰€ä»¥æœ€åå‰©ä¸‹çš„é‚£ä¸ªçº¿ç¨‹ä¼šç”±äºä¸€ç›´ç­‰å¾…æ— æ³•å‘ç”Ÿçš„äº‹ä»¶è€Œå¼•å‘é—®é¢˜ã€‚ä¸æ­¤ç›¸åï¼Œå¦‚æœå°†çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ„å‘³ç€ç¨‹åºé€€å‡ºæ—¶å®ƒä¹Ÿä¼šè¢«å›æ”¶</p><h4 id=5-4-completablefuture-ä¸-parallelstream-çš„é€‰æ‹©>5-4. CompletableFuture ä¸ parallelStream çš„é€‰æ‹©</h4><ul><li>å¦‚æœä½ è¿›è¡Œçš„æ˜¯è®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰I/Oï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨Streamæ¥å£ï¼Œå› ä¸ºå®ç°ç®€å•ï¼ŒåŒæ—¶æ•ˆç‡ä¹Ÿå¯èƒ½æ˜¯æœ€é«˜çš„ï¼ˆå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯è®¡ç®—å¯†é›†å‹çš„ï¼Œé‚£å°±æ²¡æœ‰å¿…è¦åˆ›å»ºæ¯”å¤„ç†å™¨æ ¸æ•°æ›´å¤šçš„çº¿ç¨‹ï¼‰ã€‚</li><li>åä¹‹ï¼Œå¦‚æœä½ å¹¶è¡Œçš„å·¥ä½œå•å…ƒè¿˜æ¶‰åŠç­‰å¾…I/Oçš„æ“ä½œï¼ˆåŒ…æ‹¬ç½‘ç»œè¿æ¥ç­‰å¾…ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨CompletableFutureçµæ´»æ€§æ›´å¥½ï¼Œä½ å¯ä»¥åƒå‰æ–‡è®¨è®ºçš„é‚£æ ·ï¼Œä¾æ®ç­‰å¾…/è®¡ç®—ï¼Œæˆ–è€…W/Cçš„æ¯”ç‡è®¾å®šéœ€è¦ä½¿ç”¨çš„çº¿ç¨‹æ•°ã€‚è¿™ç§æƒ…å†µä¸ä½¿ç”¨å¹¶è¡Œæµçš„å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œå¤„ç†æµçš„æµæ°´çº¿ä¸­å¦‚æœå‘ç”ŸI/Oç­‰å¾…ï¼Œæµçš„å»¶è¿Ÿç‰¹æ€§ä¼šè®©æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­åˆ°åº•ä»€ä¹ˆæ—¶å€™è§¦å‘äº†ç­‰å¾…ã€‚</li></ul><h4 id=5-5-join-ä¸-get-æ–¹æ³•æ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ>5-5. join ä¸ get æ–¹æ³•ï¼Œæ„é€ åŒæ­¥å’Œå¼‚æ­¥æ“ä½œ</h4><p>CompletableFutureç±»ä¸­çš„joinæ–¹æ³•å’ŒFutureæ¥å£ä¸­çš„getæœ‰ç›¸åŒçš„å«ä¹‰ï¼Œå¹¶ä¸”ä¹Ÿå£°æ˜åœ¨Futureæ¥å£ä¸­ï¼Œå®ƒä»¬å”¯ä¸€çš„ä¸åŒæ˜¯joinä¸ä¼šæŠ›å‡ºä»»ä½•æ£€æµ‹åˆ°çš„å¼‚å¸¸ã€‚</p><h5 id=futurethencompose>future.thenCompose</h5><div class=highlight id=id-18><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findPrices</span><span style=color:#f92672>(</span>String product<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> List<span style=color:#f92672>&lt;</span>CompletableFuture<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;&gt;</span> priceFutures <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span> shops<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span>     <span style=color:#75715e>//1. è·å–ä»·æ ¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>shop <span style=color:#f92672>-&gt;</span> CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span>		 <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>),</span> executor<span style=color:#f92672>))</span> 
</span></span><span style=display:flex><span>     <span style=color:#75715e>//2. è§£ææŠ¥ä»·
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>future <span style=color:#f92672>-&gt;</span> future<span style=color:#f92672>.</span><span style=color:#a6e22e>thenApply</span><span style=color:#f92672>(</span>Quote<span style=color:#f92672>::</span>parse<span style=color:#f92672>))</span> 
</span></span><span style=display:flex><span>     <span style=color:#75715e>//3. ä¸ºè®¡ç®—æŠ˜æ‰£ä»·æ ¼æ„é€ Future
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>     <span style=color:#75715e>//å¦‚æœä¸å¸Œæœ›ç­‰åˆ°ç¬¬ä¸€ä¸ªä»»åŠ¡å®Œå…¨ç»“æŸæ‰å¼€å§‹ç¬¬äºŒé¡¹ä»»åŠ¡ï¼Œä½¿ç”¨thenCombineæ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>future <span style=color:#f92672>-&gt;</span> future<span style=color:#f92672>.</span><span style=color:#a6e22e>thenCompose</span><span style=color:#f92672>(</span>quote <span style=color:#f92672>-&gt;</span> 
</span></span><span style=display:flex><span>		 CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span> 			<span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> Discount<span style=color:#f92672>.</span><span style=color:#a6e22e>applyDiscount</span><span style=color:#f92672>(</span>quote<span style=color:#f92672>),</span> executor<span style=color:#f92672>)))</span> 
</span></span><span style=display:flex><span>	 <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> priceFutures<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>CompletableFuture<span style=color:#f92672>::</span>join<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//thenComposeæ–¹æ³•åƒCompletableFutureç±»ä¸­çš„å…¶ä»–æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªä»¥Asyncåç¼€ç»“å°¾çš„ç‰ˆæœ¬thenComposeAsyncã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e>//é€šå¸¸è€Œè¨€ï¼Œåç§°ä¸­ä¸å¸¦Asyncçš„æ–¹æ³•å’Œå®ƒçš„å‰ä¸€ä¸ªä»»åŠ¡ä¸€æ ·ï¼Œåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼›è€Œåç§°ä»¥Asyncç»“å°¾çš„æ–¹æ³•ä¼šå°†åç»­çš„ä»»åŠ¡æäº¤åˆ°ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ¯ä¸ªä»»åŠ¡æ˜¯ç”±ä¸åŒçš„çº¿ç¨‹å¤„ç†çš„ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e>//å°±è¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œç¬¬äºŒä¸ªCompletableFutureå¯¹è±¡çš„ç»“æœå–å†³äºç¬¬ä¸€ä¸ªCompletableFutureï¼Œæ‰€ä»¥æ— è®ºä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„æ–¹æ³•æ¥å¤„ç†CompletableFutureå¯¹è±¡ï¼Œå¯¹äºæœ€ç»ˆçš„ç»“æœï¼Œæˆ–è€…å¤§è‡´çš„æ—¶é—´è€Œè¨€éƒ½æ²¡æœ‰å¤šå°‘å·®åˆ«ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e>//æˆ‘ä»¬é€‰æ‹©thenComposeæ–¹æ³•çš„åŸå› æ˜¯å› ä¸ºå®ƒæ›´é«˜æ•ˆä¸€äº›ï¼Œå› ä¸ºå°‘äº†å¾ˆå¤šçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚
</span></span></span></code></pre></div><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/17-05-35-image-20210607170534004.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h5 id=futurethencombine>future.thenCombine</h5><div class=highlight id=id-19><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Future<span style=color:#f92672>&lt;</span>Double<span style=color:#f92672>&gt;</span> futurePriceInUSD <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> 	CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(()</span> <span style=color:#f92672>-&gt;</span> shop<span style=color:#f92672>.</span><span style=color:#a6e22e>getPrice</span><span style=color:#f92672>(</span>product<span style=color:#f92672>))</span> 
</span></span><span style=display:flex><span> 	<span style=color:#f92672>.</span><span style=color:#a6e22e>thenCombine</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span>		 CompletableFuture<span style=color:#f92672>.</span><span style=color:#a6e22e>supplyAsync</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span>			 <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> exchangeService<span style=color:#f92672>.</span><span style=color:#a6e22e>getRate</span><span style=color:#f92672>(</span>Money<span style=color:#f92672>.</span><span style=color:#a6e22e>EUR</span><span style=color:#f92672>,</span> Money<span style=color:#f92672>.</span><span style=color:#a6e22e>USD</span><span style=color:#f92672>)),</span> 
</span></span><span style=display:flex><span> 		<span style=color:#f92672>(</span>price<span style=color:#f92672>,</span> rate<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> price <span style=color:#f92672>*</span> rate 
</span></span><span style=display:flex><span> <span style=color:#f92672>);</span></span></span></code></pre></div><h3 id=6-æ–°çš„æ—¥æœŸå’Œæ—¶é—´api>6. æ–°çš„æ—¥æœŸå’Œæ—¶é—´API</h3><h4 id=6-1-localdate--localtime-å’Œ-localdatetime>6-1. LocalDate ã€ LocalTime å’Œ LocalDateTime</h4><div class=highlight id=id-20><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>LocalDate date <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 18<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>LocalDate date1 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;2014-03-18&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalTime time1 <span style=color:#f92672>=</span> LocalTime<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;13:45:20&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>LocalDateTime dt <span style=color:#f92672>=</span> LocalDateTime<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> Month<span style=color:#f92672>.</span><span style=color:#a6e22e>MARCH</span><span style=color:#f92672>,</span> 18<span style=color:#f92672>,</span> 13<span style=color:#f92672>,</span> 45<span style=color:#f92672>,</span> 20<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>LocalDate date2 <span style=color:#f92672>=</span> dt<span style=color:#f92672>.</span><span style=color:#a6e22e>toLocalDate</span><span style=color:#f92672>();</span> 
</span></span><span style=display:flex><span>LocalTime time2 <span style=color:#f92672>=</span> dt<span style=color:#f92672>.</span><span style=color:#a6e22e>toLocalTime</span><span style=color:#f92672>();</span></span></span></code></pre></div><p>Temporalæ¥å£å®šä¹‰äº†å¦‚ä½•è¯»å–å’Œæ“çºµä¸ºæ—¶é—´å»ºæ¨¡çš„å¯¹è±¡çš„å€¼ã€‚</p><h4 id=6-2-å®šä¹‰-duration-æˆ–-period>6-2. å®šä¹‰ Duration æˆ– Period</h4><p>å¾ˆè‡ªç„¶åœ°ä½ ä¼šæƒ³åˆ°ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªTemporalå¯¹è±¡ä¹‹é—´çš„durationã€‚Durationç±»çš„é™æ€å·¥å‚æ–¹æ³•betweenå°±æ˜¯ä¸ºè¿™ä¸ªç›®çš„è€Œè®¾è®¡çš„ã€‚</p><div class=highlight id=id-21><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Duration å¯¹åº” time
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Duration d1 <span style=color:#f92672>=</span> Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>between</span><span style=color:#f92672>(</span>time1<span style=color:#f92672>,</span> time2<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>Duration d2 <span style=color:#f92672>=</span> Duration<span style=color:#f92672>.</span><span style=color:#a6e22e>between</span><span style=color:#f92672>(</span>dateTime1<span style=color:#f92672>,</span> dateTime2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Period å¯¹åº” date
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Period tenDays <span style=color:#f92672>=</span> Period<span style=color:#f92672>.</span><span style=color:#a6e22e>ofDays</span><span style=color:#f92672>(</span>10<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>Period threeWeeks <span style=color:#f92672>=</span> Period<span style=color:#f92672>.</span><span style=color:#a6e22e>ofWeeks</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>Period twoYearsSixMonthsOneDay <span style=color:#f92672>=</span> Period<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span></span></span></code></pre></div><p>æˆªè‡³ç›®å‰ï¼Œæˆ‘ä»¬ä»‹ç»çš„è¿™äº›æ—¥æœŸï€­æ—¶é—´å¯¹è±¡éƒ½æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œè¿™æ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¿æŒé¢†åŸŸæ¨¡å¼ä¸€è‡´æ€§è€Œåšå‡ºçš„é‡å¤§è®¾è®¡å†³å®šã€‚</p><h4 id=6-3-æ“çºµæ—¥æœŸ>6-3. æ“çºµæ—¥æœŸ</h4><div class=highlight id=id-22><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. ç»å¯¹ä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date1 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 18<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalDate date2 <span style=color:#f92672>=</span> date1<span style=color:#f92672>.</span><span style=color:#a6e22e>withYear</span><span style=color:#f92672>(</span>2011<span style=color:#f92672>);</span> <span style=color:#75715e>//2011-03-18
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date3 <span style=color:#f92672>=</span> date2<span style=color:#f92672>.</span><span style=color:#a6e22e>withDayOfMonth</span><span style=color:#f92672>(</span>25<span style=color:#f92672>);</span> <span style=color:#75715e>//2011-03-25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date4 <span style=color:#f92672>=</span> date3<span style=color:#f92672>.</span><span style=color:#a6e22e>with</span><span style=color:#f92672>(</span>ChronoField<span style=color:#f92672>.</span><span style=color:#a6e22e>MONTH_OF_YEAR</span><span style=color:#f92672>,</span> 9<span style=color:#f92672>);</span><span style=color:#75715e>//2011-09-25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. ç›¸å¯¹ä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date1 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 18<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalDate date2 <span style=color:#f92672>=</span> date1<span style=color:#f92672>.</span><span style=color:#a6e22e>plusWeeks</span><span style=color:#f92672>(</span>1<span style=color:#f92672>);</span> <span style=color:#75715e>//2014-03-25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date3 <span style=color:#f92672>=</span> date2<span style=color:#f92672>.</span><span style=color:#a6e22e>minusYears</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span> <span style=color:#75715e>//2011-03-25
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date4 <span style=color:#f92672>=</span> date3<span style=color:#f92672>.</span><span style=color:#a6e22e>plus</span><span style=color:#f92672>(</span>6<span style=color:#f92672>,</span> ChronoUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>MONTHS</span><span style=color:#f92672>);</span> <span style=color:#75715e>//2011-09-25
</span></span></span><span style=display:flex><span><span style=color:#75715e>//ä¸Šé¢çš„plusæ–¹æ³•ä¹Ÿæ˜¯é€šç”¨æ–¹æ³•ï¼Œå®ƒå’Œminusæ–¹æ³•éƒ½å£°æ˜äºTemporalæ¥å£ä¸­
</span></span></span></code></pre></div><h4 id=6-4-è®¾è®¡ä¸€ä¸ªnextworkingdayç±»>6-4. è®¾è®¡ä¸€ä¸ªNextWorkingDayç±»</h4><div class=highlight id=id-23><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>TemporalAdjuster nextWorkingDay <span style=color:#f92672>=</span> TemporalAdjusters<span style=color:#f92672>.</span><span style=color:#a6e22e>ofDateAdjuster</span><span style=color:#f92672>(</span> 
</span></span><span style=display:flex><span> temporal <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> DayOfWeek dow <span style=color:#f92672>=</span> 
</span></span><span style=display:flex><span> DayOfWeek<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>temporal<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>ChronoField<span style=color:#f92672>.</span><span style=color:#a6e22e>DAY_OF_WEEK</span><span style=color:#f92672>));</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>int</span> dayToAdd <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>dow <span style=color:#f92672>==</span> DayOfWeek<span style=color:#f92672>.</span><span style=color:#a6e22e>FRIDAY</span><span style=color:#f92672>)</span> dayToAdd <span style=color:#f92672>=</span> 3<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>dow <span style=color:#f92672>==</span> DayOfWeek<span style=color:#f92672>.</span><span style=color:#a6e22e>SATURDAY</span><span style=color:#f92672>)</span> dayToAdd <span style=color:#f92672>=</span> 2<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> temporal<span style=color:#f92672>.</span><span style=color:#a6e22e>plus</span><span style=color:#f92672>(</span>dayToAdd<span style=color:#f92672>,</span> ChronoUnit<span style=color:#f92672>.</span><span style=color:#a6e22e>DAYS</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>});</span> 
</span></span><span style=display:flex><span>date <span style=color:#f92672>=</span> date<span style=color:#f92672>.</span><span style=color:#a6e22e>with</span><span style=color:#f92672>(</span>nextWorkingDay<span style=color:#f92672>);</span></span></span></code></pre></div><h4 id=6-5-æ—¥æœŸå’Œ-string-è½¬æ¢>6-5. æ—¥æœŸå’Œ String è½¬æ¢</h4><div class=highlight id=id-24><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ LocalDate çš„ format å’Œ parse æ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 18<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>String s1 <span style=color:#f92672>=</span> date<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>DateTimeFormatter<span style=color:#f92672>.</span><span style=color:#a6e22e>BASIC_ISO_DATE</span><span style=color:#f92672>);</span> <span style=color:#75715e>//20140318
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>String s2 <span style=color:#f92672>=</span> date<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>DateTimeFormatter<span style=color:#f92672>.</span><span style=color:#a6e22e>ISO_LOCAL_DATE</span><span style=color:#f92672>);</span> <span style=color:#75715e>//2014-03-18
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>LocalDate date1 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;20140318&#34;</span><span style=color:#f92672>,</span> DateTimeFormatter<span style=color:#f92672>.</span><span style=color:#a6e22e>BASIC_ISO_DATE</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalDate date2 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;2014-03-18&#34;</span><span style=color:#f92672>,</span> DateTimeFormatter<span style=color:#f92672>.</span><span style=color:#a6e22e>ISO_LOCAL_DATE</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è‡ªå®šä¹‰æ¨¡å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>DateTimeFormatter formatter <span style=color:#f92672>=</span> DateTimeFormatter<span style=color:#f92672>.</span><span style=color:#a6e22e>ofPattern</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;dd/MM/yyyy&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalDate date1 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>2014<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 18<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>String formattedDate <span style=color:#f92672>=</span> date1<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>formatter<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>LocalDate date2 <span style=color:#f92672>=</span> LocalDate<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span>formattedDate<span style=color:#f92672>,</span> formatter<span style=color:#f92672>);</span></span></span></code></pre></div><h2 id=å››è¶…è¶Š-java-8>å››ã€è¶…è¶Š Java 8</h2><h3 id=1-åŸºäºå°¾-é€’çš„é˜¶ä¹˜>1. åŸºäºâ€œå°¾-é€’â€çš„é˜¶ä¹˜</h3><div class=highlight id=id-25><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>factorialTailRecursive</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> n<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> factorialHelper<span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> n<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>factorialHelper</span><span style=color:#f92672>(</span><span style=color:#66d9ef>long</span> acc<span style=color:#f92672>,</span> <span style=color:#66d9ef>long</span> n<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> n <span style=color:#f92672>==</span> 1 <span style=color:#f92672>?</span> acc <span style=color:#f92672>:</span> factorialHelper<span style=color:#f92672>(</span>acc <span style=color:#f92672>*</span> n<span style=color:#f92672>,</span> n<span style=color:#f92672>-</span>1<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div><p>è¿™ç§å½¢å¼çš„é€’å½’æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œç°åœ¨æˆ‘ä»¬ä¸éœ€è¦åœ¨ä¸åŒçš„æ ˆå¸§ä¸Šä¿å­˜æ¯æ¬¡é€’å½’è®¡ç®—çš„ä¸­é—´å€¼ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªè¡Œå†³å®šå¤ç”¨æŸä¸ªæ ˆå¸§è¿›è¡Œè®¡ç®—ã€‚å®é™…ä¸Šï¼Œåœ¨factorialHelperçš„å®šä¹‰ä¸­ï¼Œç«‹å³æ•°ï¼ˆé˜¶ä¹˜è®¡ç®—çš„ä¸­é—´ç»“æœï¼‰ç›´æ¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº†è¯¥æ–¹æ³•ã€‚å†ä¹Ÿä¸ç”¨ä¸ºæ¯ä¸ªé€’å½’è°ƒç”¨åˆ†é…å•ç‹¬çš„æ ˆå¸§ç”¨äºè·Ÿè¸ªæ¯æ¬¡é€’å½’è°ƒç”¨çš„ä¸­é—´å€¼â€”â€”é€šè¿‡æ–¹æ³•çš„å‚æ•°èƒ½å¤Ÿç›´æ¥è®¿é—®è¿™äº›å€¼ã€‚</p><p><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png 2x" sizes=auto data-title=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png data-alt=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/16-26-44-image-20210608162642044.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=2-ç§‘é‡ŒåŒ–curry>2. ç§‘é‡ŒåŒ–ï¼ˆcurryï¼‰</h3><div class=highlight id=id-26><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> DoubleUnaryOperator <span style=color:#a6e22e>curriedConverter</span><span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> f<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> b<span style=color:#f92672>){</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>double</span> x<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> x <span style=color:#f92672>*</span> f <span style=color:#f92672>+</span> b<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DoubleUnaryOperator convertCtoF <span style=color:#f92672>=</span> curriedConverter<span style=color:#f92672>(</span>9<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>/</span>5<span style=color:#f92672>,</span> 32<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>DoubleUnaryOperator convertUSDtoGBP <span style=color:#f92672>=</span> curriedConverter<span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>6</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span>DoubleUnaryOperator convertKmtoMi <span style=color:#f92672>=</span> curriedConverter<span style=color:#f92672>(</span>0<span style=color:#f92672>.</span><span style=color:#a6e22e>6214</span><span style=color:#f92672>,</span> 0<span style=color:#f92672>);</span></span></span></code></pre></div><h3 id=3-scala>3. Scala</h3><ul><li>å£°æ˜å˜é‡ <code>s : String</code></li><li>åˆ›å»ºé›†åˆ<code>val authorsToAge = Map("Raoul" -> 23, "Mario" -> 40, "Alan" -> 53)</code></li><li>val è¡¨ç¤ºä¸å¯å˜ï¼Œvarè¡¨ç¤ºå¯å˜</li><li>æ”¯æŒä»»æ„å¤§å°çš„å…ƒç»„</li></ul><div class=highlight id=id-27><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#66d9ef>val</span> book <span style=color:#66d9ef>=</span> <span style=color:#f92672>(</span><span style=color:#ae81ff>2014</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Java 8 in Action&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Manning&#34;</span><span style=color:#f92672>)</span> <span style=color:#75715e>//å…ƒç»„ç±»å‹ä¸º(Int, String, String)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>val</span> numbers <span style=color:#66d9ef>=</span> <span style=color:#f92672>(</span><span style=color:#ae81ff>42</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>1337</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>14</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>println<span style=color:#f92672>(</span>book<span style=color:#f92672>.</span>_1<span style=color:#f92672>)</span> <span style=color:#75715e>//2014
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>println<span style=color:#f92672>(</span>numbers<span style=color:#f92672>.</span>_4<span style=color:#f92672>)</span> <span style=color:#f92672>//</span><span style=color:#ae81ff>3</span></span></span></code></pre></div><ul><li>Scalaä¸­çš„Streamå¯ä»¥è®°å½•å®ƒæ›¾ç»è®¡ç®—å‡ºçš„å€¼ï¼Œæ‰€ä»¥ä¹‹å‰çš„å…ƒç´ å¯ä»¥éšæ—¶è¿›è¡Œè®¿é—®ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒStreamè¿˜è¿›è¡Œäº†ç´¢å¼•ï¼Œæ‰€ä»¥Streamä¸­çš„å…ƒç´ å¯ä»¥åƒListé‚£æ ·é€šè¿‡ç´¢å¼•è®¿é—®ã€‚æ³¨æ„ï¼Œè¿™ç§æŠ‰æ‹©ä¹Ÿé™„å¸¦ç€å¼€é”€ï¼Œç”±äºéœ€è¦å­˜å‚¨è¿™äº›é¢å¤–çš„å±æ€§ï¼Œå’ŒJava 8ä¸­çš„Streamæ¯”èµ·æ¥ï¼ŒScalaç‰ˆæœ¬çš„Streamå†…å­˜çš„ä½¿ç”¨æ•ˆç‡å˜ä½äº†ï¼Œå› ä¸ºScalaä¸­çš„Streaméœ€è¦èƒ½å¤Ÿå›æº¯ä¹‹å‰çš„å…ƒç´ ï¼Œè¿™æ„å‘³ç€ä¹‹å‰è®¿é—®è¿‡çš„å…ƒç´ éƒ½éœ€è¦åœ¨å†…å­˜â€œè®°å½•ä¸‹æ¥â€ï¼ˆå³è¿›è¡Œç¼“å­˜ï¼‰ã€‚</li><li>Option:</li></ul><div class=highlight id=id-28><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#75715e>//Java
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>public <span style=color:#a6e22e>String</span> getCarInsuranceName<span style=color:#f92672>(</span><span style=color:#a6e22e>Optional</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Person</span><span style=color:#f92672>&gt;</span> person<span style=color:#f92672>,</span> int minAge<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> person<span style=color:#f92672>.</span>filter<span style=color:#f92672>(</span>p <span style=color:#f92672>-&gt;</span> p<span style=color:#f92672>.</span>getAge<span style=color:#f92672>()</span> <span style=color:#f92672>&gt;=</span> minAge<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>flatMap<span style=color:#f92672>(</span><span style=color:#a6e22e>Person</span><span style=color:#66d9ef>:</span><span style=color:#66d9ef>:getCar</span><span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>flatMap<span style=color:#f92672>(</span><span style=color:#a6e22e>Car</span><span style=color:#66d9ef>:</span><span style=color:#66d9ef>:getInsurance</span><span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>map<span style=color:#f92672>(</span><span style=color:#a6e22e>Insurance</span><span style=color:#66d9ef>:</span><span style=color:#66d9ef>:getName</span><span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>orElse<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Unknown&#34;</span><span style=color:#f92672>);</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//Scala
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>def</span> getCarInsuranceName<span style=color:#f92672>(</span>person<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Option</span><span style=color:#f92672>[</span><span style=color:#66d9ef>Person</span><span style=color:#f92672>],</span> minAge<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>=</span> 
</span></span><span style=display:flex><span> person<span style=color:#f92672>.</span>filter<span style=color:#f92672>(</span><span style=color:#66d9ef>_</span><span style=color:#f92672>.</span>getAge<span style=color:#f92672>()</span> <span style=color:#f92672>&gt;=</span> minAge<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>flatMap<span style=color:#f92672>(</span><span style=color:#66d9ef>_</span><span style=color:#f92672>.</span>getCar<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>flatMap<span style=color:#f92672>(</span><span style=color:#66d9ef>_</span><span style=color:#f92672>.</span>getInsurance<span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>.</span>map<span style=color:#f92672>(</span><span style=color:#66d9ef>_</span><span style=color:#f92672>.</span>getName<span style=color:#f92672>).</span>getOrElse<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Unknown&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>//</span>åœ¨å‰é¢çš„ä»£ç ä¸­<span style=color:#960050;background-color:#1e0010>ï¼Œ</span>ä½ ä½¿ç”¨çš„æ˜¯_<span style=color:#f92672>.</span>getCar<span style=color:#960050;background-color:#1e0010>ï¼ˆ</span>å¹¶æœªä½¿ç”¨åœ†æ‹¬å·<span style=color:#960050;background-color:#1e0010>ï¼‰ï¼Œ</span>è€Œä¸æ˜¯_<span style=color:#f92672>.</span>getCar<span style=color:#f92672>()</span> <span style=color:#960050;background-color:#1e0010>ï¼ˆ</span>å¸¦åœ†æ‹¬å·<span style=color:#960050;background-color:#1e0010>ï¼‰ã€‚</span><span style=color:#a6e22e>Scalaè¯­è¨€ä¸­</span><span style=color:#960050;background-color:#1e0010>ï¼Œ</span>æ‰§è¡Œæ–¹æ³•è°ƒç”¨æ—¶<span style=color:#960050;background-color:#1e0010>ï¼Œ</span>å¦‚æœä¸éœ€è¦ä¼ é€’å‚æ•°<span style=color:#960050;background-color:#1e0010>ï¼Œ</span>é‚£ä¹ˆå‡½æ•°çš„åœ†æ‹¬å·æ˜¯å¯ä»¥çœç•¥çš„<span style=color:#960050;background-color:#1e0010>ã€‚</span></span></span></code></pre></div><h3 id=4-é—­åŒ…>4. é—­åŒ…</h3><p>é—­åŒ…æ˜¯ä¸€ä¸ªå‡½æ•°å®ä¾‹ï¼Œå®ƒå¯ä»¥ä¸å—é™åˆ¶åœ°è®¿é—®è¯¥å‡½æ•°çš„éæœ¬åœ°å˜é‡ã€‚</p><p>ä¸è¿‡Java 8ä¸­çš„Lambdaè¡¨è¾¾å¼è‡ªèº«å¸¦æœ‰ä¸€å®šçš„é™åˆ¶ï¼šå®ƒä»¬ä¸èƒ½ä¿®æ”¹å®šä¹‰Lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä¸­çš„æœ¬åœ°å˜é‡å€¼ã€‚è¿™äº›å˜é‡å¿…é¡»éšå¼åœ°å£°æ˜ä¸ºfinalã€‚</p><p>è¿™äº›èƒŒæ™¯çŸ¥è¯†æœ‰åŠ©äºæˆ‘ä»¬ç†è§£â€œLambdaé¿å…äº†å¯¹å˜é‡å€¼çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯å¯¹å˜é‡çš„è®¿é—®â€ã€‚</p><h3 id=5-trait>5. trait</h3><p>Scalaè¿˜æä¾›äº†å¦ä¸€ä¸ªéå¸¸æœ‰åŠ©äºæŠ½è±¡å¯¹è±¡çš„ç‰¹æ€§ï¼Œåç§°å«traitã€‚å®ƒæ˜¯Scalaä¸ºå®ç°Javaä¸­çš„æ¥å£è€Œè®¾è®¡çš„æ›¿ä»£å“ã€‚traitä¸­æ—¢å¯ä»¥å®šä¹‰æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ã€‚traitåŒæ—¶è¿˜æ”¯æŒJavaä¸­æ¥å£é‚£æ ·çš„å¤šç»§æ‰¿ï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†å®ƒä»¬çœ‹æˆä¸Java 8ä¸­æ¥å£ç±»ä¼¼çš„ç‰¹æ€§ï¼Œå®ƒä»¬éƒ½æ”¯æŒé»˜è®¤æ–¹æ³•ã€‚traitä¸­è¿˜å¯ä»¥åŒ…å«åƒæŠ½è±¡ç±»è¿™æ ·çš„å­—æ®µï¼Œè€ŒJava 8çš„æ¥å£ä¸æ”¯æŒè¿™æ ·çš„ç‰¹æ€§ã€‚é‚£ä¹ˆï¼Œtraitå°±ç±»ä¼¼äºæŠ½è±¡ç±»å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œå› ä¸ºtraitæ”¯æŒå¤šç»§æ‰¿ï¼Œè€ŒæŠ½è±¡ç±»ä¸æ”¯æŒå¤šç»§æ‰¿ã€‚Javaæ”¯æŒç±»å‹çš„å¤šç»§æ‰¿ï¼Œå› ä¸ºä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚ç°åœ¨ï¼ŒJava 8é€šè¿‡é»˜è®¤æ–¹æ³•åˆå¼•å…¥äº†å¯¹è¡Œä¸ºçš„å¤šç»§æ‰¿ï¼Œä¸è¿‡å®ƒä¾æ—§ä¸æ”¯æŒå¯¹çŠ¶æ€çš„å¤šç»§æ‰¿ï¼Œè€Œè¿™æ°æ°æ˜¯traitæ”¯æŒçš„ã€‚</p><div class=highlight id=id-29><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#66d9ef>trait</span> <span style=color:#a6e22e>Sized</span><span style=color:#f92672>{</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> size <span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>def</span> isEmpty<span style=color:#f92672>()</span> <span style=color:#66d9ef>=</span> size <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>//å¸¦é»˜è®¤å®ç°çš„isEmptyæ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Empty</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Sized</span> 
</span></span><span style=display:flex><span>println<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Empty</span><span style=color:#f92672>().</span>isEmpty<span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Box</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> b1 <span style=color:#66d9ef>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Box</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>Sized</span> <span style=color:#75715e>//åœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶æ„å»ºtrait
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>println<span style=color:#f92672>(</span>b1<span style=color:#f92672>.</span>isEmpty<span style=color:#f92672>())</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>val</span> b2 <span style=color:#66d9ef>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Box</span><span style=color:#f92672>()</span> 
</span></span><span style=display:flex><span>b2<span style=color:#f92672>.</span>isEmpty<span style=color:#f92672>()</span> <span style=color:#f92672>//</span>ç¼–è¯‘é”™è¯¯<span style=color:#960050;background-color:#1e0010>ï¼š</span>å› ä¸ºBoxç±»çš„å£°æ˜å¹¶æœªç»§æ‰¿Sized</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="æ›´æ–°äº 2023-08-08 15:20:42">æ›´æ–°äº 2023-08-08&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=https://leni.fun/posts/java8%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html data-title=ã€ŠJava8å®æˆ˜ã€‹ç¬”è®°><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/java.html class=post-tag>Java</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/posts/java_base.html class=post-nav-item rel=prev title="ğŸš©Java åŸºç¡€"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>ğŸš©Java åŸºç¡€</a>
<a href=/posts/java_draft.html class=post-nav-item rel=next title="Java æ‚è®°">Java æ‚è®°<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>
<a href=/>éƒ½å°†ä¼š</a></span><span class="license footer-divider">Back-End Engineer</span></div><div class="footer-line statistics"><span class=site-time title=ç½‘ç«™è¿è¡Œä¸­â€¦â€¦><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">ç½‘ç«™è¿è¡Œä¸­â€¦â€¦</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=æ€»è®¿å®¢æ•°><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=æ€»è®¿é—®é‡><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=å›åˆ°é¡¶éƒ¨><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/hihihiman/blog title=åšå®¢æºç  target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;bottom:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt ä¸»é¢˜åœ¨å¯ç”¨ JavaScript çš„æƒ…å†µä¸‹æ•ˆæœæœ€ä½³ã€‚</div></noscript></div><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/pink/pace-theme-center-atom.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/instant-page/instantpage.min.js async defer type=module></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",editLockTitle:"é”å®šå¯ç¼–è¾‘ä»£ç å—",editUnLockTitle:"è§£é”å¯ç¼–è¾‘ä»£ç å—",editable:!0,maxShownLines:64},comment:{enable:!1},cookieconsent:{content:{dismiss:"åŒæ„",link:"äº†è§£æ›´å¤š",message:"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒã€‚"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":"çš„åšå®¢","typeit-header-subtitle-mobile":"çš„åšå®¢"},enablePWA:!0,pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!0,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,threshold:.3,useExtendedSearch:!0},siteTime:"2023-08-06T23:31:00+08:00",typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,loop:!0,speed:100}}</script><script src=/js/theme.min.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>