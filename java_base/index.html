<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>🚩Java 基础 - </title><meta name=author content="都将会"><meta name=author-link content><meta name=description content="JavaSE 基础知识整理"><meta name=keywords content="Java,interview,面试"><meta itemprop=name content="🚩Java 基础"><meta itemprop=description content="JavaSE 基础知识整理"><meta itemprop=datePublished content="2023-10-04T15:45:19+08:00"><meta itemprop=dateModified content="2023-10-04T15:45:19+08:00"><meta itemprop=wordCount content="3549"><meta itemprop=image content="https://leni.fun/images/avatar.jpg"><meta itemprop=keywords content="Java,"><meta property="og:title" content="🚩Java 基础"><meta property="og:description" content="JavaSE 基础知识整理"><meta property="og:type" content="article"><meta property="og:url" content="https://leni.fun/java_base/"><meta property="og:image" content="https://leni.fun/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-04T15:45:19+08:00"><meta property="article:modified_time" content="2023-10-04T15:45:19+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leni.fun/images/avatar.jpg"><meta name=twitter:title content="🚩Java 基础"><meta name=twitter:description content="JavaSE 基础知识整理"><meta name=application-name content="都将会的 APP"><meta name=apple-mobile-web-app-title content="都将会的 APP"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://leni.fun/java_base/><link rel=prev href=https://leni.fun/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/><link rel=next href=https://leni.fun/mysql/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"🚩Java 基础","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/leni.fun\/java_base\/"},"genre":"posts","keywords":"Java","wordcount":3549,"url":"https:\/\/leni.fun\/java_base\/","datePublished":"2023-10-04T15:45:19+08:00","dateModified":"2023-10-04T15:45:19+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"都将会"},"description":"JavaSE 基础知识整理"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=关键词搜索 id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=关键词搜索 id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/ title>主页</a></li><li class=breadcrumb-item><a href=/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>🚩Java 基础</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>🚩Java 基础</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=都将会 data-alt=都将会 class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;都将会</span></span>
<span class=post-category>收录于 <a href=/categories/202310/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 202310</a></span></div><div class=post-meta-line><span title="发布于 2023-10-04 15:45:19"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-10-04>2023-10-04</time></span>&nbsp;<span title="更新于 2023-10-04 15:45:19"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2023-10-04>2023-10-04</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3549 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 8 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="🚩Java 基础">
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class=featured-image><img loading=lazy src=/images/pic19.jpg srcset="/images/pic19.jpg, /images/pic19.jpg 1.5x, /images/pic19.jpg 2x" sizes=auto data-title="JavaSE 基础知识整理" data-alt=/images/pic19.jpg width=795 height=352 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#元注解>元注解</a></li><li><a href=#反射>反射</a></li><li><a href=#api-vs-spi>API vs SPI？</a><ul><li><a href=#spi---接口位于调用方所在的包中>SPI - “接口”位于“调用方”所在的“包”中</a></li><li><a href=#api---接口位于实现方所在的包中>API - “接口”位于“实现方”所在的“包”中</a></li></ul></li><li><a href=#happens-before规则>happens-before规则？</a></li><li><a href=#为什么金额不能使用double要使用bigdecimal>为什么金额不能使用double，要使用BigDecimal？</a></li><li><a href=#强引用软引用弱引用幻象引用有什么区别>强引用、软引用、弱引用、幻象引用有什么区别？</a></li><li><a href=#jit>JIT</a><ul><li><a href=#逃逸分析>逃逸分析</a></li></ul></li><li><a href=#ascii码unicode和utf-8的区别是什么>ASCII码，Unicode和utf-8的区别是什么</a></li><li><a href=#lambda-表达式---匿名函数>Lambda 表达式 - 匿名函数</a></li><li><a href=#clone-方法的缺陷>clone() 方法的缺陷</a></li><li><a href=#multipartfile和inputstream是什么关系>MultipartFile和InputStream是什么关系？</a></li><li><a href=#泛型会在编译期擦除为什么还要使用>泛型会在编译期擦除，为什么还要使用？</a><ul><li><a href=#泛型的限制>泛型的限制</a></li></ul></li><li><a href=#父子关系>父子关系</a></li><li><a href=#t-extends-xxx-和--extends-xxx-有什么区别>T extends xxx 和 ？ extends xxx 有什么区别</a></li><li><a href=#string-常量表达式理解>String 常量表达式理解</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png data-sub-html="<h2>image.png</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1681107594592-f7815896-a369-4941-972a-44a823f91a30.png 2x" sizes=auto data-title=image.png data-alt=image.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li>几乎所有对象实例都存在堆中，基本数据类型只要没有被 static 修饰，也存放在堆中。</li><li>数值类缓存了[-128,127]，Character 缓存了 [0,127]范围内的数据。</li></ul><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>40</span><span class=p>;</span><span class=w> </span><span class=c1>// 等价于 Integer a = Integer.valueOf(40);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Integer</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Integer</span><span class=p>(</span><span class=n>40</span><span class=p>);</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=n>a</span><span class=o>==</span><span class=n>b</span><span class=p>);</span><span class=w> </span><span class=o>//</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=n>因为</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>是常量池对象</span><span class=err>，</span><span class=n>b</span><span class=w> </span><span class=n>是堆内存对象</span><span class=err>。</span></span></span></code></pre></td></tr></table></div></div><h3 id=元注解>元注解</h3><ul><li><p><code>@Retention</code>用于标明注解被保留的阶段 RetentionPolicy</p></li><li><ul><li>SOURCE 源文件保留</li><li>CLASS 编译期保留，默认值（.class：RuntimeInvisibleAnnotations）</li><li>RUNTIME 运行期保留，可通过反射去获取注解信息（.class： RuntimeVisibleAnnotations）</li></ul></li><li><p><code>@Target</code>用于标明注解使用的范围 ElementType</p></li><li><p><code>@Inherited</code>用于标明注解可继承</p></li></ul><h3 id=反射>反射</h3><ol><li><p>反射类及反射方法的获取，都是通过从列表中搜寻查找匹配的方法，所以查找性能会随类的大小方法多少而变化；</p></li><li><p>每个类都会有一个与之对应的Class实例，从而每个类都可以获取method反射方法，并作用到其他实例身上；</p></li><li><p>反射也是考虑了线程安全的，放心使用；</p></li><li><p>反射使用软引用relectionData缓存class信息，避免每次重新从jvm获取带来的开销；</p></li><li><p>反射调用多次生成新代理Accessor, 而通过字节码生存的则考虑了卸载功能，所以会使用独立的类加载器；</p><ol><li>invoke时，是通过 MethodAccessor 进行调用的，而 MethodAccessor 是个接口，在第一次时调用 acquireMethodAccessor() 进行新创建。</li><li>进行 ma.invoke(obj, args); 调用时，调用 DelegatingMethodAccessorImpl.invoke();最后被委托到 NativeMethodAccessorImpl.invoke()</li><li>在ClassDefiner.defineClass方法实现中，每被调用一次都会生成一个DelegatingClassLoader类加载器对象 ，这里每次都生成新的类加载器，是为了性能考虑，在某些情况下可以卸载这些生成的类，因为类的卸载是只有在类加载器可以被回收的情况下才会被回收的，如果用了原来的类加载器，那可能导致这些新创建的类一直无法被卸载。而反射生成的类，有时候可能用了就可以卸载了，所以使用其独立的类加载器，从而使得更容易控制反射类的生命周期。</li></ol></li><li><p>当找到需要的方法，都会copy一份出来，而不是使用原来的实例，从而保证数据隔离；</p></li><li><p>调度反射方法，最终是由jvm执行invoke0()执行；</p></li></ol><h3 id=api-vs-spi>API vs SPI？</h3><h4 id=spi---接口位于调用方所在的包中>SPI - “接口”位于“调用方”所在的“包”中</h4><ul><li>概念上更依赖调用方。</li><li>组织上位于调用方所在的包中。</li><li>实现位于独立的包中。</li><li>常见的例子是：插件模式的插件。</li></ul><p>使用SPI机制的缺陷：</p><ul><li>不能按需加载，需要遍历所有的实现，并实例化，然后在循环中才能找到我们需要的实现。如果不想用某些实现类，或者某些类实例化很耗时，它也被载入并实例化了，这就造成了浪费。</li><li>获取某个实现类的方式不够灵活，只能通过 Iterator 形式获取，不能根据某个参数来获取对应的实现类。</li><li>多个并发多线程使用 ServiceLoader 类的实例是不安全的。</li></ul><h4 id=api---接口位于实现方所在的包中>API - “接口”位于“实现方”所在的“包”中</h4><ul><li>概念上更接近实现方。</li><li>组织上位于实现方所在的包中。</li><li>实现和接口在一个包中。</li></ul><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png data-sub-html="<h2>img</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053223670-932f3da0-7bbc-456b-86bd-7acbd1b6c5a0.png 2x" sizes=auto data-title=img data-alt=img style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png data-sub-html="<h2>img</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/1691053230525-0cbb49d9-8962-4f69-866b-3ff9d3cbb2b7.png 2x" sizes=auto data-title=img data-alt=img style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h3 id=happens-before规则>happens-before规则？</h3><p>Java 虚拟机在进行代码<strong>编译优化</strong>时，会出现<strong>指令重排</strong>序问题，为了避免编译优化对并发编程安全性的影响，Java 虚拟机需要 happens-before 规则限制或禁止编译优化的场景，保证系统<strong>并发</strong>的安全性。</p><h3 id=为什么金额不能使用double要使用bigdecimal>为什么金额不能使用double，要使用BigDecimal？</h3><p>浮点数不精确的根本原因在于<strong>尾数部分的位数</strong>是固定的，一旦需要表示的数字的精度高于浮点数的精度，那么必然产生误差！这在处理金融数据的情况下是绝对不允许存在的。</p><h3 id=强引用软引用弱引用幻象引用有什么区别>强引用、软引用、弱引用、幻象引用有什么区别？</h3><ul><li><p>强引用，就是我们最常见的普通对象引用，只要还有强引用指向一个对象，就能表明对象还“活着”，垃圾收集器不会碰这种对象。对于一个普通的对象，如果没有其他的引用关系，只要超过了引用的作用域或者显式地将相应（强）引用赋值为 null，就是可以被垃圾收集的了，当然具体回收时机还是要看垃圾收集策略。</p></li><li><p><strong>软引用</strong>（SoftReference），是一种相对强引用弱化一些的引用，可以<strong>让对象豁免一些垃圾收集</strong>，只有当 JVM 认为<strong>内存不足时</strong>，才会去试图回收软引用指向的对象。JVM 会确保在抛出 OutOfMemoryError 之前，清理软引用指向的对象。软引用通常用来实现内存敏感的缓存，如果还有空闲内存，就可以暂时保留缓存，当内存不足时清理掉，这样就保证了使用缓存的同时，不会耗尽内存。</p><ul><li>反射使用软引用relectionData缓存class信息，避免每次重新从jvm获取带来的开销；</li></ul></li><li><p><strong>弱引用</strong>（WeakReference）并不能使对象豁免垃圾收集，仅仅是提供一种访问在弱引用状态下对象的途径。这就可以用来构建一种没有特定约束的关系，比如，维护一种非强制性的映射关系，如果试图获取时对象还在，就使用它，否则重现实例化。它同样是很多<strong>缓存实现</strong>的选择。</p></li><li><p><strong>虚引用</strong>，你不能通过它访问对象。幻象引用仅仅是<strong>提供了一种确保对象被 finalize 以后，做某些事情的机制</strong>，比如，通常用来做所谓的 <strong>Post-Mortem 清理机制</strong>，我在专栏上一讲中介绍的 Java 平台自身 Cleaner 机制等，也有人<strong>利用幻象引用监控对象的创建和销毁</strong>。</p></li></ul><h3 id=jit>JIT</h3><p>引入JIT（Just-In-Time）编译的主要目的是提高程序的执行性能。传统的编译方式是提前将源代码编译成机器码，然后在运行时执行。而JIT编译是在程序运行时将部分代码进行动态编译成机器码，以提高执行效率。</p><p>JIT编译器会在运行时对热点代码进行监测和分析，热点代码指的是频繁执行的代码块或方法。一旦确定某段代码是热点代码，JIT编译器会将其编译成机器码，并缓存起来，以便下次执行时直接使用。这样可以避免每次执行都需要进行解释和执行源代码的性能损耗。</p><h4 id=逃逸分析>逃逸分析</h4><p>是一种静态分析技术，用于确定程序中的对象是否逃逸出方法的作用域。逃逸指的是对象在方法外被引用或传递给其他方法使用的情况</p><ul><li>栈上分配和标量替换。栈上分配将对象分配在线程栈上，减少堆内存的使用。</li><li>标量替换将对象拆分为独立的字段，存储在寄存器或栈上。</li></ul><h3 id=ascii码unicode和utf-8的区别是什么>ASCII码，Unicode和utf-8的区别是什么</h3><table><thead><tr><th>字符</th><th>ASCII码</th><th>Unicode</th><th>utf-8</th></tr></thead><tbody><tr><td>A</td><td>01000001</td><td>00000000 01000001</td><td>01000001</td></tr><tr><td>中文</td><td>无法表示</td><td>01001110 00101101</td><td>01001110 00101101</td></tr></tbody></table><ul><li>ASCII码：用 8 bit 来表示世界通用的英文、数字、标点。</li><li>Unicode：用 2B 来表示每个字符。</li><li>utf-8：英文字母 1B，汉字 3B，可以兼容 ASCII 码。</li><li>GB2312/GBK：英文字母 1B，汉字 2B</li></ul><h3 id=lambda-表达式---匿名函数>Lambda 表达式 - 匿名函数</h3><ol><li>减少代码冗余，增强易读性</li><li>实现闭包：内层函数可以引用包含在它外层的函数的变量</li></ol><h3 id=clone-方法的缺陷>clone() 方法的缺陷</h3><p>Java中的<code>clone()</code>方法是用于创建对象的副本的方法，它是从<code>Object</code>类继承而来的。有如下缺陷：</p><ol><li><p>浅拷贝问题</p></li><li><p>破坏封装性：<code>clone()</code>方法是<code>protected</code>访问修饰符，它只能在对象的类及其子类中访问。为了使用<code>clone()</code>方法，需要在需要克隆的类中实现<code>Cloneable</code>接口，并实现<code>clone()</code>方法。这会导致在类的设计中暴露出一些细节，破坏了封装性。</p></li><li><p>缺乏类型安全：<code>clone()</code>方法返回的是<code>Object</code>类型，需要进行类型转换才能得到具体的对象。这增加了出错的可能性，并且在编译时无法进行类型检查。</p></li><li><p>构造函数不会被调用：在使用<code>clone()</code>方法创建对象副本时，对象的构造函数不会被调用。这意味着无法执行构造函数中的初始化操作，可能导致克隆对象的状态不完整或不一致。</p></li><li><p>更好的替代方案：Java提供了其他更好的替代方案来创建对象的副本，如使用拷贝构造函数、工厂方法、序列化等。这些方式在实现上更直观、更灵活，并且可以更好地满足特定的需求。</p></li></ol><h3 id=multipartfile和inputstream是什么关系>MultipartFile和InputStream是什么关系？</h3><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>MultipartFile</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>InputStreamSource</span><span class=w> </span><span class=p>{...}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>InputStreamSource</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>InputStream</span><span class=w> </span><span class=nf>getInputStream</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>InputStream</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Closeable</span><span class=w> </span><span class=p>{...}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>Closeable</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>AutoCloseable</span><span class=p>{}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>AutoCloseable</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>close</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><ol><li>我们在使用MultipartFile作为参数传递的时候，可以将MultipartFile声明为一个数组，这样就能支持多文件传输，如果只需要传输一个文件，则去掉数组就好了。</li><li>可以根据MultipartFile的getSize方法来获取到传输文件的大小，这样就能限定传输过来的文件的大小了。</li></ol><h3 id=泛型会在编译期擦除为什么还要使用>泛型会在编译期擦除，为什么还要使用？</h3><p>泛型，本质上是编译器的行为，为了保证引入泛型机制，但不创建新的类型。使用泛型，可以在编译期间进行类型检测。如果使用 Object 代替，可读性差，并且需要手动添加强制类型转换。</p><h4 id=泛型的限制>泛型的限制</h4><ul><li>泛型参数不能是基本类型，而应当用包装类，因为基本类型不是 Object 的子类。</li><li>不能实例化泛型数组</li><li>泛型无法使用 instance of 和 getClass() 进行类型判断</li><li>泛型接口不能重载，否则擦除后会冲突。</li><li>不能使用 static 修饰泛型变量。</li></ul><h3 id=父子关系>父子关系</h3><ul><li><code>ChildNode&lt;Circle></code> 是 <code>Node&lt;Circle></code> 的子类</li><li><code>Node&lt;Circle></code> 不是 <code>Node&lt;Shape></code> 的子类</li></ul><h3 id=t-extends-xxx-和--extends-xxx-有什么区别>T extends xxx 和 ？ extends xxx 有什么区别</h3><p>前者用于定义泛型类和方法，擦除后为 xxx 类型；后者用于声明方法形参，接收 xxx 和其子类型。</p><ul><li><code>? extends xxx</code>：只能调用 get() ，只能读</li><li><code>? super xxx</code>： 只能调用 set()，只能写</li></ul><h3 id=string-常量表达式理解>String 常量表达式理解</h3><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>h1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w> </span><span class=c1>// 编译期常量</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>h2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>h3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>h2</span><span class=p>;</span><span class=w> </span><span class=c1>// 运行时常量</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>s1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>h1</span><span class=w> </span><span class=o>+</span><span class=s>&#34;World&#34;</span><span class=p>;</span><span class=c1>// 反编译为 &#34;helloWorld&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>h2</span><span class=w> </span><span class=o>+</span><span class=s>&#34;World&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>String</span><span class=w> </span><span class=n>s3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>h3</span><span class=w> </span><span class=o>+</span><span class=s>&#34;World&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=n>s1</span><span class=o>==</span><span class=s>&#34;helloWorld&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=n>s2</span><span class=o>==</span><span class=s>&#34;helloWorld&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>// false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>log</span><span class=p>.</span><span class=na>info</span><span class=p>(</span><span class=n>s3</span><span class=o>==</span><span class=s>&#34;helloWorld&#34;</span><span class=p>);</span><span class=w> </span><span class=o>//</span><span class=w> </span><span class=kc>false</span></span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2023-10-04 15:45:19">更新于 2023-10-04&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://leni.fun/java_base/ data-title="🚩Java 基础" data-image=/images/pic19.jpg><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/java/ class=post-tag>Java</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B/ class=post-nav-item rel=prev title=系统设计经典案例><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>系统设计经典案例</a>
<a href=/mysql/ class=post-nav-item rel=next title=🚩MySQL>🚩MySQL<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright order-5" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>都将会</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://beian.miit.gov.cn target=_blank>浙ICP备2023023782号</a></span></div><div class="footer-line statistics"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor order-4"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/hihihiman/hihihiman.github.io title=博客源码 target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;bottom:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/pink/pace-theme-center-atom.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:1024},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":"的博客           ","typeit-header-subtitle-mobile":"的博客           "},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!0,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!0},siteTime:"2021-08-26T23:31:00+08:00",typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,loop:!0,speed:150}}</script><script src=/js/theme.min.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>