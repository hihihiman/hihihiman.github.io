<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>🚩Spring -</title><meta name=author content="都将会"><meta name=author-link content><meta name=description content="“”"><meta name=keywords content="Spring,interview,面试"><meta itemprop=name content="🚩Spring"><meta itemprop=description content="“”"><meta itemprop=datePublished content="2023-08-30T08:08:08+08:00"><meta itemprop=dateModified content="2023-08-30T08:08:08+08:00"><meta itemprop=wordCount content="5520"><meta itemprop=image content="https://leni.fun/images/avatar.jpg"><meta itemprop=keywords content="Spring,"><meta property="og:title" content="🚩Spring"><meta property="og:description" content="“”"><meta property="og:type" content="article"><meta property="og:url" content="https://leni.fun/spring/"><meta property="og:image" content="https://leni.fun/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-30T08:08:08+08:00"><meta property="article:modified_time" content="2023-08-30T08:08:08+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leni.fun/images/avatar.jpg"><meta name=twitter:title content="🚩Spring"><meta name=twitter:description content="“”"><meta name=application-name content="都将会的 APP"><meta name=apple-mobile-web-app-title content="都将会的 APP"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://leni.fun/spring/><link rel=prev href=https://leni.fun/springsecurity/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"🚩Spring","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/leni.fun\/spring\/"},"genre":"posts","keywords":"Spring","wordcount":5520,"url":"https:\/\/leni.fun\/spring\/","datePublished":"2023-08-30T08:08:08+08:00","dateModified":"2023-08-30T08:08:08+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"都将会"},"description":"“”"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=关键词搜索 id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=关键词搜索 id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/ title>主页</a></li><li class=breadcrumb-item><a href=/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>🚩Spring</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>🚩Spring</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=都将会 data-alt=都将会 class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;都将会</span></span>
<span class=post-category>收录于 <a href=/categories/interview/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> interview</a></span></div><div class=post-meta-line><span title="发布于 2023-08-30 08:08:08"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-08-30>2023-08-30</time></span>&nbsp;<span title="更新于 2023-08-30 08:08:08"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2023-08-30>2023-08-30</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 5520 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 12 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=🚩Spring>
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class=featured-image><img loading=lazy src=/images/pic13.jpg srcset="/images/pic13.jpg, /images/pic13.jpg 1.5x, /images/pic13.jpg 2x" sizes=auto data-title=“” data-alt=/images/pic13.jpg width=2235 height=2235 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#ioc-控制反转--bean-的生命周期>IOC 控制反转 || Bean 的生命周期</a><ul><li><a href=#一实例化-bean-对象>一、实例化 bean 对象</a><ul><li><a href=#五个作用域>五个作用域</a></li></ul></li><li><a href=#二属性赋值population>二、属性赋值（Population）</a><ul><li><a href=#q1循环依赖如何解决三级缓存-or-lazy>🌟Q1：循环依赖如何解决？三级缓存 or @lazy</a></li><li><a href=#q2如果对象要被代理是否需要优先生成一个普通对象>Q2：如果对象要被代理，是否需要优先生成一个普通对象？</a></li></ul></li><li><a href=#三调用-aware-相关接口的方法>三、调用 Aware 相关接口的方法</a></li><li><a href=#四beanpostprocessor-前置处理>四、BeanPostProcessor 前置处理</a></li><li><a href=#五调用-initmethod-方法>五、调用 initMethod 方法</a></li><li><a href=#六beanpostprocessor-后置处理>六、BeanPostProcessor 后置处理</a></li><li><a href=#七销毁>七、销毁</a></li></ul></li><li><a href=#aop>🌟AOP</a><ul><li><a href=#流程>流程</a></li><li><a href=#aop-基本概念>AOP 基本概念</a></li><li><a href=#aop-工作流程>AOP 工作流程</a></li><li><a href=#切入点表达式>切入点表达式</a></li><li><a href=#静态代理和动态代理>静态代理和动态代理</a></li></ul></li><li><a href=#spring-事务>Spring 事务</a><ul><li><a href=#流程-1>流程</a></li><li><a href=#分类>分类</a></li><li><a href=#事务失效场景>事务失效场景</a></li><li><a href=#事务传播特性>🌟事务传播特性</a><ul><li><a href=#3-类>3 类</a></li><li><a href=#7-种>7 种</a></li><li><a href=#q如何保证无论转账是否成功都记录日志留痕>Q：如何保证无论转账是否成功都记录日志留痕？</a></li></ul></li></ul></li><li><a href=#spring-cloud-是如何调用的>Spring Cloud 是如何调用的？</a></li><li><a href=#springmvc-执行流程>SpringMVC 执行流程？</a></li><li><a href=#jwt>JWT</a><ul><li><a href=#jwt-数据结构>JWT 数据结构？</a></li><li><a href=#jwt-和-token-的区别>JWT 和 token 的区别？</a></li><li><a href=#security和jwt怎么融合>security和jwt怎么融合？</a></li><li><a href=#从cookie到jwt解决了什么>从cookie到jwt解决了什么？</a></li><li><a href=#token-泄露怎么处理>token 泄露怎么处理？</a></li></ul></li><li><a href=#springboot的自动装配原理>Springboot的自动装配原理？</a><ul><li><a href=#springbootapplication>@SpringbootApplication</a></li><li><a href=#注入方式>注入方式</a></li><li><a href=#如何对静态成员注入>如何对静态成员注入？</a></li></ul></li><li><a href=#拦截器interceptor与过滤器filter的区别>拦截器（Interceptor）与过滤器（Filter）的区别？</a><ul><li><a href=#执行流程>执行流程</a></li><li><a href=#拦截器interceptor>拦截器（Interceptor）</a></li><li><a href=#拦截器链>拦截器链</a></li></ul></li><li><a href=#全局异常处理>全局异常处理</a></li><li><a href=#rest风格representational-state-transfer表现形式状态转换>REST风格（Representational State Transfer）表现形式状态转换</a></li><li><a href=#q如何避免spring加载springmvc已加载的controller>Q：如何避免Spring加载SpringMVC已加载的Controller？</a></li><li><a href=#参数传递>参数传递</a></li><li><a href=#springmvc>SpringMVC</a></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=ioc-控制反转--bean-的生命周期>IOC 控制反转 || Bean 的生命周期</h3><p>使用对象的时候，不再通过 new 产生对象，而是将对象交给<strong>外部</strong>的IoC容器（ApplicationContext，接口）来管理，这个容器是 map 结构，存在三级缓存。</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png data-sub-html="<h2>image-20230829193417251</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/image-20230829193417251.png 2x" sizes=auto data-title=image-20230829193417251 data-alt=image-20230829193417251 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h4 id=一实例化-bean-对象>一、实例化 bean 对象</h4><ol><li>通过 createBeanFactory 创建出一个 bean 工厂 DefaultListableBeanFactory</li><li>循环创建对象，因为容器中的 bean 默认是单例的，所以优先尝试使用 getBean、doGetBean 获取 bean</li><li>找不到的话，通过 createBean、doCreateBean 以<strong>反射</strong>的方式创建对象，一般情况采用的是无参构造方法 clazz.getDeclaredConstructor().newInstance() ，可以灵活访问到私有的属性。</li></ol><h5 id=五个作用域>五个作用域</h5><p>其中最基础的有下面两种：</p><ol><li>Singleton，这是 Spring 的默认作用域，也就是为每个 IOC 容器创建唯一的一个 Bean 实例。【适合无状态】</li><li>Prototype，针对每个 getBean 请求，容器都会单独创建一个 Bean 实例。【适合有状态】</li></ol><p>如果是 Web 容器：</p><ol><li>Request，为每个 HTTP 请求创建单独的 Bean 实例。</li><li>Session，很显然 Bean 实例的作用域是 Session 范围。</li><li>GlobalSession，用于 Portlet 容器，因为每个 Portlet 有单独的 Session，GlobalSession 提供一个全局性的 HTTP Session。</li></ol><h4 id=二属性赋值population>二、属性赋值（Population）</h4><p>依赖注入（Dependency Injection）或属性赋值 populateBean()</p><ol><li>setter注入（建议）：更加灵活，可以在对象创建以后动态更改依赖关系。set方法上添加@Autowired注解，类定义上添加@Component注解。</li><li>构造方法注入：一旦创建完成，依赖关系就不能再改变</li></ol><h5 id=q1循环依赖如何解决三级缓存-or-lazy>🌟Q1：循环依赖如何解决？三级缓存 or @lazy</h5><ol><li><p>初始化过程中的循环依赖</p><ol><li>一级 singletonObjects：单例池，Map 结构，存放完整的 bean<ul><li>生成完整对象之后放到一级缓存，删除 二、三级缓存：addSingleton()</li></ul></li><li>二级 earlySingletonObjects：Map 结构，存放生命周期未走完的 bean<ul><li>第一次从三级缓存确定是代理对象还是普通对象的时候放入，同时删除三级缓存 getSingleton()</li></ul></li><li>三级 singletonFactories：是一个函数式接口，保证在整个容器运行过程中，同名的 bean 只有一个<ul><li>createBeanInstance 之后：addSingletonFactory()</li></ul></li></ol></li><li><p>构造方法中的循环依赖：采用 @lazy 进行懒加载</p></li></ol><h5 id=q2如果对象要被代理是否需要优先生成一个普通对象>Q2：如果对象要被代理，是否需要优先生成一个普通对象？</h5><p>需要。在实际调用对象过程中，先判断对象是否需要被代理，如果需要被代理，调用 getEarlyBeanReference() 用代理对象来覆盖普通对象。因此，所有 bean 对象在创建的时候都要优先放到三级缓存中，再根据是否被代理来返回代理对象或普通对象。</p><h4 id=三调用-aware-相关接口的方法>三、调用 Aware 相关接口的方法</h4><p>invokeAwareMethod 进行 BeanName、BeanFactory、BeanClassLoader 的属性设置</p><h4 id=四beanpostprocessor-前置处理>四、BeanPostProcessor 前置处理</h4><ul><li>ApplicationContextPostProcessor</li><li>ApplicationContext</li><li>Environment</li><li>ResourceLoader</li></ul><h4 id=五调用-initmethod-方法>五、调用 initMethod 方法</h4><ul><li>InitializingBean 的 afterPropertiesSet()</li><li>自定义的初始化方法</li></ul><h4 id=六beanpostprocessor-后置处理>六、BeanPostProcessor 后置处理</h4><blockquote><p>AOP 是 IOC 的一个扩展功能，是在 bean 生命周期中的一个扩展点。</p></blockquote><p>Spring 的 AOP 在此处通过 AbstractAutoProxyCreator 实现，注册 Destruction 相关的回调接口</p><p><code>return 一、2.</code></p><h4 id=七销毁>七、销毁</h4><ul><li><p>@PreDestroy 注解</p></li><li><p>实现 DisposableBean 接口</p></li></ul><h3 id=aop>🌟AOP</h3><blockquote><p>Aspect Oriented Programming，面向切面编程</p></blockquote><p>作用：无侵入式增强。</p><h4 id=流程>流程</h4><ol><li>创建代理对象（advice、切面、切点）</li><li>通过 jdk 或 cglib 生成代理对象</li><li>执行方法调用：找到 DynamicAdvicoredInterceptor 类中的 intercept() 方法，开始执行</li><li>根据定义好的通知来生成拦截器链</li><li>利用 CglibMethodInvocation 对象从 -1 的位置开始遍历通知</li></ol><h4 id=aop-基本概念>AOP 基本概念</h4><p>在 pom.xml 中导入 aspectjweaver ，配置 @EnableAspectJAutoProxy</p><ul><li>连接点（JoinPoint）：方法【可利用的机会】</li><li>切入点（PointCut）：是连接点的子集，要追加功能的方法 【解决了切面编程中的 Where 问题，让程序可以知道哪些机会点可以应用某个切面动作】<ul><li>@Pointcut(&ldquo;execution(void Pointcut() com.dao.xxxDao.update())&rdquo;) 修饰的方法 pt()</li></ul></li><li>通知（Advice）：有共性的功能 【明确了切面编程中的 What，也就是做什么；同时通过指定 Before、After 或者 Around，定义了 When，也就是什么时候做。】<ul><li>@Before(&ldquo;pt()&rdquo;)<ul><li>形参：JoinPoint</li></ul></li><li>@After(&ldquo;pt()&rdquo;)</li><li>@Around (&ldquo;pt()&rdquo;) public void around(<strong>ProceedingJoinPoint</strong> pjp) throws Throwable{ pjp.proceed();} （重点，常用）<ul><li>形参：ProceedingJoinPoint（必须放在参数的第一位）</li><li>要注意返回值和原始方法一致。</li><li>如果不执行pjp.proceed()，可以实现对原始方法的隔离（权限校验）</li></ul></li></ul></li></ul><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Component</span>
</span></span><span class=line><span class=cl><span class=nd>@Aspect</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ProjectAdvice</span><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nd>@Pointcut</span><span class=o>(</span><span class=s>&#34;execution(* com.edu.zjut.service.*Service.*(..))&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=kt>void</span> <span class=nf>servicePt</span><span class=o>(){}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  <span class=nd>@Around</span><span class=o>(</span><span class=s>&#34;ProjectAdvice.servicePt()&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>runSpeed</span><span class=o>(</span><span class=n>ProceedingJoinPoint</span> <span class=n>pjp</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Throwable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Signature</span> <span class=n>signature</span> <span class=o>=</span> <span class=n>pjp</span><span class=o>.</span><span class=na>getSignature</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>className</span> <span class=o>=</span> <span class=n>signature</span><span class=o>.</span><span class=na>getDeclaringTypeNmae</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>methodName</span> <span class=o>=</span> <span class=n>signature</span><span class=o>.</span><span class=na>getName</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>long</span> <span class=n>start</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=n>0</span><span class=o>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>10000</span><span class=o>;</span><span class=n>i</span><span class=o>++){</span>
</span></span><span class=line><span class=cl>      <span class=n>pjp</span><span class=o>.</span><span class=na>proceed</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>long</span> <span class=n>end</span> <span class=o>=</span> <span class=n>System</span><span class=o>.</span><span class=na>currentTimeMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;业务层接口万次执行&#34;</span><span class=o>+</span> <span class=n>className</span> <span class=o>+</span> <span class=s>&#34;.&#34;</span> <span class=o>+</span> <span class=n>methodName</span> <span class=o>+</span> <span class=s>&#34;------&gt;&#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>end</span><span class=o>-</span><span class=n>start</span><span class=o>)+</span><span class=s>&#34;ms&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><ul><li>AfterReturning(&ldquo;pt()&rdquo;) 只有不抛异常才运行</li><li>AfterThrowing(&ldquo;pt()")只有抛异常才运行</li><li>切面（Aspect）：通知和切入点的联系（多对多）</li><li>通知类：定义通知的类<ul><li>@Aspect</li></ul></li></ul><h4 id=aop-工作流程>AOP 工作流程</h4><p>AOP的本质是<strong>代理模式</strong></p><ol><li>Spring容器启动</li><li>读取切面中配置的切入点</li><li>初始化bean，若类中方法匹配到切入点，则创建<strong>代理对象</strong></li><li>获取bean执行方法</li></ol><h4 id=切入点表达式>切入点表达式</h4><p>标准格式：<code>execution(返回值 包.类.接口（推荐）/实现类.方法())</code>
通配符：<code>*</code>匹配任意符号，<code>..匹配多个连续的任意符号，如：</code>execution(_ _..<em>Service+.</em>(..))`匹配业务层所有接口
书写技巧：</p><ol><li>所有类命名需规范，否则以下失效</li><li>描述切入点通常描述接口，而不描述实现类</li><li>增删改类使用精准类型加速匹配，查询类使用*通配快速描述</li><li>方法名以动词进行精准匹配</li><li>包名书写尽量不使用 .. 匹配，效率太低，常用 * 做单个包描述匹配</li><li>不使用异常作为匹配规则</li></ol><h4 id=静态代理和动态代理>静态代理和动态代理</h4><ul><li>静态代理：在编译时就将接口、实现类、代理类这些都变成了一个个实际的 class 文件。接口一旦增加方法，目标和代理对象都要进行修改。</li><li>动态代理：在运行时生成类字节码，并加载到 JVM 中。可以用来包装 RPC 调用、面向切面的编程（AOP）<ul><li>JDK ：只能代理实现了<strong>接口</strong>的类，运用<strong>反射</strong>的原理。Spring AOP将使用JDK动态代理来生成代理对象。代理对象实现了与目标对象相同的接口，并在方法调用前后织入切面逻辑。JDK动态代理是通过java.lang.reflect.Proxy类和java.lang.reflect.InvocationHandler接口实现的。</li><li>CGLIB：可以代理未实现任何接口的类，通过<strong>修改字节码</strong>，生成子类实现，然后在子类中织入切面逻辑。<ul><li>基于 <strong>ASM，可以直接产生二进制 class 文件</strong>，也可以在类被加载入 Java 虚拟机之前动态改变类行为。</li></ul></li></ul></li></ul><p>Spring AOP 基于动态代理方式实现；AspectJ 基于静态代理方式实现。</p><h3 id=spring-事务>Spring 事务</h3><h4 id=流程-1>流程</h4><p>Spring 事务通过 AOP 实现，生成具体的代理对象。</p><p>事务是通过 TransactionInterceptor 来实现的，然后调用 invoke 来实现具体的逻辑。</p><ol><li>解析事务相关的属性，来判断是否开启新事务</li><li>当需要开启的时候，获取数据库连接，关闭自动提交功能，开启事务</li><li>执行 SQL 逻辑操作</li><li>如果执行失败，通过 completeTransactionAfterThrowing 进行事务的回滚，回滚的具体逻辑是通过 doRollBack() 方法获取 jdbc 连接来实现的</li><li>通过 doCommit() 方法获取连接来提交</li><li>当事务执行完毕后清除相关事务信息：cleanupTransactionInfo</li></ol><h4 id=分类>分类</h4><ul><li>编程式：TransactionTemplate 对业务有侵入性，少用。</li><li>声明式：@EnableTransactionManagement + @TranSactional<ul><li>通过 AOP 将事务处理的功能编织到拦截的方法中（方法前开启事务，方法后酌情回滚）</li></ul></li></ul><h4 id=事务失效场景>事务失效场景</h4><ol><li>异常捕获 => 在 catch 中 throw 异常</li><li>抛出检查异常 => 指定 rollbackfor，因为默认只回滚 unchecked 异常（继承自 RuntimeException 或 Error）</li><li>修饰的方法不是 public</li><li>数据库引擎 MyISAM 不支持事务</li><li>propagation 属性设置为 SUPPORTS、NOT_SUPPORTED、NEVER 时</li></ol><h4 id=事务传播特性>🌟事务传播特性</h4><p>指的是不同方法的嵌套调用过程中，事务应该延用还是新建，当出现异常的时候是回滚还是提交。</p><h5 id=3-类>3 类</h5><ul><li>支持当前事务</li><li>不支持当前事务</li><li>嵌套事务<ul><li>异常统一放在外层方法处理</li><li>内层方法能影响外层，但是外层不会影响内层</li></ul></li></ul><h5 id=7-种>7 种</h5><ul><li><strong>REQUIRED</strong>（默认）：事务管理员有事务就加入，没事务就新建</li><li><strong>REQUIRED_NEW</strong>：无论如何都新建事务</li><li>SUPPORTS：事务管理员有事务就加入，没有就算了（@Transactional 失效）</li><li>NOT_SUPPORTS：无乱如何都不支持事务（@Transaction al 失效）</li><li>MANDATORY：事务管理员有事务就加入，没有就报错</li><li>NEVER：事务管理员没事务没关系，有事务就报错（@Transactional 失效）</li><li><strong>NESTED</strong>：延用外层方法的事务，设置 savePoint</li></ul><h5 id=q如何保证无论转账是否成功都记录日志留痕>Q：如何保证无论转账是否成功都记录日志留痕？</h5><p>A：日志对应的事务不要加入转账的事务中，在插入日志的方法上加上 <code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code></p><h3 id=spring-cloud-是如何调用的>Spring Cloud 是如何调用的？</h3><ol><li>RestTemplate方式调用</li><li>注入 RestTemplate 的bean，添加@Bean注解</li><li>调用 <code>.getForObject()</code> 或 <code>.postForObject()</code> 方法</li><li>Feign方式调用</li><li>添加 pom 依赖</li><li>启动类添加 <a href=/EnableFeignClients>@EnableFeignClients</a> 注解</li><li>写接口：</li></ol><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FeignClient</span><span class=o>(</span><span class=s>&#34;userservice&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>UserClient</span><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nd>@GetMapping</span><span class=o>(</span><span class=s>&#34;/user/{id}&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=n>User</span> <span class=nf>findById</span><span class=o>(</span><span class=nd>@PathVariable</span><span class=o>(</span><span class=s>&#34;id&#34;</span><span class=o>)</span> <span class=n>Long</span> <span class=n>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><ol start=4><li>使用 FeignClient 中定义的方法取代 RestTemplate（并集成了 ribbon，实现了负载均衡）
IRule 接口决定负载均衡策略，并选择某个服务：
1. <strong>ZoneAvoidanceRule</strong>（默认）：对Zone区域内多个服务轮询，zone值可配置
2. RoundRobinRule：轮询
3. WeightedResponseTimeRule：服务响应时间越长，服务器权重就越小，概率就越低
4. RandomRule：随机</li></ol><h3 id=springmvc-执行流程>SpringMVC 执行流程？</h3><p>与 DispatcherServlet（前端控制器） 依次交互的有：</p><ul><li>HandlerMapping （处理器映射器）：找到类名#方法名</li><li>HandlerAdaptor（适配器）：处理参数、返回值</li><li>ViewResolver（视图解析器，用于 JSP）：逻辑视图 -> 视图</li></ul><p>对于前后端分离项目，在方法上添加 @ResponseBody，通过 HttpMessageConverter 响应 JSON 数据
@RestController = @Controller + @ResponseBody</p><h3 id=jwt>JWT</h3><h4 id=jwt-数据结构>JWT 数据结构？</h4><ul><li>head</li><li>payload<ul><li>用户信息</li><li>加密信息</li><li>过期时间</li></ul></li><li>signature</li></ul><h4 id=jwt-和-token-的区别>JWT 和 token 的区别？</h4><p>token 需要查数据库，JWT 不需要。</p><h4 id=security和jwt怎么融合>security和jwt怎么融合？</h4><ul><li>认证：主要 jwt 的 token 实现</li><li>鉴权：springSecurity实现，RBAC = Role-Based Access Control</li></ul><h4 id=从cookie到jwt解决了什么>从cookie到jwt解决了什么？</h4><ol><li>可以转化为 json 串，可读性强；</li><li>RESTful 设计原则，避免在服务端保存会话状态，降低了服务器端的负担；</li><li>签名机制，安全性强。</li></ol><h4 id=token-泄露怎么处理>token 泄露怎么处理？</h4><p>采用非对称加密：给前端一个公钥，加密数据传到后台，用私钥解密后处理数据。</p><h3 id=springboot的自动装配原理>Springboot的自动装配原理？</h3><h4 id=springbootapplication>@SpringbootApplication</h4><ul><li>@SpringBootConfiguration 声明当前类为配置类</li><li>@ComponentScan 组件扫描</li><li>@EnableAutoConfiguration 自动化配置<ul><li>@Import 读取了项目和项目引用的 jar 包，位于 classpath 路径下 META-INF/spring.factories 文件</li><li>@ConditionalOnClass 有则加载</li></ul></li></ul><h4 id=注入方式>注入方式</h4><p>对于引用类型：</p><ol><li>按类型 byType（推荐）：<code>@Autowired</code>使用的是暴力反射，不需要 setter方法</li><li>按名称 byName（变量名与配置耦合，不推荐）<ol><li><code>@Autowired</code>+ <code>@Qualifier("beanName ")</code></li><li><code>@Resource("名称")</code></li></ol></li><li>按构造方法（不常用）</li></ol><p>对于简单属性：使用 @Value(&ldquo;xxx&rdquo;)注入，可以来自外部 property，写法：<code>@Value("${name}")</code>
加载外部properties 使用 @PropertySource(&ldquo;classpath:jdbc.properties&rdquo;)，不可以使用星号<code>*</code></p><h4 id=如何对静态成员注入>如何对静态成员注入？</h4><p>static 对象不能使用 Autowired 注入，只能通过set 方法注入。</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Component</span>  
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>GlobalValue</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=n>DATABASE</span><span class=o>;</span>  
</span></span><span class=line><span class=cl>    <span class=nd>@Value</span><span class=o>(</span><span class=s>&#34;${mongodb.db}&#34;</span><span class=o>)</span>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setDatabase</span><span class=o>(</span><span class=n>String</span> <span class=n>db</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>DATABASE</span> <span class=o>=</span> <span class=n>db</span><span class=o>;</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span> </span></span></code></pre></td></tr></table></div></div><h3 id=拦截器interceptor与过滤器filter的区别>拦截器（Interceptor）与过滤器（Filter）的区别？</h3><ul><li>归属不同：Filter属于Servlet技术，Interceptor属于SpringMVC技术</li><li>拦截内容不同：Filter对所有访问进行增强，Interceptor仅针对SpringMVC的访问进行增强</li></ul><h4 id=执行流程>执行流程</h4><ol><li>preHandle（return true 才走下一步，false结束）</li><li>controller</li><li>postHandle</li><li>AfterCompletion</li></ol><h4 id=拦截器interceptor>拦截器（Interceptor）</h4><p>是一种动态拦截方法调用的机制，作用：</p><ol><li>在指定的方法调用前后执行预先设定的代码</li><li>组织原始方法的执行</li></ol><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// preHandle 方法中可以根据返回值决定是否继续执行方法
</span></span></span><span class=line><span class=cl><span class=c1>// 并且可以通过反射拿到拦截方法，进行更多操作
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>HandlerMethod</span> <span class=n>hm</span> <span class=o>=</span> <span class=o>(</span><span class=n>HandlerMethod</span><span class=o>)</span> <span class=n>handler</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>hm</span><span class=o>.</span><span class=na>getMethod</span><span class=o>();</span></span></span></code></pre></td></tr></table></div></div><h4 id=拦截器链>拦截器链</h4><p>preHandle在前的拦截器，postHandle 和 afterCompletion 在后。</p><ul><li>123 都为 true：pre 123 -> controller -> post 321 -> after 321</li><li>12 true 3 false：pre12 -> after 21</li><li>13 true 2 false： pre1 -> after 1</li><li>23 true 1 false：都不执行</li></ul><h3 id=全局异常处理>全局异常处理</h3><p>表现层通过AOP处理</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RestControllerAdvice</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>GlobalExceptionHandler</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@ExceptionHandler</span><span class=o>(</span><span class=n>value</span> <span class=o>=</span> <span class=n>Exception</span><span class=o>.</span><span class=na>class</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>CommonResult</span> <span class=nf>handleUnknownException</span><span class=o>(</span><span class=n>Exception</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>CommonResult</span><span class=o>.</span><span class=na>failed</span><span class=o>(</span><span class=n>ResultCode</span><span class=o>.</span><span class=na>UNKN0OWN_FAILED</span><span class=o>,</span><span class=s>&#34;系统繁忙，请稍后再试！&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></td></tr></table></div></div><ul><li>业务异常：提醒用户规范操作</li><li>系统异常：安抚用户，通知运维，记录日志</li></ul><h3 id=rest风格representational-state-transfer表现形式状态转换>REST风格（Representational State Transfer）表现形式状态转换</h3><p>资源名称采用复数，如users、books</p><ul><li>GET：查询</li><li>POST：新增</li><li>PUT：修改</li><li>DELETE：删除</li></ul><h3 id=q如何避免spring加载springmvc已加载的controller>Q：如何避免Spring加载SpringMVC已加载的Controller？</h3><p>A：加载Spring控制的bean的时候，排除掉SpringMVC控制的bean。</p><ol><li><code>@ComponentScan(value = "edu.zjut",excludeFilters=@ComponentScan.Filter(type=FilterType.ANNOTATION,classes=Controller.class))</code>按照注解排除</li><li><code>@ComponentScan({"edu.zjut.service","edu.zjut.dao"})</code></li><li>不区分Spring和SpringMVC的环境，都加载</li></ol><h3 id=参数传递>参数传递</h3><ul><li><p><code>@RequestParam("xxx")</code>：请求参数和形参不同时需配置，不写的话默认取相同。</p></li><li><p><code>@RequestParam</code> 修饰 List 就可以实现集合传参。</p></li><li><p>参数对象中有对象时采用 <code>address.city=beijing</code> 这种形式。</p></li><li><p><code>@RequestBody</code>：设置controller方法返回值为响应体。传字符串（json）用</p></li><li><ul><li>HttpMessageConverter</li></ul></li><li><p>日期参数：接收可以用 Date 接，加上 <code>@DateTimeFormat(pattern = "yyyy-MM-dd")</code></p></li><li><p><code>@PathVariable</code> 从路径中取值</p></li></ul><h3 id=springmvc>SpringMVC</h3><p>基于 Java 实现 MVC 模型的轻量级 web 框架。</p><p>后端服务器：</p><ul><li><p>表现层：SpringMVC（取代 Servlet），封装数据（code、msg、data），用postman测试</p></li><li><p>业务层：Spring，用JUnit测试</p></li><li><ul><li><code>@RunWith(SpringJUnit4ClassRunner.class)</code></li><li><code>@ContextConfiguration(classes = SpringConfig.class)</code></li></ul></li><li><p>数据层：Mybatis</p></li></ul><p>返回 json 数据，需要加 <code>@ResponseBody</code>注解。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2023-08-30 08:08:08">更新于 2023-08-30&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://leni.fun/spring/ data-title=🚩Spring data-image=/images/pic13.jpg><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/spring/ class=post-tag>Spring</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/springsecurity/ class=post-nav-item rel=prev title=SpringSecurity><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>SpringSecurity</a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright order-5" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>都将会</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://beian.miit.gov.cn target=_blank>浙ICP备2023023782号</a></span></div><div class="footer-line statistics"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor order-4"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/hihihiman/hihihiman.github.io title=博客源码 target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;bottom:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/pink/pace-theme-center-atom.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:1024},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":"的博客           ","typeit-header-subtitle-mobile":"的博客           "},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!0,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!0},siteTime:"2021-08-26T23:31:00+08:00",typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,loop:!0,speed:150}}</script><script src=/js/theme.min.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>