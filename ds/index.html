<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>🚩DS - 数据结构 - </title><meta name=author content="都将会"><meta name=author-link content><meta name=description content="“”"><meta name=keywords content="数据结构,interview,面试"><meta itemprop=name content="🚩DS - 数据结构"><meta itemprop=description content="“”"><meta itemprop=datePublished content="2023-10-10T21:56:08+08:00"><meta itemprop=dateModified content="2023-10-10T21:56:08+08:00"><meta itemprop=wordCount content="3079"><meta itemprop=image content="https://leni.fun/images/avatar.jpg"><meta itemprop=keywords content="DS,"><meta property="og:title" content="🚩DS - 数据结构"><meta property="og:description" content="“”"><meta property="og:type" content="article"><meta property="og:url" content="https://leni.fun/ds/"><meta property="og:image" content="https://leni.fun/images/avatar.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-10T21:56:08+08:00"><meta property="article:modified_time" content="2023-10-10T21:56:08+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leni.fun/images/avatar.jpg"><meta name=twitter:title content="🚩DS - 数据结构"><meta name=twitter:description content="“”"><meta name=application-name content="都将会的 APP"><meta name=apple-mobile-web-app-title content="都将会的 APP"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://leni.fun/ds/><link rel=prev href=https://leni.fun/jvm%E4%B8%8Egc/><link rel=next href=https://leni.fun/elasticsearch/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"🚩DS - 数据结构","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/leni.fun\/ds\/"},"genre":"posts","keywords":"DS","wordcount":3079,"url":"https:\/\/leni.fun\/ds\/","datePublished":"2023-10-10T21:56:08+08:00","dateModified":"2023-10-10T21:56:08+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"都将会"},"description":"“”"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"dark"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"dark"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=关键词搜索 id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title><img loading=lazy src=/images/icon.png srcset="/images/icon.png, /images/icon.png 1.5x, /images/icon.png 2x" sizes=auto data-title=/images/icon.png data-alt=/images/icon.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>都将会</span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=关键词搜索 id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 技术</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li></ul></li><li class=menu-item><a class=menu-link href=/life/><i class="fa-solid fa-camera-alt fa-fw fa-sm" aria-hidden=true></i> 生活</a></li><li class=menu-item><a class=menu-link href=/friends/><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/ title>主页</a></li><li class=breadcrumb-item><a href=/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>🚩DS - 数据结构</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>🚩DS - 数据结构</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.jpg srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes=auto data-title=都将会 data-alt=都将会 class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;都将会</span></span>
<span class=post-category>收录于 <a href=/categories/interview/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> interview</a></span></div><div class=post-meta-line><span title="发布于 2023-10-10 21:56:08"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-10-10>2023-10-10</time></span>&nbsp;<span title="更新于 2023-10-10 21:56:08"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2023-10-10>2023-10-10</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3079 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 7 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title="🚩DS - 数据结构">
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class=featured-image><img loading=lazy src=/images/pic24.jpg srcset="/images/pic24.jpg, /images/pic24.jpg 1.5x, /images/pic24.jpg 2x" sizes=auto data-title=“” data-alt=/images/pic24.jpg width=975 height=829 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#树>树</a><ul><li><a href=#比较不同的树>🌟比较不同的树</a></li><li><a href=#红黑树>红黑树</a><ul><li><a href=#什么是红黑树>什么是红黑树？</a></li><li><a href=#红黑树有什么好处>红黑树有什么好处？</a></li><li><a href=#红黑树场景>红黑树场景</a></li></ul></li><li><a href=#前缀树>前缀树</a></li></ul></li><li><a href=#jdk-源码>JDK 源码</a><ul><li><a href=#queue-有哪些>Queue 有哪些？</a></li><li><a href=#set-有哪些结构>Set 有哪些结构？</a></li><li><a href=#arraylist-源码分析>🌟ArrayList 源码分析</a></li><li><a href=#hashmap-源码分析>🌟HashMap 源码分析</a><ul><li><a href=#hashmap-17和18的区别>HashMap 1.7和1.8的区别？</a></li></ul></li><li><a href=#concurrenthashmap-源码分析>ConcurrentHashMap 源码分析</a><ul><li><a href=#锁分段技术-hashmap-17和18的区别>锁分段技术？/ HashMap 1.7和1.8的区别？</a></li><li><a href=#get为什么读操作不加锁>【get】为什么读操作不加锁？</a></li><li><a href=#put如何保证插入数据线程安全>【put】如何保证插入数据线程安全？</a></li><li><a href=#concurrenthashmap迭代器是强一致性还是弱一致性hashmap呢>ConcurrentHashMap迭代器是强一致性还是弱一致性？HashMap呢？</a></li></ul></li><li><a href=#hashset>HashSet</a></li></ul></li><li><a href=#基础>基础</a><ul><li><a href=#排序算法比较>排序算法比较</a></li><li><a href=#贪心算法-vs-动态规划>贪心算法 vs 动态规划？</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=树>树</h2><h3 id=比较不同的树>🌟比较不同的树</h3><ul><li>二叉查找树(BST) ：解决了排序的基本问题，但是由于无法保证平衡，可能退化为链表；</li><li>平衡二叉树(AVL) ：通过<strong>旋转</strong>解决了平衡的问题，但是旋转操作效率太低；</li><li>🌟红黑树 ：通过<strong>舍弃严格的平衡和引入红黑节点</strong>，解决了 <strong>平衡二叉树旋转效率过低</strong>的问题，但是在磁盘等场景下，树仍然太高，IO 次数太多；</li><li>B 树 ：通过将二叉树改为多路平衡查找树，<strong>解决了树过高的问题</strong>；</li><li>B+树 ：在 B 树的基础上<ul><li>将非叶节点改造为不存储数据的纯索引节点，<strong>适合放入内存中</strong>；</li><li>进一步降低了树的高度，<strong>查询性能好</strong>；</li><li>叶节点使用指针连接成链表，<strong>范围查询</strong>更加高效。</li></ul></li><li>跳表：用于 Redis 的 zset，解决了链表查询效率低下的问题。</li></ul><h3 id=红黑树>红黑树</h3><h4 id=什么是红黑树>什么是红黑树？</h4><p>自平衡的二叉查找树，在进行插入和删除等可能会破坏树的平衡的操作时，需要重新自处理达到平衡状态。</p><ol><li>根和叶子节点是黑色的，插入的节点是红色的。</li><li>叶子节点是空节点。</li><li>每个红色节点必有黑色子节点。</li><li><strong>任意一结点到每个叶子结点的路径都包含数量相同的黑结点。</strong></li></ol><p>通过左旋、右旋和变色来实现自平衡：</p><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp data-sub-html="<h2>红黑树左旋</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/0df8e3058769d0ac0a7a25585cf1ca8b.webp 2x" sizes=auto data-title=红黑树左旋 data-alt=红黑树左旋 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><strong>左旋</strong>只影响旋转结点和其<strong>右子树</strong>的结构，把右子树的结点往左子树挪了。<strong>右旋</strong>只影响旋转结点和其<strong>左子树</strong>的结构，把左子树的结点往右子树挪了。</p><h4 id=红黑树有什么好处>红黑树有什么好处？</h4><ul><li>红黑树是效率相对较高的当我们<strong>插入和删除数据相对频繁</strong>的时候<ul><li>查询性能略微逊色于AVL树</li></ul></li><li>红黑树是自我平衡的所有操作的复杂度最多是O(logn)</li><li>不管怎么变化，只有红黑两个常数，任何不平衡都会在<strong>三次旋转之内</strong>解决</li></ul><h4 id=红黑树场景>红黑树场景</h4><p>TreeSet、TreeMap、HashMap</p><h3 id=前缀树>前缀树</h3><p>Trie（发音类似 &ldquo;try&rdquo;）或者说 <strong>前缀树</strong> 是一种树形数据结构，用于高效地存储和检索字符串数据集中的键。这一数据结构有相当多的应用情景，例如自动补完和拼写检查。</p><p>请你实现 Trie 类：</p><ul><li><code>Trie()</code> 初始化前缀树对象。</li><li><code>void insert(String word)</code> 向前缀树中插入字符串 <code>word</code> 。</li><li><code>boolean search(String word)</code> 如果字符串 <code>word</code> 在前缀树中，返回 <code>true</code>（即，在检索之前已经插入）；否则，返回 <code>false</code> 。</li><li><code>boolean startsWith(String prefix)</code> 如果之前已经插入的字符串 <code>word</code> 的前缀之一为 <code>prefix</code> ，返回 <code>true</code> ；否则，返回 <code>false</code> 。</li></ul><h2 id=jdk-源码>JDK 源码</h2><h3 id=queue-有哪些>Queue 有哪些？</h3><ul><li>BlockingQueue：提供了线程安全的队列访问方式</li><li>PriorityQueue：优先级队列是一个可以排序的队列</li><li><strong>Deque</strong>：一个线性 collection，支持在两端插入和移除元素。名称 <em>deque</em> 是“double ended queue（双端队列）”的缩写，通常读为“deck”。</li></ul><h3 id=set-有哪些结构>Set 有哪些结构？</h3><ul><li>HashSet：哈希表，无序</li><li>LinkedHashSet：底层数据结构是<strong>双向链表</strong>和哈希表，有序。由链表保证元素有序，由哈希表保证元素唯一。</li><li>TreeSet：底层数据结构是红黑树，内部实现<strong>排序</strong>，也可以自定义排序规则。</li></ul><h3 id=arraylist-源码分析>🌟ArrayList 源码分析</h3><ol><li>默认大小为 10（初始为 0，第一次添加变为 10）</li><li>每次扩容 1.5 倍：0 -> 10 -> 15 -> 22 -> 33 -> 49 &mldr;</li><li>数组 -> list：Arrays.asList() 是浅拷贝，修改数组会影响 list，因为指向同一个内存地址</li><li>list -> 数组：list.toArray() 是深拷贝，调用 Arrays.copyOf(data,size)</li><li>ArrayList 是动态数组，LinkedList 是双向链表，都不是线程安全的，除非 Collections.synchronizedList()</li></ol><h3 id=hashmap-源码分析>🌟HashMap 源码分析</h3><p>put 方法：</p><ol><li>table 为空或 ++size > *<em>threshold(默认 12 = 数组长度（默认 16）</em> 0.75) **时触发扩容机制 resize()<ol><li>每次扩容 &#171;1 （即*2）</li><li>jdk8 之前头插法会导致死循环，jdk8 采用<strong>尾插法，避免扩容 resize() 迁移时的死循环</strong></li></ol></li><li>hash(key) 得到数组索引<ol><li><strong>扰动算法 (hash^hash&#187;>16)异或操作使 hash 值更均匀，减少 hash 冲突</strong></li><li>hash&(n-1), n 为 2n ，等价于 hash%n ，位运算性能更好</li></ol></li><li>key 存在则修改，不存在则添加</li></ol><h4 id=hashmap-17和18的区别>HashMap 1.7和1.8的区别？</h4><p>JDK8 引入了红黑树：</p><ul><li>链表 -> 红黑树：链表长度 >= 8 && 数组长度 >= 64 时</li><li>红黑树 -> 链表：resize（）扩容时，树节点&lt;=6</li></ul><h3 id=concurrenthashmap-源码分析>ConcurrentHashMap 源码分析</h3><h4 id=锁分段技术-hashmap-17和18的区别>锁分段技术？/ HashMap 1.7和1.8的区别？</h4><p>原理：把数据分成很多段储存，每一段都对应一把锁，读取数据不加锁，写操作时能够将锁的粒度保持尽量的小，不用对整个ConcurrentHashMap加锁。</p><ul><li>JDK7：Segment + HashEntry 来保证线程安全 【不可扩容】<ul><li>Segment extends <strong>ReentrantLock</strong>（继承可重入锁）</li><li>HashEntry则用于存储键值对数据</li><li>一个Segment里包含一个HashEntry数组，<strong>每个HashEntry是一个链表结构的元素</strong>，每个Segment守护着一个HashEntry数组里的元素，当对HashEntry数组中的数据进行修改时，必须先获得它对应的Segment锁</li></ul></li><li>JDK8：<strong>CAS + synchronized</strong> 来保证线程安全，<strong>减少了锁的粒度</strong><ul><li>数组+链表：类似 HashMap，长度>8 变为红黑树【处理哈希冲突】</li><li><code>transient volatile int count</code>：volatile的语义可以保证写操作在读操作之前，也就保证了写操作对后续的读操作都是可见的，这样后面get的后续操作就可以拿到完整的元素内容</li><li><strong>对每个数组元素Node加锁</strong>，锁的粒度更细，并发度更高（只要 hash 不冲突就无并发问题）。</li></ul></li></ul><h4 id=get为什么读操作不加锁>【get】为什么读操作不加锁？</h4><p>因为<strong>Node的元素和指针</strong>是用volatile修饰的，在多线程环境下线程A修改结点的val或者新增节点的时候是对线程B可见的。此外，volatile修饰数组对get操作没有效果，但可以在扩容的时候对其他线程具有可见性。
volatile关键字：通过禁止指令重排，保证<strong>可见性、有序性</strong>。但不保证原子性。使用volatile关键字会强制将修改的值立即写入主存，并导致缓存变量的缓存行无效。
但是，当节点是红黑树的时候，如果树正在变色旋转并且错查询的值不是红黑树的头节点，会加读写锁。</p><h4 id=put如何保证插入数据线程安全>【put】如何保证插入数据线程安全？</h4><p>首先判空，非空情况下使用**扰动函数（高16位与低16位做异或，再和Hash_bit做与运算）**计算key的hash值，</p><ol><li>初始化数组采用懒汉式（第一次put时才初始化），线程安全通过一个volatile修饰的变量sizeCtl结合CAS来实现</li><li>当寻址后的数组位置没有被占用时，直接基于主内存地址，通过CAS将创建的Node节点插入到当前位置</li><li>当寻址到的位置正在进行扩容/迁移操作时（hash=MOVED=-1），执行<code>helpTransfer</code>来协助其他线程进行扩容/迁移<ol><li>当 sizeCtl 为负值(<code>-(1+n)</code>)时，表示有 n 个线程正在扩容</li><li>迁移：先计算当前线程需要转移对节点范围，再进行数据迁移</li></ol></li><li>当出现hash冲突时，对单个数组元素加 synchronized 锁，确保线程安全地将节点插入到链表或红黑树（链表长>8时调用<code>treeifyBin(tab,i）</code>转红黑树)中，若key存在替换旧值，若key不存在将kv追加到链表<strong>尾部</strong></li></ol><h4 id=concurrenthashmap迭代器是强一致性还是弱一致性hashmap呢>ConcurrentHashMap迭代器是强一致性还是弱一致性？HashMap呢？</h4><p><strong>迭代器iterator是弱一致性的</strong>，因为在迭代过程中可以向map中添加元素；而HashMap是强一致性的。</p><h3 id=hashset>HashSet</h3><ol><li>底层基于 HashMap 的 keySet 来实现</li><li>如果添加的值相同，保留最新的，因为HashMap 的底层逻辑是：存在则修改，不存在则添加。</li></ol><h2 id=基础>基础</h2><h3 id=排序算法比较>排序算法比较</h3><p><a class=lightgallery href=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png data-thumbnail=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png data-sub-html="<h2>排序算法比较</h2>"><img loading=lazy src=https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png srcset="https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png 1.5x, https://publicpictures.oss-cn-hangzhou.aliyuncs.com/img/2023/08/08/db4a574bd6224d45f6181217a9d736f9.png 2x" sizes=auto data-title=排序算法比较 data-alt=排序算法比较 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>稳定排序算法的优点在于可以保持相等元素的相对顺序，这在某些应用场景下非常重要，例如按照年龄和姓名对学生名单排序时，如果年龄相同，则应该按照姓名的字母顺序排序，这就需要使用稳定排序算法。</p><h3 id=贪心算法-vs-动态规划>贪心算法 vs 动态规划？</h3><p>站在全局角度来看，对于每个可选项，贪心算法是只保留一种决策（要么最优，要么非最优） ，动态规划保留了它的一个决策集，从中取最优。
当然，算法有优势就有劣势，贪心算法虽然适用条件苛刻，但复杂度低，当可选集太大时，动态规划这种穷举策略会比较耗时，而<u>贪心算法虽然并不一定能找到最优解</u>，但也可以找到一个接近最优解的解。
综上，<strong>贪心算法选的是当前最优解，而动态规划是通过子问题的最优解推出当前的最优解</strong>。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2023-10-10 21:56:08">更新于 2023-10-10&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://leni.fun/ds/ data-title="🚩DS - 数据结构" data-image=/images/pic24.jpg><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/ds/ class=post-tag>DS</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/jvm%E4%B8%8Egc/ class=post-nav-item rel=prev title=🚩JVM与GC><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>🚩JVM与GC</a>
<a href=/elasticsearch/ class=post-nav-item rel=next title=🚩ElasticSearch>🚩ElasticSearch<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright order-5" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2021 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>都将会</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://beian.miit.gov.cn target=_blank>浙ICP备2023023782号</a></span></div><div class="footer-line statistics"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor order-4"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://github.com/hihihiman/hihihiman.github.io title=博客源码 target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;bottom:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/pink/pace-theme-center-atom.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/typeit/index.umd.js defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:1024},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":"的博客           ","typeit-header-subtitle-mobile":"的博客           "},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!0,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!0},siteTime:"2021-08-26T23:31:00+08:00",typeit:{cursorChar:"_",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,loop:!0,speed:150}}</script><script src=/js/theme.min.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js></script><script type=text/javascript src=/js/custom.js></script></body></html>